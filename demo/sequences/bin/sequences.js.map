{
"version":3,
"file":"sequences.js",
"sourceRoot":"file:///",
"sources":["C:/HaxeToolkit/haxe/std/js/_std/HxOverrides.hx","C:/HaxeToolkit/haxe/lib/perf,js/1,1,8/src/Perf.hx","C:/HaxeToolkit/haxe/std/js/_std/Reflect.hx","C:/HaxeToolkit/haxe/std/js/_std/Std.hx","C:/HaxeToolkit/haxe/std/js/_std/Type.hx","C:/HaxeToolkit/haxe/std/UInt.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/core/GAFLoader.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/core/ZipToGAFAssetConverter.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/GAF.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/GAFAsset.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/GAFAssetConfig.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/GAFBundle.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/GAFDebugInformation.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/GAFGFXData.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/GAFTimeline.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/GAFTimelineConfig.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CAnimationFrame.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CAnimationFrameInstance.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CAnimationFrames.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CAnimationObject.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CAnimationObjects.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CAnimationSequence.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CAnimationSequences.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CBlurFilterData.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CColorMatrixFilterData.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/utils/VectorUtility.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CFilter.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CFrameAction.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CSound.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CStage.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CTextFieldObject.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CTextFieldObjects.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CTextureAtlas.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CTextureAtlasCSF.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CTextureAtlasElement.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CTextureAtlasElements.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CTextureAtlasScale.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/config/CTextureAtlasSource.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/converters/BinGAFAssetConfigConverter.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/tagfx/TAGFXBase.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/tagfx/TAGFXsourcePixi.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/textures/TextureWrapper.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/textures/SubTexture.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/textures/TextureAtlas.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/display/GAFContainer.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/display/GAFImage.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/display/GAFMovieClip.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/display/GAFScale9Texture.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/display/GAFTextField.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/display/GAFTexture.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/sound/GAFSoundData.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/utils/DebugUtility.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/utils/EventEmitterUtility.hx","C:/HaxeToolkit/haxe/std/haxe/io/Input.hx","C:/HaxeToolkit/haxe/std/haxe/io/BytesInput.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/utils/GAFBytesInput.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/utils/MathUtility.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/utils/MatrixUtility.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/utils/RectangleUtility.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/demo/sequences/src/com/github/mathieuanthoine/gaf/Main.hx","C:/HaxeToolkit/haxe/std/haxe/Log.hx","C:/HaxeToolkit/haxe/std/js/_std/haxe/ds/ObjectMap.hx","C:/HaxeToolkit/haxe/std/js/_std/haxe/ds/StringMap.hx","C:/HaxeToolkit/haxe/std/js/_std/haxe/io/Bytes.hx","C:/HaxeToolkit/haxe/std/haxe/io/Eof.hx","C:/HaxeToolkit/haxe/std/haxe/io/FPHelper.hx","C:/HaxeToolkit/haxe/std/js/Boot.hx","C:/HaxeToolkit/haxe/std/js/html/compat/ArrayBuffer.hx","C:/HaxeToolkit/haxe/std/js/html/compat/Uint8Array.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/converters/ErrorConstants.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/data/converters/WarningConstants.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/events/GAFEvent.hx","C:/Users/m.anthoine/Documents/GitHub/PixiGAFPlayer/gaf/src/com/github/haxePixiGAF/text/TextFormatAlign.hx"],
"sourcesContent":["/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:noDoc\nclass HxOverrides {\n\n\tstatic function dateStr( date :Date ) : String {\n\t\tvar m = date.getMonth() + 1;\n\t\tvar d = date.getDate();\n\t\tvar h = date.getHours();\n\t\tvar mi = date.getMinutes();\n\t\tvar s = date.getSeconds();\n\t\treturn date.getFullYear()\n\t\t\t+\"-\"+(if( m < 10 ) \"0\"+m else \"\"+m)\n\t\t\t+\"-\"+(if( d < 10 ) \"0\"+d else \"\"+d)\n\t\t\t+\" \"+(if( h < 10 ) \"0\"+h else \"\"+h)\n\t\t\t+\":\"+(if( mi < 10 ) \"0\"+mi else \"\"+mi)\n\t\t\t+\":\"+(if( s < 10 ) \"0\"+s else \"\"+s);\n\t}\n\n\tstatic function strDate( s : String ) : Date {\n\t\tswitch( s.length ) {\n\t\tcase 8: // hh:mm:ss\n\t\t\tvar k = s.split(\":\");\n\t\t\tvar d : Date = untyped __new__(Date);\n\t\t\tuntyped d[\"setTime\"](0);\n\t\t\tuntyped d[\"setUTCHours\"](k[0]);\n\t\t\tuntyped d[\"setUTCMinutes\"](k[1]);\n\t\t\tuntyped d[\"setUTCSeconds\"](k[2]);\n\t\t\treturn d;\n\t\tcase 10: // YYYY-MM-DD\n\t\t\tvar k = s.split(\"-\");\n\t\t\treturn new Date(cast k[0],cast untyped k[1] - 1,cast k[2],0,0,0);\n\t\tcase 19: // YYYY-MM-DD hh:mm:ss\n\t\t\tvar k = s.split(\" \");\n\t\t\tvar y = k[0].split(\"-\");\n\t\t\tvar t = k[1].split(\":\");\n\t\t\treturn new Date(cast y[0],cast untyped y[1] - 1,cast y[2],cast t[0],cast t[1],cast t[2]);\n\t\tdefault:\n\t\t\tthrow \"Invalid date format : \" + s;\n\t\t}\n\t}\n\n\tstatic function cca( s : String, index : Int ) : Null<Int> {\n\t\tvar x = (cast s).charCodeAt(index);\n\t\tif( x != x ) // fast isNaN\n\t\t\treturn js.Lib.undefined; // isNaN will still return true\n\t\treturn x;\n\t}\n\n\tstatic function substr( s : String, pos : Int, ?len : Int ) : String {\n\t\tif (len == null) {\n\t\t\tlen = s.length;\n\t\t} else if (len < 0) {\n\t\t\tif (pos == 0)\n\t\t\t\tlen = s.length + len;\n\t\t\telse\n\t\t\t\treturn \"\";\n\t\t}\n\n\t\t#if (js_es < 5)\n\t\tif (pos < 0) {\n\t\t\tpos = s.length + pos;\n\t\t\tif (pos < 0)\n\t\t\t\tpos = 0;\n\t\t}\n\t\t#end\n\n\t\treturn (untyped s).substr(pos, len);\n\t}\n\n\tstatic function indexOf<T>( a : Array<T>, obj : T, i : Int) {\n\t\tvar len = a.length;\n\t\tif (i < 0) {\n\t\t\ti += len;\n\t\t\tif (i < 0) i = 0;\n\t\t}\n\t\twhile (i < len)\n\t\t{\n\t\t\tif (untyped __js__(\"a[i] === obj\"))\n\t\t\t\treturn i;\n\t\t\ti++;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tstatic function lastIndexOf<T>( a : Array<T>, obj : T, i : Int) {\n\t\tvar len = a.length;\n\t\tif (i >= len)\n\t\t\ti = len - 1;\n\t\telse if (i < 0)\n\t\t\ti += len;\n\t\twhile (i >= 0)\n\t\t{\n\t\t\tif (untyped __js__(\"a[i] === obj\"))\n\t\t\t\treturn i;\n\t\t\ti--;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tstatic function remove<T>( a : Array<T>, obj : T ) {\n\t\tvar i = a.indexOf(obj);\n\t\tif( i == -1 ) return false;\n\t\ta.splice(i,1);\n\t\treturn true;\n\t}\n\n\tstatic function iter<T>( a : Array<T> ) : Iterator<T> untyped {\n\t\treturn {\n\t\t\tcur : 0,\n\t\t\tarr : a,\n\t\t\thasNext : function() {\n\t\t\t\treturn __this__.cur < __this__.arr.length;\n\t\t\t},\n\t\t\tnext : function() {\n\t\t\t\treturn __this__.arr[__this__.cur++];\n\t\t\t}\n\t\t};\n\t}\n\n\tstatic function __init__() untyped {\n#if (js_es < 5)\n\t\t__feature__('HxOverrides.indexOf', if( Array.prototype.indexOf ) __js__(\"HxOverrides\").indexOf = function(a,o,i) return Array.prototype.indexOf.call(a, o, i));\n\t\t__feature__('HxOverrides.lastIndexOf', if( Array.prototype.lastIndexOf ) __js__(\"HxOverrides\").lastIndexOf = function(a,o,i) return Array.prototype.lastIndexOf.call(a, o, i));\n#end\n\t}\n\n}\n","import js.html.Performance;\nimport js.html.DivElement;\nimport js.Browser;\n\n@:expose class Perf {\n\n\tpublic static var MEASUREMENT_INTERVAL:Int = 1000;\n\n\tpublic static var FONT_FAMILY:String = \"Helvetica,Arial\";\n\n\tpublic static var FPS_BG_CLR:String = \"#00FF00\";\n\tpublic static var FPS_WARN_BG_CLR:String = \"#FF8000\";\n\tpublic static var FPS_PROB_BG_CLR:String = \"#FF0000\";\n\n\tpublic static var MS_BG_CLR:String = \"#FFFF00\";\n\tpublic static var MEM_BG_CLR:String = \"#086A87\";\n\tpublic static var INFO_BG_CLR:String = \"#00FFFF\";\n\tpublic static var FPS_TXT_CLR:String = \"#000000\";\n\tpublic static var MS_TXT_CLR:String = \"#000000\";\n\tpublic static var MEM_TXT_CLR:String = \"#FFFFFF\";\n\tpublic static var INFO_TXT_CLR:String = \"#000000\";\n\n\tpublic static var TOP_LEFT:String = \"TL\";\n\tpublic static var TOP_RIGHT:String = \"TR\";\n\tpublic static var BOTTOM_LEFT:String = \"BL\";\n\tpublic static var BOTTOM_RIGHT:String = \"BR\";\n\n\tstatic var DELAY_TIME:Int = 4000;\n\n\tpublic var fps:DivElement;\n\tpublic var ms:DivElement;\n\tpublic var memory:DivElement;\n\tpublic var info:DivElement;\n\n\tpublic var lowFps:Float;\n\tpublic var avgFps:Float;\n\tpublic var currentFps:Float;\n\tpublic var currentMs:Float;\n\tpublic var currentMem:String;\n\n\tvar _time:Float;\n\tvar _startTime:Float;\n\tvar _prevTime:Float;\n\tvar _ticks:Int;\n\tvar _fpsMin:Float;\n\tvar _fpsMax:Float;\n\tvar _memCheck:Bool;\n\tvar _pos:String;\n\tvar _offset:Float;\n\tvar _measureCount:Int;\n\tvar _totalFps:Float;\n\n\tvar _perfObj:Performance;\n\tvar _memoryObj:Memory;\n\tvar _raf:Int;\n\n\tvar RAF:Dynamic;\n\tvar CAF:Dynamic;\n\n\tpublic function new(?pos = \"TR\", ?offset:Float = 0) {\n\t\t_perfObj = Browser.window.performance;\n\t\tif (Reflect.field(_perfObj, \"memory\") != null) _memoryObj = Reflect.field(_perfObj, \"memory\");\n\t\t_memCheck = (_perfObj != null && _memoryObj != null && _memoryObj.totalJSHeapSize > 0);\n\n\t\t_pos = pos;\n\t\t_offset = offset;\n\n\t\t_init();\n\t\t_createFpsDom();\n\t\t_createMsDom();\n\t\tif (_memCheck) _createMemoryDom();\n\n\t\tif (Browser.window.requestAnimationFrame != null) RAF = Browser.window.requestAnimationFrame;\n\t\telse if (untyped __js__(\"window\").mozRequestAnimationFrame != null) RAF = untyped __js__(\"window\").mozRequestAnimationFrame;\n\t\telse if (untyped __js__(\"window\").webkitRequestAnimationFrame != null) RAF = untyped __js__(\"window\").webkitRequestAnimationFrame;\n\t\telse if (untyped __js__(\"window\").msRequestAnimationFrame != null) RAF = untyped __js__(\"window\").msRequestAnimationFrame;\n\n\t\tif (Browser.window.cancelAnimationFrame != null) CAF = Browser.window.cancelAnimationFrame;\n\t\telse if (untyped __js__(\"window\").mozCancelAnimationFrame != null) CAF = untyped __js__(\"window\").mozCancelAnimationFrame;\n\t\telse if (untyped __js__(\"window\").webkitCancelAnimationFrame != null) CAF = untyped __js__(\"window\").webkitCancelAnimationFrame;\n\t\telse if (untyped __js__(\"window\").msCancelAnimationFrame != null) CAF = untyped __js__(\"window\").msCancelAnimationFrame;\n\n\t\tif (RAF != null) _raf = Reflect.callMethod(Browser.window, RAF, [_tick]);\n\t}\n\n\tinline function _init() {\n\t\tcurrentFps = 60;\n\t\tcurrentMs = 0;\n\t\tcurrentMem = \"0\";\n\n\t\tlowFps = 60;\n\t\tavgFps = 60;\n\n\t\t_measureCount = 0;\n\t\t_totalFps = 0;\n\t\t_time = 0;\n\t\t_ticks = 0;\n\t\t_fpsMin = 60;\n\t\t_fpsMax = 60;\n\t\t_startTime = _now();\n\t\t_prevTime = -MEASUREMENT_INTERVAL;\n\t}\n\n\tinline function _now():Float {\n\t\treturn (_perfObj != null && _perfObj.now != null) ? _perfObj.now() : Date.now().getTime();\n\t}\n\n\tfunction _tick(val:Float) {\n\t\tvar time = _now();\n\t\t_ticks++;\n\n\t\tif (_raf != null && time > _prevTime + MEASUREMENT_INTERVAL) {\n\t\t\tcurrentMs = Math.round(time - _startTime);\n\t\t\tms.innerHTML = \"MS: \" + currentMs;\n\n\t\t\tcurrentFps = Math.round((_ticks * 1000) / (time - _prevTime));\n\t\t\tif (currentFps > 0 && val > DELAY_TIME) {\n\t\t\t\t_measureCount++;\n\t\t\t\t_totalFps += currentFps;\n\t\t\t\tlowFps = _fpsMin = Math.min(_fpsMin, currentFps);\n\t\t\t\t_fpsMax = Math.max(_fpsMax, currentFps);\n\t\t\t\tavgFps = Math.round(_totalFps / _measureCount);\n\t\t\t}\n\n\t\t\tfps.innerHTML =  \"FPS: \" + currentFps + \" (\" + _fpsMin + \"-\" + _fpsMax + \")\";\n\n\t\t\tif (currentFps >= 30) fps.style.backgroundColor = FPS_BG_CLR;\n\t\t\telse if (currentFps >= 15) fps.style.backgroundColor = FPS_WARN_BG_CLR;\n\t\t\telse fps.style.backgroundColor = FPS_PROB_BG_CLR;\n\n\t\t\t_prevTime = time;\n\t\t\t_ticks = 0;\n\n\t\t\tif (_memCheck) {\n\t\t\t\tcurrentMem = _getFormattedSize(_memoryObj.usedJSHeapSize, 2);\n\t\t\t\tmemory.innerHTML = \"MEM: \" + currentMem;\n\t\t\t}\n\t\t}\n\t\t_startTime =  time;\n\n\t\tif (_raf != null) _raf = Reflect.callMethod(Browser.window, RAF, [_tick]);\n\t}\n\n\tfunction _createDiv(id:String, ?top:Float = 0):DivElement {\n\t\tvar div:DivElement = Browser.document.createDivElement();\n\t\tdiv.id = id;\n\t\tdiv.className = id;\n\t\tdiv.style.position = \"absolute\";\n\n\t\tswitch (_pos) {\n\t\t\tcase \"TL\":\n\t\t\t\tdiv.style.left = _offset + \"px\";\n\t\t\t\tdiv.style.top = top + \"px\";\n\t\t\tcase \"TR\":\n\t\t\t\tdiv.style.right = _offset + \"px\";\n\t\t\t\tdiv.style.top = top + \"px\";\n\t\t\tcase \"BL\":\n\t\t\t\tdiv.style.left = _offset + \"px\";\n\t\t\t\tdiv.style.bottom = ((_memCheck) ? 48 : 32) - top + \"px\";\n\t\t\tcase \"BR\":\n\t\t\t\tdiv.style.right = _offset + \"px\";\n\t\t\t\tdiv.style.bottom = ((_memCheck) ? 48 : 32) - top + \"px\";\n\t\t}\n\n\t\tdiv.style.width = \"80px\";\n\t\tdiv.style.height = \"12px\";\n\t\tdiv.style.lineHeight = \"12px\";\n\t\tdiv.style.padding = \"2px\";\n\t\tdiv.style.fontFamily = FONT_FAMILY;\n\t\tdiv.style.fontSize = \"9px\";\n\t\tdiv.style.fontWeight = \"bold\";\n\t\tdiv.style.textAlign = \"center\";\n\t\tBrowser.document.body.appendChild(div);\n\t\treturn div;\n\t}\n\n\tfunction _createFpsDom() {\n\t\tfps = _createDiv(\"fps\");\n\t\tfps.style.backgroundColor = FPS_BG_CLR;\n\t\tfps.style.zIndex = \"995\";\n\t\tfps.style.color = FPS_TXT_CLR;\n\t\tfps.innerHTML = \"FPS: 0\";\n\t}\n\n\tfunction _createMsDom() {\n\t\tms = _createDiv(\"ms\", 16);\n\t\tms.style.backgroundColor = MS_BG_CLR;\n\t\tms.style.zIndex = \"996\";\n\t\tms.style.color = MS_TXT_CLR;\n\t\tms.innerHTML = \"MS: 0\";\n\t}\n\n\tfunction _createMemoryDom() {\n\t\tmemory = _createDiv(\"memory\", 32);\n\t\tmemory.style.backgroundColor = MEM_BG_CLR;\n\t\tmemory.style.color = MEM_TXT_CLR;\n\t\tmemory.style.zIndex = \"997\";\n\t\tmemory.innerHTML = \"MEM: 0\";\n\t}\n\n\tfunction _getFormattedSize(bytes:Float, ?frac:Int = 0):String {\n\t\tvar sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n\t\tif (bytes == 0) return \"0\";\n\t\tvar precision = Math.pow(10, frac);\n\t\tvar i = Math.floor(Math.log(bytes) / Math.log(1024));\n\t\treturn Math.round(bytes * precision / Math.pow(1024, i)) / precision + \" \" + sizes[i];\n\t}\n\n\tpublic function addInfo(val:String) {\n\t\tinfo = _createDiv(\"info\", (_memCheck) ? 48 : 32);\n\t\tinfo.style.backgroundColor = INFO_BG_CLR;\n\t\tinfo.style.color = INFO_TXT_CLR;\n\t\tinfo.style.zIndex = \"998\";\n\t\tinfo.innerHTML = val;\n\t}\n\n\tpublic function clearInfo() {\n\t\tif (info != null) {\n\t\t\tBrowser.document.body.removeChild(info);\n\t\t\tinfo = null;\n\t\t}\n\t}\n\n\tpublic function destroy() {\n\t\t_cancelRAF();\n\t\t_perfObj = null;\n\t\t_memoryObj = null;\n\t\tif (fps != null) {\n\t\t\tBrowser.document.body.removeChild(fps);\n\t\t\tfps = null;\n\t\t}\n\t\tif (ms != null) {\n\t\t\tBrowser.document.body.removeChild(ms);\n\t\t\tms = null;\n\t\t}\n\t\tif (memory != null) {\n\t\t\tBrowser.document.body.removeChild(memory);\n\t\t\tmemory = null;\n\t\t}\n\t\tclearInfo();\n\t\t_init();\n\t}\n\n\tinline function _cancelRAF() {\n\t\tReflect.callMethod(Browser.window, CAF, [_raf]);\n\t\t_raf = null;\n\t}\n}\n\ntypedef Memory = {\n\tvar usedJSHeapSize:Float;\n\tvar totalJSHeapSize:Float;\n\tvar jsHeapSizeLimit:Float;\n}","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:coreApi class Reflect {\n\n\t@:pure\n\tpublic inline static function hasField( o : Dynamic, field : String ) : Bool {\n\t\treturn untyped __js__('Object').prototype.hasOwnProperty.call(o, field);\n\t}\n\n\tpublic static function field( o : Dynamic, field : String ) : Dynamic {\n\t\ttry return untyped o[field] catch( e : Dynamic ) return null;\n\t}\n\n\tpublic inline static function setField( o : Dynamic, field : String, value : Dynamic ) : Void untyped {\n\t\to[field] = value;\n\t}\n\n\tpublic static inline function getProperty( o : Dynamic, field : String ) : Dynamic untyped {\n\t\tvar tmp;\n\t\treturn if( o == null ) __define_feature__(\"Reflect.getProperty\",null) else if( o.__properties__ && (tmp=o.__properties__[\"get_\"+field]) ) o[tmp]() else o[field];\n\t}\n\n\tpublic static inline function setProperty( o : Dynamic, field : String, value : Dynamic ) : Void untyped {\n\t\tvar tmp;\n\t\tif( o.__properties__ && (tmp=o.__properties__[\"set_\"+field]) ) o[tmp](value) else o[field] = __define_feature__(\"Reflect.setProperty\",value);\n\t}\n\n\tpublic inline static function callMethod( o : Dynamic, func : haxe.Constraints.Function, args : Array<Dynamic> ) : Dynamic untyped {\n\t\treturn func.apply(o,args);\n\t}\n\n\tpublic static function fields( o : Dynamic ) : Array<String> {\n\t\tvar a = [];\n\t\tif (o != null) untyped {\n\t\t\tvar hasOwnProperty = __js__('Object').prototype.hasOwnProperty;\n\t\t\t__js__(\"for( var f in o ) {\");\n\t\t\tif( f != \"__id__\" && f != \"hx__closures__\" && hasOwnProperty.call(o, f) ) a.push(f);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn a;\n\t}\n\n\tpublic static function isFunction( f : Dynamic ) : Bool untyped {\n\t\treturn __js__(\"typeof(f)\") == \"function\" && !(js.Boot.isClass(f) || js.Boot.isEnum(f));\n\t}\n\n\tpublic static function compare<T>( a : T, b : T ) : Int {\n\t\treturn ( a == b ) ? 0 : (((cast a) > (cast b)) ? 1 : -1);\n\t}\n\n\tpublic static function compareMethods( f1 : Dynamic, f2 : Dynamic ) : Bool {\n\t\tif( f1 == f2 )\n\t\t\treturn true;\n\t\tif( !isFunction(f1) || !isFunction(f2) )\n\t\t\treturn false;\n\t\treturn f1.scope == f2.scope && f1.method == f2.method && f1.method != null;\n\t}\n\n\tpublic static function isObject( v : Dynamic ) : Bool untyped {\n\t\tif( v == null )\n\t\t\treturn false;\n\t\tvar t = __js__(\"typeof(v)\");\n\t\treturn (t == \"string\" || (t == \"object\" && v.__enum__ == null)) || (t == \"function\" && (js.Boot.isClass(v) || js.Boot.isEnum(v)) != null);\n\t}\n\n\tpublic static function isEnumValue( v : Dynamic ) : Bool {\n\t\treturn v != null && v.__enum__ != null;\n\t}\n\n\tpublic static function deleteField( o : Dynamic, field : String ) : Bool untyped {\n\t\tif( !hasField(o,field) ) return false;\n\t\t__js__(\"delete\")(o[field]);\n\t\treturn true;\n\t}\n\n\tpublic static function copy<T>( o : T ) : T {\n\t\tvar o2 : Dynamic = {};\n\t\tfor( f in Reflect.fields(o) )\n\t\t\tReflect.setField(o2,f,Reflect.field(o,f));\n\t\treturn o2;\n\t}\n\n\t@:overload(function( f : Array<Dynamic> -> Void ) : Dynamic {})\n\tpublic static function makeVarArgs( f : Array<Dynamic> -> Dynamic ) : Dynamic {\n\t\treturn function() {\n\t\t\tvar a = untyped Array.prototype.slice.call(__js__(\"arguments\"));\n\t\t\treturn f(a);\n\t\t};\n\t}\n\n}\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nimport js.Boot;\n\n@:keepInit\n@:coreApi class Std {\n\n\tpublic static inline function is( v : Dynamic, t : Dynamic ) : Bool {\n\t\treturn untyped js.Boot.__instanceof(v,t);\n\t}\n\n\tpublic static inline function instance<T:{},S:T>( value : T, c : Class<S> ) : S {\n\t\treturn untyped __instanceof__(value, c) ? cast value : null;\n\t}\n\n\tpublic static function string( s : Dynamic ) : String {\n\t\treturn untyped js.Boot.__string_rec(s,\"\");\n\t}\n\n\tpublic static inline function int( x : Float ) : Int {\n\t\treturn (cast x) | 0;\n\t}\n\n\tpublic static function parseInt( x : String ) : Null<Int> {\n\t\tvar v = untyped __js__(\"parseInt\")(x, 10);\n\t\t// parse again if hexadecimal\n\t\tif( v == 0 && (x.charCodeAt(1) == 'x'.code || x.charCodeAt(1) == 'X'.code) )\n\t\t\tv = untyped __js__(\"parseInt\")(x);\n\t\tif( untyped __js__(\"isNaN\")(v) )\n\t\t\treturn null;\n\t\treturn cast v;\n\t}\n\n\tpublic static inline function parseFloat( x : String ) : Float {\n\t\treturn untyped __js__(\"parseFloat\")(x);\n\t}\n\n\tpublic static function random( x : Int ) : Int {\n\t\treturn x <= 0 ? 0 : Math.floor(Math.random()*x);\n\t}\n\n\tstatic function __init__() : Void untyped {\n\t\t__feature__(\"js.Boot.getClass\",String.prototype.__class__ = __feature__(\"Type.resolveClass\",$hxClasses[\"String\"] = String,String));\n\t\t__feature__(\"js.Boot.isClass\",String.__name__ = __feature__(\"Type.getClassName\",[\"String\"],true));\n\t\t__feature__(\"Type.resolveClass\",$hxClasses[\"Array\"] = Array);\n\t\t__feature__(\"js.Boot.isClass\",Array.__name__ = __feature__(\"Type.getClassName\",[\"Array\"],true));\n\t\t__feature__(\"Date.*\", {\n\t\t\t__feature__(\"js.Boot.getClass\",__js__('Date').prototype.__class__ = __feature__(\"Type.resolveClass\",$hxClasses[\"Date\"] = __js__('Date'),__js__('Date')));\n\t\t\t__feature__(\"js.Boot.isClass\",__js__('Date').__name__ = [\"Date\"]);\n\t\t});\n\t\t__feature__(\"Int.*\",{\n\t\t\tvar Int = __feature__(\"Type.resolveClass\", $hxClasses[\"Int\"] = { __name__ : [\"Int\"] }, { __name__ : [\"Int\"] });\n\t\t});\n\t\t__feature__(\"Dynamic.*\",{\n\t\t\tvar Dynamic = __feature__(\"Type.resolveClass\", $hxClasses[\"Dynamic\"] = { __name__ : [\"Dynamic\"] }, { __name__ : [\"Dynamic\"] });\n\t\t});\n\t\t__feature__(\"Float.*\",{\n\t\t\tvar Float = __feature__(\"Type.resolveClass\", $hxClasses[\"Float\"] = __js__(\"Number\"), __js__(\"Number\"));\n\t\t\tFloat.__name__ = [\"Float\"];\n\t\t});\n\t\t__feature__(\"Bool.*\",{\n\t\t\tvar Bool = __feature__(\"Type.resolveEnum\",$hxClasses[\"Bool\"] = __js__(\"Boolean\"), __js__(\"Boolean\"));\n\t\t\tBool.__ename__ = [\"Bool\"];\n\t\t});\n\t\t__feature__(\"Class.*\",{\n\t\t\tvar Class = __feature__(\"Type.resolveClass\", $hxClasses[\"Class\"] = { __name__ : [\"Class\"] }, { __name__ : [\"Class\"] });\n\t\t});\n\t\t__feature__(\"Enum.*\",{\n\t\t\tvar Enum = {};\n\t\t});\n\t\t__feature__(\"Void.*\",{\n\t\t\tvar Void = __feature__(\"Type.resolveEnum\", $hxClasses[\"Void\"] = { __ename__ : [\"Void\"] }, { __ename__ : [\"Void\"] });\n\t\t});\n\n#if (js_es < 5)\n\t\t__feature__(\"Array.map\",\n\t\t\tif( Array.prototype.map == null )\n\t\t\t\tArray.prototype.map = function(f) {\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tfor( i in 0...__this__.length )\n\t\t\t\t\t\ta[i] = f(__this__[i]);\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t);\n\t\t__feature__(\"Array.filter\",\n\t\t\tif( Array.prototype.filter == null )\n\t\t\t\tArray.prototype.filter = function(f) {\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tfor( i in 0...__this__.length ) {\n\t\t\t\t\t\tvar e = __this__[i];\n\t\t\t\t\t\tif( f(e) ) a.push(e);\n\t\t\t\t\t}\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t);\n#end\n\t}\n\n}\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\nenum ValueType {\n\tTNull;\n\tTInt;\n\tTFloat;\n\tTBool;\n\tTObject;\n\tTFunction;\n\tTClass( c : Class<Dynamic> );\n\tTEnum( e : Enum<Dynamic> );\n\tTUnknown;\n}\n\n@:coreApi class Type {\n\n\tpublic static inline function getClass<T>( o : T ) : Class<T> {\n\t\treturn if (o == null) null else @:privateAccess js.Boot.getClass(o);\n\t}\n\n\tpublic static function getEnum( o : EnumValue ) : Enum<Dynamic> untyped {\n\t\tif( o == null )\n\t\t\treturn null;\n\t\treturn o.__enum__;\n\t}\n\n\tpublic static function getSuperClass( c : Class<Dynamic> ) : Class<Dynamic> untyped {\n\t\treturn c.__super__;\n\t}\n\n\n\tpublic static function getClassName( c : Class<Dynamic> ) : String {\n\t\tvar a : Array<String> = untyped c.__name__;\n\t\tif (a == null)\n\t\t\treturn null;\n\t\treturn a.join(\".\");\n\t}\n\n\tpublic static function getEnumName( e : Enum<Dynamic> ) : String {\n\t\tvar a : Array<String> = untyped e.__ename__;\n\t\treturn a.join(\".\");\n\t}\n\n\tpublic static function resolveClass( name : String ) : Class<Dynamic> untyped {\n\t\tvar cl : Class<Dynamic> = $hxClasses[name];\n\t\t// ensure that this is a class\n\t\tif( cl == null || !js.Boot.isClass(cl) )\n\t\t\treturn null;\n\t\treturn cl;\n\t}\n\n\tpublic static function resolveEnum( name : String ) : Enum<Dynamic> untyped {\n\t\tvar e : Dynamic = $hxClasses[name];\n\t\t// ensure that this is an enum\n\t\tif( e == null || !js.Boot.isEnum(e) )\n\t\t\treturn null;\n\t\treturn e;\n\t}\n\n\tpublic static function createInstance<T>( cl : Class<T>, args : Array<Dynamic> ) : T untyped {\n\t\tswitch( args.length ) {\n\t\tcase 0:\n\t\t\treturn __new__(cl);\n\t\tcase 1:\n\t\t\treturn __new__(cl,args[0]);\n\t\tcase 2:\n\t\t\treturn __new__(cl,args[0],args[1]);\n\t\tcase 3:\n\t\t\treturn __new__(cl,args[0],args[1],args[2]);\n\t\tcase 4:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3]);\n\t\tcase 5:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4]);\n\t\tcase 6:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5]);\n\t\tcase 7:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6]);\n\t\tcase 8:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);\n\t\tcase 9:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8]);\n\t\tcase 10:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9]);\n\t\tcase 11:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9],args[10]);\n\t\tcase 12:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9],args[10],args[11]);\n\t\tcase 13:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9],args[10],args[11],args[12]);\n\t\tcase 14:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9],args[10],args[11],args[12],args[13]);\n\t\tdefault:\n\t\t\tthrow \"Too many arguments\";\n\t\t}\n\t}\n\n\tpublic static function createEmptyInstance<T>( cl : Class<T> ) : T untyped {\n\t\t__js__(\"function empty() {}; empty.prototype = cl.prototype\");\n\t\treturn __js__(\"new empty()\");\n\t}\n\n\tpublic static function createEnum<T>( e : Enum<T>, constr : String, ?params : Array<Dynamic> ) : T {\n\t\tvar f:Dynamic = Reflect.field(e,constr);\n\t\tif( f == null ) throw \"No such constructor \"+constr;\n\t\tif( Reflect.isFunction(f) ) {\n\t\t\tif( params == null ) throw \"Constructor \"+constr+\" need parameters\";\n\t\t\treturn Reflect.callMethod(e,f,params);\n\t\t}\n\t\tif( params != null && params.length != 0 )\n\t\t\tthrow \"Constructor \"+constr+\" does not need parameters\";\n\t\treturn f;\n\t}\n\n\tpublic static function createEnumIndex<T>( e : Enum<T>, index : Int, ?params : Array<Dynamic> ) : T {\n\t\tvar c : String = (untyped e.__constructs__)[index];\n\t\tif( c == null ) throw index+\" is not a valid enum constructor index\";\n\t\treturn createEnum(e,c,params);\n\t}\n\n\tpublic static function getInstanceFields( c : Class<Dynamic> ) : Array<String> {\n\t\tvar a = [];\n\t\tuntyped __js__(\"for(var i in c.prototype) a.push(i)\");\n\t\ta.remove(\"__class__\");\n\t\ta.remove(\"__properties__\");\n\t\treturn a;\n\t}\n\n\tpublic static function getClassFields( c : Class<Dynamic> ) : Array<String> {\n\t\tvar a = Reflect.fields(c);\n\t\ta.remove(\"__name__\");\n\t\ta.remove(\"__interfaces__\");\n\t\ta.remove(\"__properties__\");\n\t\ta.remove(\"__super__\");\n\t\ta.remove(\"__meta__\");\n\t\ta.remove(\"prototype\");\n\t\treturn a;\n\t}\n\n\tpublic static inline function getEnumConstructs( e : Enum<Dynamic> ) : Array<String> {\n\t\treturn ((cast e).__constructs__ : Array<String>).copy();\n\t}\n\n\tpublic static function typeof( v : Dynamic ) : ValueType untyped {\n\t\tswitch( __js__(\"typeof\")(v) ) {\n\t\tcase \"boolean\": return TBool;\n\t\tcase \"string\": return TClass(String);\n\t\tcase \"number\":\n\t\t\t// this should handle all cases : NaN, +/-Inf and Floats outside range\n\t\t\tif( Math.ceil(v) == v%2147483648.0 )\n\t\t\t\treturn TInt;\n\t\t\treturn TFloat;\n\t\tcase \"object\":\n\t\t\tif( v == null )\n\t\t\t\treturn TNull;\n\t\t\tvar e = v.__enum__;\n\t\t\tif( e != null )\n\t\t\t\treturn TEnum(e);\n\t\t\tvar c = js.Boot.getClass(v);\n\t\t\tif( c != null )\n\t\t\t\treturn TClass(c);\n\t\t\treturn TObject;\n\t\tcase \"function\":\n\t\t\tif( js.Boot.isClass(v) || js.Boot.isEnum(v) )\n\t\t\t\treturn TObject;\n\t\t\treturn TFunction;\n\t\tcase \"undefined\":\n\t\t\treturn TNull;\n\t\tdefault:\n\t\t\treturn TUnknown;\n\t\t}\n\t}\n\n\tpublic static function enumEq<T>( a : T, b : T ) : Bool untyped {\n\t\tif( a == b )\n\t\t\treturn true;\n\t\ttry {\n\t\t\tif( a[0] != b[0] )\n\t\t\t\treturn false;\n\t\t\tfor( i in 2...a.length )\n\t\t\t\tif( !enumEq(a[i],b[i]) )\n\t\t\t\t\treturn false;\n\t\t\tvar e = a.__enum__;\n\t\t\tif( e != b.__enum__ || e == null )\n\t\t\t\treturn false;\n\t\t} catch( e : Dynamic ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic inline static function enumConstructor( e : EnumValue ) : String {\n\t\treturn untyped e[0];\n\t}\n\n\tpublic inline static function enumParameters( e : EnumValue ) : Array<Dynamic> {\n\t\treturn untyped e.slice(2);\n\t}\n\n\tpublic inline static function enumIndex( e : EnumValue ) : Int {\n\t\treturn untyped e[1];\n\t}\n\n\tpublic inline static function allEnums<T>( e : Enum<T> ) : Array<T> {\n\t\treturn untyped __define_feature__(\"Type.allEnums\", e.__empty_constructs__);\n\t}\n\n}\n\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n#if ((flash || flash9doc || cs || hl) && !doc_gen)\n/**\n\tThe unsigned `Int` type is only defined for Flash and C#. It's currently\n\thandled the same as a normal Int.\n\n\t@see http://haxe.org/manual/types-basic-types.html\n**/\n@:coreType\n@:notNull\n@:runtimeValue\n@:analyzer(no_const_propagation)\nabstract UInt to Int from Int\n{\n\t@:commutative @:op(A+B) private static function addI(lhs:UInt, rhs:Int):UInt;\n\t@:commutative @:op(A+B) private static function addF(lhs:UInt, rhs:Float):Float;\n\t@:op(A+B) private static function add(lhs:UInt, rhs:UInt):UInt;\n\n\t@:commutative @:op(A*B) private static function mulI(lhs:UInt, rhs:Int):UInt;\n\t@:commutative @:op(A*B) private static function mulF(lhs:UInt, rhs:Float):Float;\n\t@:op(A*B) private static function mul(lhs:UInt, rhs:UInt):UInt;\n\n\t@:op(A%B) private static function modI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A%B) private static function modF(lhs:UInt, rhs:Float):Float;\n\t@:op(A%B) private static function mod(lhs:UInt, rhs:UInt):UInt;\n\n\t@:op(A-B) private static function subI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A-B) private static function subF(lhs:UInt, rhs:Float):Float;\n\t@:op(A-B) private static function sub(lhs:UInt, rhs:UInt):UInt;\n\n\t@:op(A/B) private static function divI(lhs:UInt, rhs:Int):Float;\n\t@:op(A/B) private static function divF(lhs:UInt, rhs:Float):Float;\n\t@:op(A/B) private static function div(lhs:UInt, rhs:UInt):Float;\n\n\t@:commutative @:op(A|B) private static function orI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A|B) private static function or(lhs:UInt, rhs:UInt):UInt;\n\n\t@:commutative @:op(A^B) private static function xorI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A^B) private static function xor(lhs:UInt, rhs:UInt):UInt;\n\n\t@:commutative @:op(A&B) private static function andI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A&B) private static function and(lhs:UInt, rhs:UInt):UInt;\n\n\t@:op(A<<B) private static function shl(lhs:UInt, rhs:Int):UInt;\n\t@:op(A>>B) private static inline function shr(lhs:UInt, rhs:Int):UInt return lhs >>> rhs;\n\t@:op(A>>>B) private static function ushr(lhs:UInt, rhs:Int):UInt;\n\n\t@:op(A>B) private static function gt(lhs:UInt, rhs:UInt):Bool;\n\t@:op(A>=B) private static function gte(lhs:UInt, rhs:UInt):Bool;\n\t@:op(A<B) private static function lt(lhs:UInt, rhs:UInt):Bool;\n\t@:op(A<=B) private static function lte(lhs:UInt, rhs:UInt):Bool;\n\n\t@:op(A>B) private static function gtf(lhs:UInt, rhs:Float):Bool;\n\t@:op(A>B) private static function gtf2(lhs:Float, rhs:UInt):Bool;\n\t@:op(A>=B) private static function gtef(lhs:UInt, rhs:Float):Bool;\n\t@:op(A>=B) private static function gtef2(lhs:Float, rhs:UInt):Bool;\n\t@:op(A<B) private static function ltf(lhs:UInt, rhs:Float):Bool;\n\t@:op(A<B) private static function ltf2(lhs:Float, rhs:UInt):Bool;\n\t@:op(A<=B) private static function ltef(lhs:UInt, rhs:Float):Bool;\n\t@:op(A<=B) private static function ltef2(lhs:Float, rhs:UInt):Bool;\n\n\t@:op(~A) private static function bneg(t:UInt):UInt;\n\n\t@:commutative @:op(A == B) private static function equalsInt<T:Int>(a:UInt, b:T):Bool;\n\t@:commutative @:op(A != B) private static function notEqualsInt<T:Int>(a:UInt, b:T):Bool;\n\t@:commutative @:op(A == B) private static function equalsFloat<T:Float>(a:UInt, b:T):Bool;\n\t@:commutative @:op(A != B) private static function notEqualsFloat<T:Float>(a:UInt, b:T):Bool;\n\n\t@:op(++A) private function prefixIncrement():UInt;\n\t@:op(A++) private function postfixIncrement():UInt;\n\t@:op(--A) private function prefixDecrement():UInt;\n\t@:op(A--) private function postfixDecrement():UInt;\n}\n#else\n/**\n\tThe unsigned `Int` type is only defined for Flash and C#.\n\tSimulate it for other platforms.\n\n\t@see http://haxe.org/manual/types-basic-types.html\n**/\nabstract UInt(Int) from Int to Int {\n\n\t@:op(A + B) private static inline function add(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() + b.toInt();\n\t}\n\n\t@:op(A / B) private static inline function div(a:UInt, b:UInt):Float {\n\t\treturn a.toFloat() / b.toFloat();\n\t}\n\n\t@:op(A * B) private static inline function mul(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() * b.toInt();\n\t}\n\n\t@:op(A - B) private static inline function sub(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() - b.toInt();\n\t}\n\n\t@:op(A > B) private static #if !js inline #end function gt(a:UInt, b:UInt):Bool {\n\t\tvar aNeg = a.toInt() < 0;\n\t\tvar bNeg = b.toInt() < 0;\n\t\treturn\n\t\t\tif( aNeg != bNeg ) aNeg;\n\t\t\telse a.toInt() > b.toInt();\n\t}\n\n\t@:op(A >= B) private static #if !js inline #end function gte(a:UInt, b:UInt):Bool {\n\t\tvar aNeg = a.toInt() < 0;\n\t\tvar bNeg = b.toInt() < 0;\n\t\treturn\n\t\t\tif( aNeg != bNeg ) aNeg;\n\t\t\telse a.toInt() >= b.toInt();\n\t}\n\n\t@:op(A < B) private static inline function lt(a:UInt, b:UInt):Bool {\n\t\treturn gt(b, a);\n\t}\n\n\t@:op(A <= B) private static inline function lte(a:UInt, b:UInt):Bool {\n\t\treturn gte(b, a);\n\t}\n\n\t@:op(A & B) private static inline function and(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() & b.toInt();\n\t}\n\n\t@:op(A | B) private static inline function or(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() | b.toInt();\n\t}\n\n\t@:op(A ^ B) private static inline function xor(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() ^ b.toInt();\n\t}\n\n\t@:op(A << B) private static inline function shl(a:UInt, b:Int):UInt {\n\t\treturn a.toInt() << b;\n\t}\n\n\t@:op(A >> B) private static inline function shr(a:UInt, b:Int):UInt {\n\t\treturn a.toInt() >>> b;\n\t}\n\n\t@:op(A >>> B) private static inline function ushr(a:UInt, b:Int):UInt {\n\t\treturn a.toInt() >>> b;\n\t}\n\n\t@:op(A % B) private static inline function mod(a:UInt, b:UInt):UInt {\n\t\treturn Std.int( a.toFloat() % b.toFloat() );\n\t}\n\n\t@:commutative @:op(A + B) private static inline function addWithFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() + b;\n\t}\n\n\t@:commutative @:op(A * B) private static inline function mulWithFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() * b;\n\t}\n\n\t@:op(A / B) private static inline function divFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() / b;\n\t}\n\n\t@:op(A / B) private static inline function floatDiv(a:Float, b:UInt):Float {\n\t\treturn a / b.toFloat();\n\t}\n\n\t@:op(A - B) private static inline function subFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() - b;\n\t}\n\n\t@:op(A - B) private static inline function floatSub(a:Float, b:UInt):Float {\n\t\treturn a - b.toFloat();\n\t}\n\n\t@:op(A > B) private static inline function gtFloat(a:UInt, b:Float):Bool {\n\t\treturn a.toFloat() > b;\n\t}\n\n\t@:commutative @:op(A == B) private static inline function equalsInt<T:Int>(a:UInt, b:T):Bool {\n\t\treturn a.toInt() == b;\n\t}\n\n\t@:commutative @:op(A != B) private static inline function notEqualsInt<T:Int>(a:UInt, b:T):Bool {\n\t\treturn a.toInt() != b;\n\t}\n\n\t@:commutative @:op(A == B) private static inline function equalsFloat<T:Float>(a:UInt, b:T):Bool {\n\t\treturn a.toFloat() == b;\n\t}\n\n\t@:commutative @:op(A != B) private static inline function notEqualsFloat<T:Float>(a:UInt, b:T):Bool {\n\t\treturn a.toFloat() != b;\n\t}\n\n\t@:op(A >= B) private static inline function gteFloat(a:UInt, b:Float):Bool {\n\t\treturn a.toFloat() >= b;\n\t}\n\n\n\t@:op(A > B) private static inline function floatGt(a:Float, b:UInt):Bool {\n\t\treturn a > b.toFloat();\n\t}\n\n\t@:op(A >= B) private static inline function floatGte(a:Float, b:UInt):Bool {\n\t\treturn a >= b.toFloat();\n\t}\n\n\t@:op(A < B) private static inline function ltFloat(a:UInt, b:Float):Bool {\n\t\treturn a.toFloat() < b;\n\t}\n\n\t@:op(A <= B) private static inline function lteFloat(a:UInt, b:Float):Bool {\n\t\treturn a.toFloat() <= b;\n\t}\n\n\t@:op(A < B) private static inline function floatLt(a:Float, b:UInt):Bool {\n\t\treturn a < b.toFloat();\n\t}\n\n\t@:op(A <= B) private static inline function floatLte(a:Float, b:UInt):Bool {\n\t\treturn a <= b.toFloat();\n\t}\n\n\t@:op(A % B) private static inline function modFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() % b;\n\t}\n\n\t@:op(A % B) private static inline function floatMod(a:Float, b:UInt):Float {\n\t\treturn a % b.toFloat();\n\t}\n\n\t@:op(~A) private inline function negBits():UInt {\n\t\treturn ~this;\n\t}\n\n\t@:op(++A) private inline function prefixIncrement():UInt {\n\t\treturn ++this;\n\t}\n\n\t@:op(A++) private inline function postfixIncrement():UInt {\n\t\treturn this++;\n\t}\n\n\t@:op(--A) private inline function prefixDecrement():UInt {\n\t\treturn --this;\n\t}\n\n\t@:op(A--) private inline function postfixDecrement():UInt {\n\t\treturn this--;\n\t}\n\n\t// TODO: radix is just defined to deal with doc_gen issues\n\tprivate inline function toString(?radix:Int):String {\n\t\treturn Std.string(toFloat());\n\t}\n\n\tprivate inline function toInt():Int {\n\t\treturn this;\n\t}\n\n\t@:to private #if (!js || analyzer) inline #end function toFloat():Float {\n\t\tvar int = toInt();\n\t\tif (int < 0) {\n\t\t\treturn 4294967296.0 + int;\n\t\t}\n\t\telse {\n\t\t\t// + 0.0 here to make sure we promote to Float on some platforms\n\t\t\t// In particular, PHP was having issues when comparing to Int in the == op.\n\t\t\treturn int + 0.0;\n\t\t}\n\t}\n}\n#end\n","package com.github.haxePixiGAF.core;\r\n\r\nimport com.github.haxePixiGAF.utils.GAFBytesInput;\r\nimport haxe.io.Bytes;\r\nimport pixi.loaders.Loader;\r\nimport pixi.loaders.LoaderOptions;\r\nimport pixi.loaders.Resource;\r\nimport pixi.loaders.ResourceLoader;\r\n\r\n/**\r\n * Loader of GAF resources\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFLoader extends Loader\r\n{\r\n\r\n\tpublic var names:Array<String>=[];\r\n\tpublic var contents:Array<GAFBytesInput>=[];\r\n\r\n\r\n\tpublic function new()\r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic function addGAFFile (pUrl:String):Void\r\n\t{\r\n\t\tif (pUrl.substring(pUrl.length-4) != \".gaf\") throw \"GAFLoader supports only .gaf files\";\r\n\t\tadd(pUrl,{loadType: 1/*LOAD_TYPE.XHR*/,xhrType:'arraybuffer'/*XHR_RESPONSE_TYPE.BUFFER*/});\r\n\t}\r\n\r\n\toverride public function load (?cb:Dynamic):ResourceLoader\r\n\t{\r\n\t\tuse(parseData);\r\n\t\treturn super.load();\r\n\t}\r\n\r\n\tprivate function parseData (pResource:Resource, pNext:Void->Void): Void\r\n\t{\r\n\t\tnames.push(pResource.url);\r\n\t\tvar lBytes:Bytes = Bytes.ofData(pResource.data);\r\n\t\tcontents.push(new GAFBytesInput(lBytes, 0, lBytes.length));\r\n\t\tpNext();\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.core;\r\nimport com.github.haxePixiGAF.data.GAFAsset;\r\nimport com.github.haxePixiGAF.data.GAFAssetConfig;\r\nimport com.github.haxePixiGAF.data.GAFBundle;\r\nimport com.github.haxePixiGAF.data.GAFGFXData;\r\nimport com.github.haxePixiGAF.data.GAFTimeline;\r\nimport com.github.haxePixiGAF.data.GAFTimelineConfig;\r\nimport com.github.haxePixiGAF.data.config.CSound;\r\nimport com.github.haxePixiGAF.data.converters.BinGAFAssetConfigConverter;\r\nimport com.github.haxePixiGAF.data.tagfx.TAGFXBase;\r\nimport com.github.haxePixiGAF.data.tagfx.TAGFXsourcePixi;\r\nimport com.github.haxePixiGAF.events.GAFEvent;\r\nimport com.github.haxePixiGAF.sound.GAFSoundData;\r\nimport com.github.haxePixiGAF.utils.GAFBytesInput;\r\nimport com.github.haxePixiGAF.utils.MathUtility;\r\nimport js.Lib;\r\nimport pixi.interaction.EventEmitter;\r\nimport pixi.loaders.Loader;\r\n\r\nusing com.github.haxePixiGAF.utils.EventEmitterUtility;\r\n\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n */\r\n\r\ntypedef Array_String = Array<String>; \r\n \r\nclass ZipToGAFAssetConverter extends EventEmitter\r\n{\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * In process of conversion doesn't create textures (doesn't load in GPU memory).\r\n\t * Be sure to set up <code>Starling.handleLostContext = true</code> when using this action, otherwise Error will occur\r\n\t */\r\n\tpublic static inline var ACTION_DONT_LOAD_IN_GPU_MEMORY: String = \"actionDontLoadInGPUMemory\";\r\n\r\n\t/**\r\n\t * In process of conversion create textures (load in GPU memory).\r\n\t */\r\n\tpublic static inline var ACTION_LOAD_ALL_IN_GPU_MEMORY: String = \"actionLoadAllInGPUMemory\";\r\n\r\n\t/**\r\n\t * In process of conversion create textures (load in GPU memory) only atlases for default scale and csf\r\n\t */\r\n\tpublic static inline var ACTION_LOAD_IN_GPU_MEMORY_ONLY_DEFAULT: String = \"actionLoadInGPUMemoryOnlyDefault\";\r\n\t\r\n\t/**\r\n\t * Action that should be applied to atlases in process of conversion. Possible values are action constants.\r\n\t * By default loads in GPU memory only atlases for default scale and csf\r\n\t */\r\n\tpublic static var actionWithAtlases: String = ACTION_LOAD_IN_GPU_MEMORY_ONLY_DEFAULT;\r\n\t\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\t\r\n\tprivate var _id:String;\r\n\r\n\t//private var _zip:FZip;\r\n\t//private var _zipLoader:FZipLibrary;\r\n\r\n\tprivate var _currentConfigIndex:Int=0;\r\n\tprivate var _configConvertTimeout:Float;\r\n\r\n\tprivate var _gafAssetsIDs:Array<String>;\r\n\tprivate var _gafAssetConfigs:Map<String,GAFAssetConfig>;\r\n\tprivate var _gafAssetConfigSources:Map<String,GAFBytesInput>;\r\n\r\n\tprivate var _sounds:Array<CSound>;\r\n\t//private var _taGFXs:Map<String,TAGFXSourcePNGBA>;\r\n\tprivate var _taGFXs:Map<String,TAGFXBase>;\r\n\r\n\tprivate var _gfxData:GAFGFXData;\r\n\tprivate var _soundData:GAFSoundData;\r\n\r\n\tprivate var _gafBundle:GAFBundle;\r\n\r\n\tprivate var _defaultScale:Float;\r\n\tprivate var _defaultContentScaleFactor:Float;\r\n\r\n\tprivate var _parseConfigAsync:Bool=false;\r\n\tprivate var _ignoreSounds:Bool=false;\r\n\r\n\t///////////////////////////////////\r\n\r\n\tprivate var _gafAssetsConfigURLs:Array<Dynamic>;\r\n\tprivate var _gafAssetsConfigIndex:Int=0;\r\n\r\n\tprivate var _atlasSourceURLs:Array<Dynamic>;\r\n\t//private var _atlasSourceIndex:Int;\r\n\t\r\n\t//////////////////////////////////\r\n\t\r\n\tprivate var _loader:Loader;\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\t\t\r\n\t/** Creates a new<code>ZipToGAFAssetConverter</code>instance.\r\n\t * @param id The id of the converter.\r\n\t * If it is not empty<code>ZipToGAFAssetConverter</code>sets the<code>name</code>of produced bundle equal to this id.\r\n\t */\r\n\tpublic function new(id:String=null)\r\n\t{\r\n\t\tsuper();\r\n\t\t_id=id;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\t\r\n\t/**\r\n\t * Converts GAF file(*.zip)into<code>GAFTimeline</code>or<code>GAFBundle</code>depending on file content.\r\n\t * Because conversion process is asynchronous use<code>Event.COMPLETE</code>listener to trigger successful conversion.\r\n\t * Use<code>ErrorEvent.ERROR</code>listener to trigger any conversion fail.\r\n\t *\r\n\t * @param data *.zip file binary or File object represents a path to a *.gaf file or directory with *.gaf config files\r\n\t * @param defaultScale Scale value for<code>GAFTimeline</code>that will be set by default\r\n\t * @param defaultContentScaleFactor Content scale factor(csf)value for<code>GAFTimeline</code>that will be set by default\r\n\t */\r\n\tpublic function convert(data:Dynamic, ?defaultScale:Float, ?defaultContentScaleFactor:Float):Void\r\n\t{\r\n\t\t/*\r\n\t\tif(ZipToGAFAssetConverter.actionWithAtlases==ZipToGAFAssetConverter.ACTION_DONT_LOAD_IN_GPU_MEMORY)\r\n\t\t{\r\n\t\t\tthrow new Dynamic(\"Impossible parameters combination! Starling.handleLostContext=false and actionWithAtlases=ACTION_DONT_LOAD_ALL_IN_VIDEO_MEMORY One of the parameters must be changed!\");\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\treset();\r\n\t\r\n\t\tif (defaultScale!=null) _defaultScale=defaultScale;\r\n\t\tif (_defaultContentScaleFactor!=null) _defaultContentScaleFactor=defaultContentScaleFactor;\r\n\r\n\t\tif(_id!=null && _id.length>0)\r\n\t\t{\r\n\t\t\t_gafBundle.name=_id;\r\n\t\t}\r\n\t\t\r\n\t\t//TODO if (Std.is(data, ZipFile)) ; else\r\n\t\tif (Std.is(data, String)) loadUrls([data]);\r\n\t\telse if (Std.is(data, Array_String)) loadUrls(data);\r\n\t\telse if(Std.is(data, GAFLoader)) parseLoader(data);\r\n\t\telse\r\n\t\t{\r\n\t\t\ttrace(\"ERROR\");\r\n\t\t\t//zipProcessError(ErrorConstants.UNKNOWN_FORMAT, 6);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function reset():Void\r\n\t{\r\n\t\t//_zip=null;\r\n\t\t//_zipLoader=null;\r\n\t\t_currentConfigIndex=0;\r\n\t\t_configConvertTimeout=0;\r\n\r\n\t\t_sounds=new Array<CSound>();\r\n\t\t_taGFXs=new Map<String,TAGFXBase>();\r\n\r\n\t\t_gfxData=new GAFGFXData();\r\n\t\t//_soundData=new GAFSoundData();\r\n\t\t_gafBundle=new GAFBundle();\r\n\t\t_gafBundle.soundData=_soundData;\r\n\r\n\t\t_gafAssetsIDs=[];\r\n\t\t_gafAssetConfigs=new Map<String,GAFAssetConfig>();\r\n\t\t_gafAssetConfigSources=new Map<String,GAFBytesInput>();\r\n\r\n\t\t_gafAssetsConfigURLs=[];\r\n\t\t_gafAssetsConfigIndex=0;\r\n\r\n\t\t_atlasSourceURLs=[];\r\n\t\t//_atlasSourceIndex=0;\r\n\t}\t\r\n\t\r\n\tprivate function findAllAtlasURLs():Void\r\n\t{\r\n\t\t\r\n\t\t_atlasSourceURLs=[];\r\n\r\n\t\tvar url:String;\r\n\t\tvar gafTimelineConfigs:Array<GAFTimelineConfig>;\r\n\r\n\t\tfor(id in _gafAssetConfigs.keys())\r\n\t\t{\r\n\t\t\tgafTimelineConfigs=_gafAssetConfigs[id].timelines;\r\n\r\n\t\t\tfor(config in gafTimelineConfigs)\r\n\t\t\t{\r\n\t\t\t\tvar folderURL:String=getFolderURL(id);\r\n\r\n\t\t\t\tfor(scale in config.allTextureAtlases)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(Math.Math.isNaN(_defaultScale)|| MathUtility.equals(scale.scale, _defaultScale))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor(csf in scale.allContentScaleFactors)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif(Math.Math.isNaN(_defaultContentScaleFactor)|| MathUtility.equals(csf.csf, _defaultContentScaleFactor))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfor(source in csf.sources)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\turl=folderURL + source.source;\r\n\r\n\t\t\t\t\t\t\t\t\tif(source.source !=\"no_atlas\"\r\n\t\t\t\t\t\t\t\t\t\t\t&& _atlasSourceURLs.indexOf(url)==-1)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t_atlasSourceURLs.push(url);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(_atlasSourceURLs.length>0)\r\n\t\t{\r\n\t\t\t_loader = new Loader();\r\n\t\t\t_loader.on(GAFEvent.COMPLETE, createGAFTimelines);\r\n\t\t\t\r\n\t\t\tvar url:String;\r\n\t\t\tvar fileName:String;\r\n\t\t\t//var taGFX:TAGFXBase;\r\n\t\t\t\r\n\t\t\tfor (_atlasSourceIndex in 0..._atlasSourceURLs.length) {\r\n\t\t\t\turl=_atlasSourceURLs[_atlasSourceIndex];\r\n\t\t\t\tfileName = url.substring(url.lastIndexOf(\"/\") + 1);\r\n\t\t\t\t// TODO: verifier s'il ne faut pas plutot le faire à la fin\r\n\t\t\t\t//taGFX = new TAGFXsourcePixi(url);\r\n\t\t\t\t_taGFXs[fileName] = new TAGFXsourcePixi(url);//; taGFX;\r\n\t\t\t\t_loader.add(url);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t_loader.load();\r\n\t\t}\r\n\t\t//else\r\n\t\t//{\r\n\t\t\t//createGAFTimelines();\r\n\t\t//}\r\n\t}\r\n\t\r\n\tprivate static function getFolderURL(url:String):String\r\n\t{\r\n\t\tvar cutURL:String=url.split(\"?\")[0];\r\n\r\n\t\tvar lastIndex:Int=cutURL.lastIndexOf(\"/\");\r\n\t\t\r\n\t\treturn cutURL.substring(0, lastIndex + 1);\r\n\t}\r\n\t\r\n\tprivate function loadUrls(pData:Array<String>):Void {\r\n\t\tvar lLoader:GAFLoader = new GAFLoader();\r\n\t\tfor (i in 0...pData.length) lLoader.addGAFFile(pData[i]);\r\n\t\tlLoader.once(\"complete\", onLoadUrls);\r\n\t\tlLoader.load();\r\n\t}\r\n\t\r\n\tprivate function onLoadUrls (pLoader:GAFLoader):Void {\r\n\t\tparseLoader(pLoader);\r\n\t}\r\n\t\r\n\tprivate function parseLoader(pData:GAFLoader):Void\r\n\t{\r\n\t\tvar length:Int = pData.contents.length;\r\n\t\t\r\n\t\tvar fileName:String;\r\n\t\t//var taGFX:TAGFXBase;\r\n\r\n\t\t//_taGFXs=new Map<TAGFXSourcePNGBA>();\r\n\r\n\t\t_gafAssetConfigSources=new Map<String,GAFBytesInput>();\r\n\t\t_gafAssetsIDs=[];\r\n\r\n\t\tfor(i in 0...length)\r\n\t\t{\r\n\t\t\tfileName=pData.names[i];\r\n\t\t\t_gafAssetsIDs.push(fileName);\r\n\t\t\t_gafAssetConfigSources[fileName]=pData.contents[i];\r\n\t\t}\r\n\r\n\t\tconvertConfig();\r\n\t}\r\n\r\n\tprivate function convertConfig():Void\r\n\t{\r\n\t\t//clearTimeout(_configConvertTimeout);\r\n\t\t//_configConvertTimeout=null;\r\n\r\n\t\tvar configID:String = _gafAssetsIDs[_currentConfigIndex];\t\t\r\n\t\tvar configSource:GAFBytesInput=_gafAssetConfigSources[configID];\r\n\t\tvar gafAssetID:String=getAssetId(_gafAssetsIDs[_currentConfigIndex]);\r\n\t\t\r\n\t\tif(Std.is(configSource, GAFBytesInput))\r\n\t\t{\r\n\t\t\tvar converter:BinGAFAssetConfigConverter=new BinGAFAssetConfigConverter(gafAssetID, cast(configSource,GAFBytesInput));\r\n\t\t\tconverter.defaultScale=_defaultScale;\r\n\t\t\tconverter.defaultCSF=_defaultContentScaleFactor;\r\n\t\t\tconverter.ignoreSounds = _ignoreSounds;\r\n\t\t\tconverter.on(GAFEvent.COMPLETE, onConverted);\r\n\t\t\tconverter.on(GAFEvent.ERROR, onConvertError);\r\n\t\t\tconverter.convert(_parseConfigAsync);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow \"Error\";\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function createGAFTimelines(event:Dynamic=null):Void\r\n\t{\r\n\t\tif (event != null) {\r\n\t\t\t_loader.off(GAFEvent.COMPLETE, createGAFTimelines);\r\n\t\t}\r\n\r\n\t\tvar gafTimelineConfigs:Array<GAFTimelineConfig>;\r\n\t\tvar gafAssetConfigID:String;\r\n\t\tvar gafAssetConfig:GAFAssetConfig=null;\r\n\t\tvar gafAsset:GAFAsset=null;\r\n\t\tvar i:Int=0;\r\n\r\n\t\t//for(taGFX in _taGFXs)\r\n\t\t//{\r\n\t\t\t//taGFX.clearSourceAfterTextureCreated=false;\r\n\t\t//}\r\n\t\t\r\n\t\tfor(i in 0..._gafAssetsIDs.length)\r\n\t\t{\r\n\t\t\tgafAssetConfigID = _gafAssetsIDs[i];\r\n\t\t\t\r\n\t\t\tgafAssetConfig=_gafAssetConfigs[gafAssetConfigID];\r\n\t\t\tgafTimelineConfigs=gafAssetConfig.timelines;\r\n\r\n\t\t\tgafAsset=new GAFAsset(gafAssetConfig);\r\n\t\t\tfor(config in gafTimelineConfigs)\r\n\t\t\t{\t\r\n\t\t\t\tgafAsset.addGAFTimeline(createTimeline(config, gafAsset));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t_gafBundle.addGAFAsset(gafAsset);\r\n\t\t}\r\n\r\n\t\tif(gafAsset==null || gafAsset.timelines.length==0)\r\n\t\t{\r\n\t\t\t//zipProcessError(ErrorConstants.TIMELINES_NOT_FOUND);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(_gafAssetsIDs.length==1)\r\n\t\t{\r\n\t\t\tif (_gafBundle.name==null) _gafBundle.name =gafAssetConfig.id;\r\n\t\t}\r\n\r\n\t\t//if(_soundData.hasSoundsToLoad && !_ignoreSounds)\r\n\t\t//{\r\n\t\t\t//_soundData.loadSounds(finalizeParsing, onSoundLoadIOError);\r\n\t\t//}\r\n\t\t//else\r\n\t\t//{\r\n\t\t\tfinalizeParsing();\r\n\t\t//}\r\n\t}\r\n\t\r\n\tprivate function finalizeParsing():Void\r\n\t{\r\n\t\t_taGFXs=null;\r\n\t\t_sounds=null;\r\n\r\n\t\temit(GAFEvent.COMPLETE,{target:this});\r\n\t\t\r\n\t\treturn;\r\n\t\t\r\n\t\t//TODO: a supprimer si ca marche\r\n\t\t\r\n\t\t//if(_zip && !ZipToGAFAssetConverter.keepZipInRAM)\r\n\t\t//{\r\n\t\t\t//var file:FZipFile;\r\n\t\t\t//var count:Int=_zip.getFileCount();\r\n\t\t\t//for(i in 0...count)\r\n\t\t\t//{\r\n\t\t\t\t//file=_zip.getFileAt(i);\r\n\t\t\t\t//if(file.filename.toLowerCase().indexOf(\".atf\")==-1\r\n\t\t\t\t\t\t//&& file.filename.toLowerCase().indexOf(\".png\")==-1)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//file.content.clear();\r\n\t\t\t\t//}\r\n\t\t\t//}\r\n\t\t\t//_zip.close();\r\n\t\t\t//_zip=null;\r\n\t\t//}\r\n\r\n\t\tif(_gfxData.isTexturesReady)\r\n\t\t{\r\n\t\t\t//TODO: isTextureready utile ?\r\n\t\t\temit(GAFEvent.COMPLETE,{target: this});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t_gfxData.on(GAFGFXData.EVENT_TYPE_TEXTURES_READY, onTexturesReady);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function createTimeline(config:GAFTimelineConfig, asset:GAFAsset):GAFTimeline\r\n\t{\r\n\t\tfor(cScale in config.allTextureAtlases)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tif(_defaultScale==null || MathUtility.equals(_defaultScale, cScale.scale))\r\n\t\t\t{\r\n\t\t\t\tfor(cCSF in cScale.allContentScaleFactors)\r\n\t\t\t\t{\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(_defaultContentScaleFactor==null || MathUtility.equals(_defaultContentScaleFactor, cCSF.csf))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor(taSource in cCSF.sources)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif(taSource.source==\"no_atlas\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(_taGFXs[taSource.source]!=null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar taGFX:TAGFXBase=_taGFXs[taSource.source];\r\n\t\t\t\t\t\t\t\ttaGFX.textureScale = cCSF.csf;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t_gfxData.addTAGFX(cScale.scale, cCSF.csf, taSource.id, taGFX);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//zipProcessError(ErrorConstants.ATLAS_NOT_FOUND + taSource.source + \"' in zip\", 3);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar timeline:GAFTimeline=new GAFTimeline(config);\r\n\t\t\r\n\t\ttimeline.gafgfxData=_gfxData;\r\n\t\ttimeline.gafSoundData=_soundData;\r\n\t\ttimeline.gafAsset=asset;\r\n\t\t\r\n\t\tswitch(ZipToGAFAssetConverter.actionWithAtlases)\r\n\t\t{\r\n\t\t\tcase ZipToGAFAssetConverter.ACTION_LOAD_ALL_IN_GPU_MEMORY:\r\n\t\t\t\ttimeline.loadInVideoMemory(GAFTimeline.CONTENT_ALL);\r\n\t\t\tcase ZipToGAFAssetConverter.ACTION_LOAD_IN_GPU_MEMORY_ONLY_DEFAULT:\r\n\t\t\t\ttimeline.loadInVideoMemory(GAFTimeline.CONTENT_DEFAULT);\r\n\t\t}\r\n\r\n\t\treturn timeline;\r\n\t}\r\n\t\r\n\tprivate function getAssetId(configName:String):String\r\n\t{\r\n\t\tvar startIndex:Int=configName.lastIndexOf(\"/\");\r\n\r\n\t\tif(startIndex<0)\r\n\t\t{\r\n\t\t\tstartIndex=0;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tstartIndex++;\r\n\t\t}\r\n\r\n\t\tvar endIndex:Int=configName.lastIndexOf(\".\");\r\n\r\n\t\tif(endIndex<0)\r\n\t\t{\r\n\t\t\tendIndex=0x7fffffff;\r\n\t\t}\r\n\r\n\t\treturn configName.substring(startIndex, endIndex);\r\n\t}\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\t\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function onConvertError(event:Dynamic):Void\r\n\t{\r\n\t\tthrow \"ZipToGAFAssetConverter: \" + event.type;\r\n\t\t\r\n\t\tif(hasEventListener(GAFEvent.ERROR))\r\n\t\t{\r\n\t\t\temit(event);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow event.text;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate function onConverted(event:Dynamic):Void\r\n\t{\r\n\r\n\t\tvar configID:String=_gafAssetsIDs[_currentConfigIndex];\r\n\t\tvar folderURL:String=getFolderURL(configID);\r\n\t\t\r\n\t\tvar converter:BinGAFAssetConfigConverter=cast(event.target,BinGAFAssetConfigConverter);\r\n\t\t\r\n\t\tconverter.off(GAFEvent.COMPLETE, onConverted);\r\n\t\tconverter.off(GAFEvent.ERROR, onConvertError);\r\n\r\n\t\t_gafAssetConfigs[configID]=converter.config;\r\n\t\t\r\n\t\tvar sounds:Array<CSound>=converter.config.sounds;\r\n\t\tif(sounds!=null && !_ignoreSounds)\r\n\t\t{\r\n\t\t\tfor(i in 0...sounds.length)\r\n\t\t\t{\r\n\t\t\t\tsounds[i].source=folderURL + sounds[i].source;\r\n\t\t\t\t//_soundData.addSound(sounds[i], converter.config.id, _sounds[Std.parseInt(sounds[i].source)]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_currentConfigIndex++;\r\n\t\t\r\n\t\tif(_currentConfigIndex>=_gafAssetsIDs.length)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tfindAllAtlasURLs();\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\t\t// TODO ? Version AS3\r\n\t\t\t//if(_gafAssetsConfigURLs!=null && _gafAssetsConfigURLs.length>0)\r\n\t\t\t//{\r\n\t\t\t\t//findAllAtlasURLs();\r\n\t\t\t//}\r\n\t\t\t//else\r\n\t\t\t//{\r\n\t\t\t\t//createGAFTimelines();\r\n\t\t\t//}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconvertConfig();\r\n\t\t\t// TODO ? Version AS3\r\n\t\t\t//_configConvertTimeout=setTimeout(convertConfig, 40);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function onTexturesReady(event:Dynamic):Void\r\n\t{\r\n\t\t_gfxData.off(GAFGFXData.EVENT_TYPE_TEXTURES_READY, onTexturesReady);\r\n\r\n\t\t//TODO: onTextureReady utilisé ?\r\n\t\temit(GAFEvent.COMPLETE,{target:this});\r\n\t}\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\t\r\n\t\r\n\t/**\r\n\t * Return converted<code>GAFBundle</code>. If GAF asset file created as single animation - returns null.\r\n\t */\r\n\tpublic var gafBundle(get_gafBundle, null):GAFBundle;\r\n \tprivate function get_gafBundle():GAFBundle\r\n\t{\r\n\t\treturn _gafBundle;\r\n\t}\r\n\t\r\n\t\r\n}","package com.github.haxePixiGAF.data;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * The GAF class defines global GAF library settings\r\n */\r\nclass GAF\r\n{\r\n\t/**\r\n\t * Optimize draw calls when animation contain mixed objects with alpha &lt;1 and with alpha=1.\r\n\t * This is done by setting alpha=0.99 for all objects that has alpha=1.\r\n\t * In this case all objects will be rendered by one draw call.\r\n\t * When use99alpha=false the number of draw call may be much more\r\n\t *(the number of draw calls depends on objects order in display list)\r\n\t */\r\n\tpublic static var use99alpha:Bool=false;\r\n\r\n\t/**\r\n\t * Play sounds, triggered by the event \"gafPlaySound\" in a frame of the GAFMovieClip.\r\n\t */\r\n\tpublic static var autoPlaySounds:Bool=true;\r\n\r\n\t/**\r\n\t * Indicates if mipMaps will be created for PNG textures(or enabled for ATF textures).\r\n\t */\r\n\tpublic static var useMipMaps:Bool=false;\r\n\r\n\tpublic static var useDeviceFonts:Bool=false;\r\n\r\n\tpublic static var maxAlpha(get_maxAlpha, null):Float;\r\n \tprivate static function get_maxAlpha():Float\r\n\t{\r\n\t\treturn GAF.use99alpha ? 0.99:1;\r\n\t}\r\n}","package com.github.haxePixiGAF.data;\r\n\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasCSF;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasElement;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasScale;\r\nimport com.github.haxePixiGAF.data.textures.TextureWrapper;\r\nimport com.github.haxePixiGAF.display.GAFScale9Texture;\r\nimport com.github.haxePixiGAF.display.GAFTexture;\r\nimport com.github.haxePixiGAF.display.IGAFTexture;\r\nimport com.github.haxePixiGAF.utils.MathUtility;\r\nimport pixi.core.math.Matrix;\r\n\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass GAFAsset\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _config:GAFAssetConfig;\r\n\r\n\tprivate var _timelines:Array<GAFTimeline>;\r\n\tprivate var _timelinesDictionary:Map<String,GAFTimeline>=new Map<String,GAFTimeline>();\r\n\tprivate var _timelinesByLinkage:Map<String,GAFTimeline>=new Map<String,GAFTimeline>();\r\n\r\n\tprivate var _scale:Float;\r\n\tprivate var _csf:Float;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(config:GAFAssetConfig)\r\n\t{\r\n\t\t_config=config;\r\n\r\n\t\t_scale=config.defaultScale;\r\n\t\t_csf=config.defaultContentScaleFactor;\r\n\r\n\t\t_timelines=new Array<GAFTimeline>();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Disposes all assets in bundle\r\n\t */\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\tif(_timelines.length>0)\r\n\t\t{\r\n\t\t\tfor(timeline in _timelines)\r\n\t\t\t{\r\n\t\t\t\ttimeline.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\t\t_timelines=null;\r\n\r\n\t\t_config.dispose();\r\n\t\t_config=null;\r\n\t}\r\n\r\n\t/**  */\r\n\tpublic function addGAFTimeline(timeline:GAFTimeline):Void\r\n\t{\r\n\t\tif(_timelinesDictionary[timeline.id]==null)\r\n\t\t{\r\n\t\t\t_timelinesDictionary[timeline.id]=timeline;\r\n\t\t\t_timelines.push(timeline);\r\n\r\n\t\t\tif(timeline.config.linkage!=null)\r\n\t\t\t{\r\n\t\t\t\t_timelinesByLinkage[timeline.linkage]=timeline;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow \"Bundle error. More then one timeline use id:'\" + timeline.id + \"'\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns<code>GAFTimeline</code>from gaf asset by linkage\r\n\t * @param linkage linkage in a *.fla file library\r\n\t * @return<code>GAFTimeline</code>from gaf asset\r\n\t */\r\n\tpublic function getGAFTimelineByLinkage(linkage:String):GAFTimeline\r\n\t{\r\n\t\tvar gafTimeline:GAFTimeline=_timelinesByLinkage[linkage];\r\n\r\n\t\treturn gafTimeline;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/** \r\n\t * Returns<code>GAFTimeline</code>from gaf asset by ID\r\n\t * @param id Internal timeline id\r\n\t * @return<code>GAFTimeline</code>from gaf asset\r\n\t */\r\n\t//gaf_private function getGAFTimelineByID(id:String):GAFTimeline\r\n\tpublic function getGAFTimelineByID(id:String):GAFTimeline\r\n\t{\r\n\t\treturn _timelinesDictionary[id];\r\n\t}\r\n\r\n\t/** \r\n\t * Returns<code>GAFTimeline</code>from gaf asset bundle by linkage\r\n\t * @param linkage linkage in a *.fla file library\r\n\t * @return<code>GAFTimeline</code>from gaf asset\r\n\t */\r\n\t///*gaf_private*/ function gaf_private_getGAFTimelineByLinkage(linkage:String):GAFTimeline\r\n\t//{\r\n\t\t//return _timelinesByLinkage[linkage];\r\n\t//}\r\n\r\n\tpublic function getCustomRegion(linkage:String, ?scale:Float, ?csf:Float):IGAFTexture\r\n\t{\r\n\t\tif(scale==null)scale=_scale;\r\n\t\tif(csf==null) csf=_csf;\r\n\r\n\t\tvar gafTexture:IGAFTexture=null;\r\n\t\tvar atlasScale:CTextureAtlasScale;\r\n\t\tvar atlasCSF:CTextureAtlasCSF;\r\n\t\tvar element:CTextureAtlasElement;\r\n\t\t\r\n\t\tvar tasl:Int = _config.allTextureAtlases.length;\r\n\t\t\r\n\t\tfor(i in 0...tasl)\r\n\t\t{\r\n\t\t\tatlasScale=_config.allTextureAtlases[i];\r\n\t\t\tif(atlasScale.scale==scale)\r\n\t\t\t{\r\n\t\t\t\tvar tacsfl:Int = atlasScale.allContentScaleFactors.length;\r\n\t\t\t\tfor(j in 0...tacsfl)\r\n\t\t\t\t{\r\n\t\t\t\t\tatlasCSF=atlasScale.allContentScaleFactors[j];\r\n\t\t\t\t\tif(atlasCSF.csf==csf)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\telement=atlasCSF.elements.getElementByLinkage(linkage);\r\n\r\n\t\t\t\t\t\tif(element!=null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar texture:TextureWrapper=atlasCSF.atlas.getTextureByIDAndAtlasID(element.id, element.atlasID);\r\n\t\t\t\t\t\t\tvar pivotMatrix:Matrix=element.pivotMatrix;\r\n\t\t\t\t\t\t\tif(element.scale9Grid !=null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tgafTexture=new GAFScale9Texture(id, texture, pivotMatrix, element.scale9Grid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tgafTexture=new GAFTexture(id, texture, pivotMatrix);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn gafTexture;\r\n\t}\r\n\r\n\tpublic function getValidScale(value:Float):Float\r\n\t{\r\n\t\tvar index:Int=MathUtility.getItemIndex(_config.scaleValues, value);\r\n\t\tif(index !=-1)\r\n\t\t{\r\n\t\t\treturn _config.scaleValues[index];\r\n\t\t}\r\n\t\treturn Math.NaN;\r\n\t}\r\n\r\n\tpublic function hasCSF(value:Float):Bool\r\n\t{\r\n\t\treturn MathUtility.getItemIndex(_config.csfValues, value)>=0;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Returns all<code>GAFTimeline's</code>from gaf asset as<code>Vector</code>\r\n\t * @return<code>GAFTimeline's</code>from gaf asset\r\n\t */\r\n\tpublic var timelines(get_timelines, null):Array<GAFTimeline>;\r\n \tprivate function get_timelines():Array<GAFTimeline>\r\n\t{\r\n\t\treturn _timelines;\r\n\t}\r\n\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _config.id;\r\n\t}\r\n\r\n\tpublic var scale(get_scale, set_scale):Float;\r\n \tprivate function get_scale():Float\r\n\t{\r\n\t\treturn _scale;\r\n\t}\r\n\r\n\tprivate function set_scale(value:Float):Float\r\n\t{\r\n\t\treturn _scale=value;\r\n\t}\r\n\r\n\tpublic var csf(get_csf, set_csf):Float;\r\n \tprivate function get_csf():Float\r\n\t{\r\n\t\treturn _csf;\r\n\t}\r\n\r\n\tprivate function set_csf(value:Float):Float\r\n\t{\r\n\t\treturn _csf=value;\r\n\t}\r\n}","package com.github.haxePixiGAF.data;\r\n\r\nimport com.github.haxePixiGAF.data.config.CSound;\r\nimport com.github.haxePixiGAF.data.config.CStage;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasScale;\r\n\r\n\r\n/**\r\n * AS3 conversion\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFAssetConfig\r\n{\r\n\tpublic static inline var MAX_VERSION:Int=5;\r\n\r\n\tprivate var _id:String;\r\n\tprivate var _compression:Int=0;\r\n\tprivate var _versionMajor:Int=0;\r\n\tprivate var _versionMinor:Int=0;\r\n\tprivate var _fileLength:Int=0;\r\n\tprivate var _scaleValues:Array<Float>;\r\n\tprivate var _csfValues:Array<Float>;\r\n\tprivate var _defaultScale:Float;\r\n\tprivate var _defaultContentScaleFactor:Float;\r\n\r\n\tprivate var _stageConfig:CStage;\r\n\r\n\tprivate var _timelines:Array<GAFTimelineConfig>;\r\n\tprivate var _allTextureAtlases:Array<CTextureAtlasScale>;\r\n\tprivate var _sounds:Array<CSound>;\r\n\r\n\tpublic function new(id:String)\r\n\t{\r\n\t\t_id=id;\r\n\t\t_scaleValues=new Array<Float>();\r\n\t\t_csfValues=new Array<Float>();\r\n\r\n\t\t_timelines=new Array<GAFTimelineConfig>();\r\n\t\t_allTextureAtlases=new Array<CTextureAtlasScale>();\r\n\t}\r\n\r\n\tpublic function addSound(soundData:CSound):Void\r\n\t{\r\n\t\tif (_sounds==null) _sounds =new Array<CSound>();\r\n\t\t_sounds.push(soundData);\r\n\t}\r\n\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\t_allTextureAtlases=null;\r\n\t\t_stageConfig=null;\r\n\t\t_scaleValues=null;\r\n\t\t_csfValues=null;\r\n\t\t_timelines=null;\r\n\t\t_sounds=null;\r\n\t}\r\n\r\n\tpublic var compression(get_compression, set_compression):Int;\r\n \tprivate function get_compression():Int\r\n\t{\r\n\t\treturn _compression;\r\n\t}\r\n\r\n\tprivate function set_compression(value:Int):Int\r\n\t{\r\n\t\treturn _compression=value;\r\n\t}\r\n\r\n\tpublic var versionMajor(get_versionMajor, set_versionMajor):Int;\r\n \tprivate function get_versionMajor():Int\r\n\t{\r\n\t\treturn _versionMajor;\r\n\t}\r\n\r\n\tprivate function set_versionMajor(value:Int):Int\r\n\t{\r\n\t\treturn _versionMajor=value;\r\n\t}\r\n\r\n\tpublic var versionMinor(get_versionMinor, set_versionMinor):Int;\r\n \tprivate function get_versionMinor():Int\r\n\t{\r\n\t\treturn _versionMinor;\r\n\t}\r\n\r\n\tprivate function set_versionMinor(value:Int):Int\r\n\t{\r\n\t\treturn _versionMinor=value;\r\n\t}\r\n\r\n\tpublic var fileLength(get_fileLength, set_fileLength):Int;\r\n \tprivate function get_fileLength():Int\r\n\t{\r\n\t\treturn _fileLength;\r\n\t}\r\n\r\n\tprivate function set_fileLength(value:Int):Int\r\n\t{\r\n\t\treturn _fileLength=value;\r\n\t}\r\n\r\n\tpublic var scaleValues(get_scaleValues, null):Array<Float>;\r\n \tprivate function get_scaleValues():Array<Float>\r\n\t{\r\n\t\treturn _scaleValues;\r\n\t}\r\n\r\n\tpublic var csfValues(get_csfValues, null):Array<Float>;\r\n \tprivate function get_csfValues():Array<Float>\r\n\t{\r\n\t\treturn _csfValues;\r\n\t}\r\n\r\n\tpublic var defaultScale(get_defaultScale, set_defaultScale):Float;\r\n \tprivate function get_defaultScale():Float\r\n\t{\r\n\t\treturn _defaultScale;\r\n\t}\r\n\r\n\tprivate function set_defaultScale(value:Float):Float\r\n\t{\r\n\t\treturn _defaultScale=value;\r\n\t}\r\n\r\n\tpublic var defaultContentScaleFactor(get_defaultContentScaleFactor, set_defaultContentScaleFactor):Float;\r\n \tprivate function get_defaultContentScaleFactor():Float\r\n\t{\r\n\t\treturn _defaultContentScaleFactor;\r\n\t}\r\n\r\n\tprivate function set_defaultContentScaleFactor(value:Float):Float\r\n\t{\r\n\t\treturn _defaultContentScaleFactor=value;\r\n\t}\r\n\r\n\tpublic var timelines(get_timelines, null):Array<GAFTimelineConfig>;\r\n \tprivate function get_timelines():Array<GAFTimelineConfig>\r\n\t{\r\n\t\treturn _timelines;\r\n\t}\r\n\r\n\tpublic var allTextureAtlases(get_allTextureAtlases, null):Array<CTextureAtlasScale>;\r\n \tprivate function get_allTextureAtlases():Array<CTextureAtlasScale>\r\n\t{\r\n\t\treturn _allTextureAtlases;\r\n\t}\r\n\r\n\tpublic var stageConfig(get_stageConfig, set_stageConfig):CStage;\r\n \tprivate function get_stageConfig():CStage\r\n\t{\r\n\t\treturn _stageConfig;\r\n\t}\r\n\r\n\tprivate function set_stageConfig(value:CStage):CStage\r\n\t{\r\n\t\treturn _stageConfig=value;\r\n\t}\r\n\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\tpublic var sounds(get_sounds, null):Array<CSound>;\r\n \tprivate function get_sounds():Array<CSound>\r\n\t{\r\n\t\treturn _sounds;\r\n\t}\r\n}","package com.github.haxePixiGAF.data;\r\nimport com.github.haxePixiGAF.display.IGAFTexture;\r\nimport com.github.haxePixiGAF.sound.GAFSoundData;\r\n\r\n/**\r\n * GAFBundle is utility class that used to save all converted GAFTimelines from bundle in one place with easy access after conversion complete\r\n */\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n */\r\n class GAFBundle\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _name:String;\r\n\tprivate var _soundData:GAFSoundData;\r\n\tprivate var _gafAssets:Array<GAFAsset>;\r\n\tprivate var _gafAssetsDictionary:Map<String,GAFAsset>;// GAFAsset by SWF name\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\t\r\n\tpublic function new()\r\n\t{\r\n\t\t_gafAssets=new Array<GAFAsset>();\r\n\t\t_gafAssetsDictionary=new Map<String,GAFAsset>();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Disposes all assets in bundle\r\n\t */\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\tif(_gafAssets!=null)\r\n\t\t{\r\n\t\t\t//GAFSoundManager.getInstance().stopAll();\r\n\t\t\t//_soundData.dispose();\r\n\t\t\t_soundData=null;\r\n\r\n\t\t\tfor (gafAsset in _gafAssets)\r\n\t\t\t{\r\n\t\t\t\tgafAsset.dispose();\r\n\t\t\t}\r\n\t\t\t_gafAssets=null;\r\n\t\t\t_gafAssetsDictionary=null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns<code>GAFTimeline</code>from bundle by<code>swfName</code>and<code>linkage</code>.\r\n\t * @param swfName is the name of SWF file where original timeline was located(or the name of the *.gaf config file where it is located).\r\n\t * @param linkage is the linkage name of the timeline. If you need to get the Main Timeline from SWF use the \"rootTimeline\" linkage name.\r\n\t * @return<code>GAFTimeline</code>from bundle\r\n\t */\r\n\tpublic function getGAFTimeline(swfName:String, linkage:String=\"rootTimeline\"):GAFTimeline\r\n\t{\r\n\r\n\t\tvar gafTimeline:GAFTimeline=null;\r\n\t\tvar gafAsset:GAFAsset = _gafAssetsDictionary[swfName];\r\n\t\t\r\n\t\tif(gafAsset!=null)\r\n\t\t{\r\n\t\t\tgafTimeline=gafAsset.getGAFTimelineByLinkage(linkage);\r\n\t\t}\r\n\t\t\r\n\t\treturn gafTimeline;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns<code>IGAFTexture</code>(custom image)from bundle by<code>swfName</code>and<code>linkage</code>.\r\n\t * Then it can be used to replace animation parts or create new animation parts.\r\n\t * @param swfName is the name of SWF file where original Bitmap/Sprite was located(or the name of the *.gaf config file where it is located)\r\n\t * @param linkage is the linkage name of the Bitmap/Sprite\r\n\t * @param scale Texture atlas Scale that will be used for<code>IGAFTexture</code>creation. Possible values are values from converted animation config.\r\n\t * @param csf Texture atlas content scale factor(CSF)that will be used for<code>IGAFTexture</code>creation. Possible values are values from converted animation config.\r\n\t * @return<code>IGAFTexture</code>(custom image)from bundle.\r\n\t * @see com.catalystapps.gaf.display.GAFImage\r\n\t * @see com.catalystapps.gaf.display.GAFImage#changeTexture()\r\n\t */\r\n\tpublic function getCustomRegion(swfName:String, linkage:String, ?scale:Float, ?csf:Float):IGAFTexture\r\n\t{\r\n\t\t\r\n\t\tvar gafTexture:IGAFTexture=null;\r\n\t\tvar gafAsset:GAFAsset = _gafAssetsDictionary[swfName];\r\n\t\tif(gafAsset!=null)\r\n\t\t{\r\n\t\t\tgafTexture = gafAsset.getCustomRegion(linkage, scale, csf);\r\n\t\t}\r\n\r\n\t\treturn gafTexture;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function getGAFTimelineBySWFNameAndID(swfName:String, id:String):GAFTimeline\r\n\t{\r\n\t\tvar gafTimeline:GAFTimeline=null;\r\n\t\tvar gafAsset:GAFAsset=_gafAssetsDictionary[swfName];\r\n\t\tif(gafAsset!=null)\r\n\t\t{\r\n\t\t\tgafTimeline=gafAsset.getGAFTimelineByID(id);\r\n\t\t}\r\n\r\n\t\treturn gafTimeline;\r\n\t}\r\n\r\n\tpublic function addGAFAsset(gafAsset:GAFAsset):Void\r\n\t{\r\n\t\t\r\n\t\tif(_gafAssetsDictionary[gafAsset.id]==null)\r\n\t\t{\r\n\t\t\t_gafAssetsDictionary[gafAsset.id]=gafAsset;\r\n\t\t\t_gafAssets.push(gafAsset);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow \"Bundle error. More then one gaf asset use id:'\" + gafAsset.id + \"'\";\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var soundData(get_soundData, set_soundData):GAFSoundData;\r\n\t\r\n \tprivate function get_soundData():GAFSoundData\r\n\t{\r\n\t\treturn _soundData;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param soundData\r\n\t */\r\n\tprivate function set_soundData(soundData:GAFSoundData):GAFSoundData\r\n\t{\r\n\t\treturn _soundData=soundData;\r\n\t}\r\n\r\n\tpublic var gafAssets(get_gafAssets, null):Array<GAFAsset>;\r\n \tprivate function get_gafAssets():Array<GAFAsset>\r\n\t{\r\n\t\treturn _gafAssets;\r\n\t}\r\n\r\n\t/**\r\n\t * The name of the bundle. Used in GAFTimelinesManager to identify specific bundle.\r\n\t * Should be specified by user using corresponding setter or by passing the name as second parameter in GAFTimelinesManager.addGAFBundle().\r\n\t * The name can be auto-setted by ZipToGAFAssetConverter in two cases:\r\n\t * 1)If ZipToGAFAssetConverter.id is not empty ZipToGAFAssetConverter sets the bundle name equal to it's id;\r\n\t * 2)If ZipToGAFAssetConverter.id is empty, but gaf package(zip or folder)contain only one *.gaf config file,\r\n\t * ZipToGAFAssetConverter sets the bundle name equal to the name of the *.gaf config file.\r\n\t */\r\n\tpublic var name(get_name, set_name):String;\r\n \tprivate function get_name():String\r\n\t{\r\n\t\treturn _name;\r\n\t}\r\n\r\n\tprivate function set_name(name:String):String\r\n\t{\r\n\t\treturn _name=name;\r\n\t}\r\n}","package com.github.haxePixiGAF.data;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass GAFDebugInformation\r\n{\r\n\tpublic static inline var TYPE_POINT:Int=0;\r\n\tpublic static inline var TYPE_RECT:Int=1;\r\n\r\n\tpublic var type:Int=0;\r\n\tpublic var point:Point;\r\n\tpublic var rect:Rectangle;\r\n\tpublic var color:Int=0;\r\n\tpublic var alpha:Float;\r\n}","package com.github.haxePixiGAF.data;\r\nimport com.github.haxePixiGAF.data.tagfx.ITAGFX;\r\nimport com.github.haxePixiGAF.data.tagfx.TAGFXBase;\r\nimport com.github.haxePixiGAF.data.textures.TextureWrapper;\r\nimport com.github.haxePixiGAF.utils.DebugUtility;\r\nimport pixi.interaction.EventEmitter;\r\n\r\n/**\r\n * Dispatched when he texture is decoded. It can only be used when the callback has been executed.\r\n */\r\n//[Event(name=\"texturesReady\", type=\"flash.events.Event\")]\r\n\r\n/**\r\n * Graphical data storage that used by<code>GAFTimeline</code>. It contain all created textures and all\r\n * saved images as<code>BitmapData</code>.\r\n * Used as shared graphical data storage between several GAFTimelines if they are used the same texture atlas(bundle created using \"Create bundle\" option)\r\n */\r\n\r\n/**\r\n * TODO vu le système de chargement, les onReady et autre test de chargement ne servent a rien, a simplifier\r\n * @author Mathieu Anthoine\r\n * \r\n */ \r\nclass GAFGFXData extends EventEmitter\r\n{\r\n\tpublic static inline var EVENT_TYPE_TEXTURES_READY:String=\"texturesReady\";\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _texturesDictionary:Map<String,Map<String,Map<String,TextureWrapper>>>= new Map<String,Map<String,Map<String,TextureWrapper>>>();\r\n\tprivate var _taGFXDictionary:Map<String,Map<String,Map<String,ITAGFX>>> = new Map<String,Map<String,Map<String,ITAGFX>>>();\r\n\r\n\tprivate var _textureLoadersSet:Map<ITAGFX,ITAGFX>=new Map<ITAGFX,ITAGFX>();\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new()\r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function addTAGFX(scale:Float, csf:Float, imageID:String, taGFX:ITAGFX):Void\r\n\t{\r\n\t\t\r\n\t\tvar lScale:String = Std.string(scale);\r\n\t\tvar lCsf:String = Std.string(csf);\r\n\t\t\r\n\t\tif (_taGFXDictionary[lScale]==null) _taGFXDictionary[lScale]=new Map<String,Map<String,ITAGFX>>();\r\n\t\tif (_taGFXDictionary[lScale][lCsf]==null) _taGFXDictionary[lScale][lCsf]=new Map<String,ITAGFX>();\r\n\t\tif (_taGFXDictionary[lScale][lCsf][imageID]==null) _taGFXDictionary[lScale][lCsf][imageID]=taGFX;\r\n\t}\r\n\r\n\tpublic function getTAGFXs(scale:Float, csf:Float):Map<String,ITAGFX>\r\n\t{\r\n\t\tvar lScale:String = Std.string(scale);\r\n\t\tvar lCsf:String = Std.string(csf);\r\n\t\t\r\n\t\tif(_taGFXDictionary!=null)\r\n\t\t{\r\n\t\t\tif(_taGFXDictionary[lScale]!=null)\r\n\t\t\t{\r\n\t\t\t\treturn _taGFXDictionary[lScale][lCsf];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic function getTAGFX(scale:Float, csf:Float, imageID:String):ITAGFX\r\n\t{\r\n\t\tvar lScale:String = Std.string(scale);\r\n\t\tvar lCsf:String = Std.string(csf);\r\n\t\t\r\n\t\tif(_taGFXDictionary!=null)\r\n\t\t{\r\n\t\t\tif(_taGFXDictionary[lScale]!=null)\r\n\t\t\t{\r\n\t\t\t\tif(_taGFXDictionary[lScale][lCsf]!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn _taGFXDictionary[lScale][lCsf][imageID];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates textures from all images for specified scale and csf.\r\n\t * @param scale\r\n\t * @param csf\r\n\t * @return {Boolean}\r\n\t * @see #createTexture()\r\n\t */\r\n\tpublic function createTextures(scale:Float, csf:Float):Bool\r\n\t{\r\n\t\tvar taGFXs:Map<String,ITAGFX>=getTAGFXs(scale, csf);\r\n\t\tif(taGFXs!=null)\r\n\t\t{\r\n\t\t\tvar lScale:String = Std.string(scale);\r\n\t\t\tvar lCsf:String = Std.string(csf);\r\n\t\t\tif (_texturesDictionary[lScale]==null) _texturesDictionary[lScale]=new Map<String,Map<String,TextureWrapper>>();\r\n\t\t\tif (_texturesDictionary[lScale][lCsf]==null) _texturesDictionary[lScale][lCsf] =new Map<String,TextureWrapper>();\r\n\r\n\t\t\tfor(imageAtlasID in taGFXs.keys())\r\n\t\t\t{\r\n\t\t\t\tif(taGFXs[imageAtlasID]!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\taddTexture(_texturesDictionary[lScale][lCsf], taGFXs[imageAtlasID], imageAtlasID);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates texture from specified image.\r\n\t * @param scale\r\n\t * @param csf\r\n\t * @param imageID\r\n\t * @return {Boolean}\r\n\t * @see #createTextures()\r\n\t */\r\n\tpublic function createTexture(scale:Float, csf:Float, imageID:String):Bool\r\n\t{\r\n\t\tvar taGFX:ITAGFX=getTAGFX(scale, csf, imageID);\r\n\t\tif(taGFX!=null)\r\n\t\t{\r\n\t\t\tvar lScale:String = Std.string(scale);\r\n\t\t\tvar lCsf:String = Std.string(csf);\r\n\t\t\tif (_texturesDictionary[lScale]==null) _texturesDictionary[lScale]=new Map<String,Map<String,TextureWrapper>>();\r\n\t\t\tif (_texturesDictionary[lScale][lCsf]==null) _texturesDictionary[lScale][lCsf] =new Map<String,TextureWrapper>();\r\n\r\n\t\t\taddTexture(_texturesDictionary[lScale][lCsf], taGFX, imageID);\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns texture by unique key consist of scale + csf + imageID\r\n\t */\r\n\tpublic function getTexture(scale:Float, csf:Float, imageID:String):TextureWrapper\r\n\t{\r\n\t\tvar lScale:String = Std.string(scale);\r\n\t\tvar lCsf:String = Std.string(csf);\r\n\t\tif(_texturesDictionary!=null)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tif(_texturesDictionary[lScale]!=null)\r\n\t\t\t{\r\n\t\t\t\t\r\n\t\t\t\tif(_texturesDictionary[lScale][lCsf]!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(_texturesDictionary[lScale][lCsf][imageID]!=null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn _texturesDictionary[lScale][lCsf][imageID];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// in case when there is no texture created\r\n\t\t// create texture and check if it successfully created\r\n\t\tif(createTexture(scale, csf, imageID))\r\n\t\t{\r\n\t\t\treturn _texturesDictionary[lScale][lCsf][imageID];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns textures for specified scale and csf in Dynamic as combination key-value where key - is imageID and value - is Texture\r\n\t */\r\n\tpublic function getTextures(scale:Float, csf:Float):Map<String,TextureWrapper>\r\n\t{\r\n\t\t\r\n\t\tvar lScale:String = Std.string(scale);\r\n\t\tvar lCsf:String = Std.string(csf);\r\n\t\tif(_texturesDictionary!=null)\r\n\t\t{\r\n\t\t\tif(_texturesDictionary[lScale]!=null)\r\n\t\t\t{\r\n\t\t\t\treturn _texturesDictionary[lScale][lCsf];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Dispose specified texture or textures for specified combination scale and csf. If nothing was specified - dispose all texturea\r\n\t */\r\n\tpublic function disposeTextures(?scale:Float, ?csf:Float, imageID:String=null):Void\r\n\t{\r\n\t\ttrace (\"disposeTextures: TODO\");\r\n\t\t\r\n\t\t//if(Math.isNaN(scale))\r\n\t\t//{\r\n\t\t\t//for(scaleToDispose in _texturesDictionary)\r\n\t\t\t//{\r\n\t\t\t\t//disposeTextures(Std.parseFloat(scaleToDispose));\r\n\t\t\t//}\r\n//\r\n\t\t\t//_texturesDictionary=null;\r\n\t\t//}\r\n\t\t//else\r\n\t\t//{\r\n\t\t\t//if(Math.isNaN(csf))\r\n\t\t\t//{\r\n\t\t\t\t//for(csfToDispose in _texturesDictionary[scale])\r\n\t\t\t\t//{\r\n\t\t\t\t\t//disposeTextures(scale, Std.parseFloat(csfToDispose));\r\n\t\t\t\t//}\r\n//\r\n\t\t\t\t//_texturesDictionary.remove(scale);\r\n\t\t\t//}\r\n\t\t\t//else\r\n\t\t\t//{\r\n\t\t\t\t//if(imageID)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//cast(_texturesDictionary[scale][csf][imageID],TempTexture).destroy();\r\n//\r\n\t\t\t\t\t//_texturesDictionary[scale][csf].remove(imageID);\r\n\t\t\t\t//}\r\n\t\t\t\t//else\r\n\t\t\t\t//{\r\n\t\t\t\t\t//if(_texturesDictionary[scale] && _texturesDictionary[scale][csf])\r\n\t\t\t\t\t//{\r\n\t\t\t\t\t\t//for(atlasIDToDispose in _texturesDictionary[scale][csf])\r\n\t\t\t\t\t\t//{\r\n\t\t\t\t\t\t\t//disposeTextures(scale, csf, atlasIDToDispose);\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t\t//_texturesDictionary[scale].remove(csf);\r\n\t\t\t\t\t//}\r\n\t\t\t\t//}\r\n\t\t\t//}\r\n\t\t//}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function addTexture(dictionary:Map<String,TextureWrapper>, tagfx:ITAGFX, imageID:String):Void\r\n\t{\r\n\t\t\r\n\t\tif(DebugUtility.RENDERING_DEBUG)\r\n\t\t{\r\n\t\t\t//var bitmapData:BitmapData;\r\n\t\t\t//if(tagfx.sourceType==TAGFXBase.SOURCE_TYPE_BITMAP_DATA)\r\n\t\t\t//{\r\n\t\t\t\t//bitmapData=setGrayScale(tagfx.source.clone());\r\n\t\t\t//}\r\n//\r\n\t\t\t//if(bitmapData)\r\n\t\t\t//{\r\n\t\t\t\t//dictionary[imageID]=Texture.fromBitmapData(bitmapData, GAF.useMipMaps, false, tagfx.textureScale, tagfx.textureFormat);\r\n\t\t\t//}\r\n\t\t\t//else\r\n\t\t\t//{\r\n\t\t\t\tif(tagfx.texture!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\t//dictionary[imageID]=Texture.fromTexture(tagfx.texture);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow \"GAFGFXData texture for rendering not found!\";\r\n\t\t\t\t}\r\n\t\t\t//}\r\n\t\t}\r\n\t\telse if(dictionary[imageID]==null)\r\n\t\t{\r\n\t\t\tif(!tagfx.ready)\r\n\t\t\t{\r\n\t\t\t\t_textureLoadersSet[tagfx] = tagfx;\r\n\t\t\t\ttagfx.on(TAGFXBase.EVENT_TYPE_TEXTURE_READY, onTextureReady);\r\n\t\t\t}\r\n\r\n\t\t\tdictionary[imageID] = TextureWrapper.fromTexture(tagfx.texture);\r\n\t\t\t//dictionary[imageID] = cast Texture.fromImage(tagfx.texture.baseTexture.imageUrl);\r\n\t\t}\r\n\t}\r\n\r\n\t//private function setGrayScale(image:BitmapData):BitmapData\r\n\t//{\r\n\t\t//var matrix:Array<Dynamic>=[\r\n\t\t\t//0.26231, 0.51799, 0.0697, 0, 81.775,\r\n\t\t\t//0.26231, 0.51799, 0.0697, 0, 81.775,\r\n\t\t\t//0.26231, 0.51799, 0.0697, 0, 81.775,\r\n\t\t\t//0, 0, 0, 1, 0];\r\n//\r\n\t\t//var filter:ColorMatrixFilter=new ColorMatrixFilter(matrix);\r\n\t\t//image.applyFilter(image, new Rectangle(0, 0, image.width, image.height), new Point(0, 0), filter);\r\n//\r\n\t\t//return image;\r\n\t//}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\tprivate function onTextureReady(event:Dynamic):Void\r\n\t{\r\n\t\tvar tagfx:ITAGFX=cast (event.target,ITAGFX);\r\n\t\ttagfx.off(TAGFXBase.EVENT_TYPE_TEXTURE_READY, onTextureReady);\r\n\r\n\t\t_textureLoadersSet.remove(tagfx);\r\n\r\n\t\tif(isTexturesReady)\r\n\t\t\temit(EVENT_TYPE_TEXTURES_READY);\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var isTexturesReady(get_isTexturesReady, null):Bool;\r\n \tprivate function get_isTexturesReady():Bool\r\n\t{\r\n\t\tvar empty:Bool=true;\r\n\t\tfor(tagfx in _textureLoadersSet)\r\n\t\t{\r\n\t\t\tempty=false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\ttrace (\"isTexturesReady\",empty);\r\n\r\n\t\treturn empty;\r\n\t}\r\n}","package com.github.haxePixiGAF.data;\r\n\r\nimport com.github.haxePixiGAF.data.config.CAnimationObject;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlas;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasCSF;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasScale;\r\nimport com.github.haxePixiGAF.data.converters.ErrorConstants;\r\nimport com.github.haxePixiGAF.data.textures.TextureWrapper;\r\nimport com.github.haxePixiGAF.display.IGAFTexture;\r\nimport com.github.haxePixiGAF.sound.GAFSoundData;\r\n\r\n\r\n/**\r\n *<p>GAFTimeline represents converted GAF file. It is like a library symbol in Flash IDE that contains all information about GAF animation.\r\n * It is used to create<code>GAFMovieClip</code>that is ready animation object to be used in starling display list</p>\r\n */\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFTimeline\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic static inline var CONTENT_ALL:String=\"contentAll\";\r\n\tpublic static inline var CONTENT_DEFAULT:String=\"contentDefault\";\r\n\tpublic static inline var CONTENT_SPECIFY:String=\"contentSpecify\";\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _config:GAFTimelineConfig;\r\n\r\n\tprivate var _gafSoundData:GAFSoundData;\r\n\t\r\n\tprivate var _gafgfxData:GAFGFXData;\r\n\tprivate var _gafAsset:GAFAsset;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Creates an GAFTimeline object\r\n\t * @param timelineConfig GAF timeline config\r\n\t */\r\n\tpublic function new(timelineConfig:GAFTimelineConfig)\r\n\t{\r\n\t\t_config=timelineConfig;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Returns GAF Texture by name of an instance inside a timeline.\r\n\t * @param animationObjectName name of an instance inside a timeline\r\n\t * @return GAF Texture\r\n\t */\r\n\tpublic function getTextureByName(animationObjectName:String):IGAFTexture\r\n\t{\r\n\t\tvar instanceID:String=_config.getNamedPartID(animationObjectName);\r\n\t\tif(instanceID!=null)\r\n\t\t{\r\n\t\t\tvar part:CAnimationObject=_config.animationObjects.getAnimationObject(instanceID);\r\n\t\t\tif(part!=null)\r\n\t\t\t{\r\n\t\t\t\treturn textureAtlas.getTexture(part.regionID);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes the underlying GAF timeline config\r\n\t */\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\t_config.dispose();\r\n\t\t_config=null;\r\n\t\t_gafAsset=null;\r\n\t\t_gafgfxData=null;\r\n\t\t_gafSoundData=null;\r\n\t}\r\n\r\n\t/**\r\n\t * Load all graphical data connected with this asset in device GPU memory. Used in case of manual control of GPU memory usage.\r\n\t * Works only in case when all graphical data stored in RAM.\r\n\t *\r\n\t * @param content content type that should be loaded. Available types:<code>CONTENT_ALL, CONTENT_DEFAULT, CONTENT_SPECIFY</code>\r\n\t * @param scale in case when specified content is<code>CONTENT_SPECIFY</code>scale and csf should be set in required values\r\n\t * @param csf in case when specified content is<code>CONTENT_SPECIFY</code>scale and csf should be set in required values\r\n\t */\r\n\tpublic function loadInVideoMemory(content:String=\"contentDefault\", ?pScale:Float, ?csf:Float):Void\r\n\t{\r\n\r\n\t\tif(_config.textureAtlas==null || _config.textureAtlas.contentScaleFactor.elements==null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar textures:Map<String,TextureWrapper>;\r\n\t\tvar csfConfig:CTextureAtlasCSF;\r\n\r\n\t\tswitch(content)\r\n\t\t{\r\n\t\t\tcase CONTENT_ALL:\r\n\t\t\t\tfor(scaleConfig in _config.allTextureAtlases)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(csfConfig in scaleConfig.allContentScaleFactors)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_gafgfxData.createTextures(scaleConfig.scale, csfConfig.csf);\r\n\r\n\t\t\t\t\t\ttextures=_gafgfxData.getTextures(scaleConfig.scale, csfConfig.csf);\r\n\t\t\t\t\t\tif(csfConfig.atlas==null && textures!=null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcsfConfig.atlas=CTextureAtlas.createFromTextures(textures, csfConfig);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\r\n\t\t\tcase CONTENT_DEFAULT:\r\n\t\t\t\tcsfConfig=_config.textureAtlas.contentScaleFactor;\r\n\r\n\t\t\t\tif(csfConfig==null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tif(csfConfig.atlas==null && _gafgfxData.createTextures(scale, contentScaleFactor))\r\n\t\t\t\t{\r\n\t\t\t\t\tcsfConfig.atlas = CTextureAtlas.createFromTextures(_gafgfxData.getTextures(scale, contentScaleFactor), csfConfig);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\tcase CONTENT_SPECIFY:\r\n\t\t\t\tcsfConfig=getCSFConfig(pScale, csf);\r\n\r\n\t\t\t\tif(csfConfig==null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(csfConfig.atlas==null && _gafgfxData.createTextures(pScale, csf))\r\n\t\t\t\t{\r\n\t\t\t\t\tcsfConfig.atlas=CTextureAtlas.createFromTextures(_gafgfxData.getTextures(pScale, csf), csfConfig);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Unload all all graphical data connected with this asset from device GPU memory. Used in case of manual control of video memory usage\r\n\t *\r\n\t * @param content content type that should be loaded(CONTENT_ALL, CONTENT_DEFAULT, CONTENT_SPECIFY)\r\n\t * @param scale in case when specified content is CONTENT_SPECIFY scale and csf should be set in required values\r\n\t * @param csf in case when specified content is CONTENT_SPECIFY scale and csf should be set in required values\r\n\t */\r\n\tpublic function unloadFromVideoMemory(content:String=\"contentDefault\", ?pScale:Float, ?csf:Float):Void\r\n\t{\r\n\t\tif(_config.textureAtlas==null || _config.textureAtlas.contentScaleFactor.elements==null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar csfConfig:CTextureAtlasCSF;\r\n\r\n\t\tswitch(content)\r\n\t\t{\r\n\t\t\tcase CONTENT_ALL:\r\n\t\t\t\t_gafgfxData.disposeTextures();\r\n\t\t\t\t_config.dispose();\r\n\t\t\t\treturn;\r\n\t\t\tcase CONTENT_DEFAULT:\r\n\t\t\t\t_gafgfxData.disposeTextures(pScale, contentScaleFactor);\r\n\t\t\t\t_config.textureAtlas.contentScaleFactor.dispose();\r\n\t\t\t\treturn;\r\n\t\t\tcase CONTENT_SPECIFY:\r\n\t\t\t\tcsfConfig=getCSFConfig(pScale, csf);\r\n\t\t\t\tif(csfConfig!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\t_gafgfxData.disposeTextures(pScale, csf);\r\n\t\t\t\t\tcsfConfig.dispose();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function startSound(frame:Int):Void\r\n\t{\r\n\t\t//var frameSoundConfig:CFrameSound=_config.getSound(frame);\r\n\t\t//if(frameSoundConfig)\r\n\t\t//{\r\n\t\t\t//if(frameSoundConfig.action==CFrameSound.ACTION_STOP)\r\n\t\t\t//{\r\n\t\t\t\t//GAFSoundManager.getInstance().stop(frameSoundConfig.soundID, _config.assetID);\r\n\t\t\t//}\r\n\t\t\t//else\r\n\t\t\t//{\r\n\t\t\t\t//var sound:Sound;\r\n\t\t\t\t//if(frameSoundConfig.linkage)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//sound=gafSoundData.getSoundByLinkage(frameSoundConfig.linkage);\r\n\t\t\t\t//}\r\n\t\t\t\t//else\r\n\t\t\t\t//{\r\n\t\t\t\t\t//sound=gafSoundData.getSound(frameSoundConfig.soundID, _config.assetID);\r\n\t\t\t\t//}\r\n\t\t\t\t//var soundOptions:Dynamic={};\r\n\t\t\t\t//soundOptions[\"continue\"]=frameSoundConfig.action==CFrameSound.ACTION_CONTINUE;\r\n\t\t\t\t//soundOptions[\"repeatCount\"]=frameSoundConfig.repeatCount;\r\n\t\t\t\t//GAFSoundManager.getInstance().play(sound, frameSoundConfig.soundID, soundOptions, _config.assetID);\r\n\t\t\t//}\r\n\t\t//}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function getCSFConfig(scale:Float, csf:Float):CTextureAtlasCSF\r\n\t{\r\n\t\tvar scaleConfig:CTextureAtlasScale=_config.getTextureAtlasForScale(scale);\r\n\r\n\t\tif(scaleConfig!=null)\r\n\t\t{\r\n\t\t\tvar csfConfig:CTextureAtlasCSF=scaleConfig.getTextureAtlasForCSF(csf);\r\n\t\t\t\r\n\t\t\tif(csfConfig!=null)\r\n\t\t\t{\r\n\t\t\t\treturn csfConfig;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Timeline identifier(name given at animation's upload or assigned by developer)\r\n\t */\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn config.id;\r\n\t}\r\n\r\n\t/**\r\n\t * Timeline linkage in a *.fla file library\r\n\t */\r\n\tpublic var linkage(get_linkage, null):String;\r\n \tprivate function get_linkage():String\r\n\t{\r\n\t\treturn config.linkage;\r\n\t}\r\n\r\n\t/**\r\n\t * Asset identifier(name given at animation's upload or assigned by developer)\r\n\t */\r\n\tpublic var assetID(get_assetID, null):String;\r\n \tprivate function get_assetID():String\r\n\t{\r\n\t\treturn config.assetID;\r\n\t}\r\n\r\n\tpublic var textureAtlas(get_textureAtlas, null):CTextureAtlas;\r\n \tprivate function get_textureAtlas():CTextureAtlas\r\n\t{\r\n\t\t\r\n\t\tif(_config.textureAtlas==null)\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif(_config.textureAtlas.contentScaleFactor.atlas==null)\r\n\t\t{\r\n\t\t\tloadInVideoMemory(CONTENT_DEFAULT);\r\n\t\t}\r\n\t\t\r\n\t\treturn _config.textureAtlas.contentScaleFactor.atlas;\r\n\t}\r\n\r\n\tpublic var config(get_config, null):GAFTimelineConfig;\r\n \tprivate function get_config():GAFTimelineConfig\r\n\t{\r\n\t\treturn _config;\r\n\t}\r\n\r\n\t////////////////////////////////////////////////////////////////////////////\r\n\r\n\t/**\r\n\t * Texture atlas scale that will be used for<code>GAFMovieClip</code>creation. To create<code>GAFMovieClip's</code>\r\n\t * with different scale assign appropriate scale to<code>GAFTimeline</code>and only after that instantiate<code>GAFMovieClip</code>.\r\n\t * Possible values are values from converted animation config. They are depends from project settings on site converter\r\n\t */\r\n\tprivate function set_scale(value:Float):Float\r\n\t{\r\n\t\tvar scale:Float=_gafAsset.getValidScale(value);\r\n\t\tif(Math.isNaN(scale))\r\n\t\t{\r\n\t\t\tthrow ErrorConstants.SCALE_NOT_FOUND;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t_gafAsset.scale=scale;\r\n\t\t}\r\n\r\n\t\tif(_config.textureAtlas==null)\r\n\t\t{\r\n\t\t\t//return;\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar csf:Float=contentScaleFactor;\r\n\t\tvar taScale:CTextureAtlasScale=_config.getTextureAtlasForScale(scale);\r\n\t\tif(taScale!=null)\r\n\t\t{\r\n\t\t\t_config.textureAtlas=taScale;\r\n\r\n\t\t\tvar taCSF:CTextureAtlasCSF=_config.textureAtlas.getTextureAtlasForCSF(csf);\r\n\r\n\t\t\tif(taCSF!=null)\r\n\t\t\t{\r\n\t\t\t\t_config.textureAtlas.contentScaleFactor=taCSF;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthrow \"There is no csf \" + csf + \"in timeline config for scalse \" + scale;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow \"There is no scale \" + scale + \"in timeline config\";\r\n\t\t}\r\n\t\t\r\n\t\treturn _gafAsset.scale;\r\n\t}\r\n\r\n\tpublic var scale(get_scale, set_scale):Float;\r\n \tprivate function get_scale():Float\r\n\t{\r\n\t\treturn _gafAsset.scale;\r\n\t}\r\n\r\n\t/**\r\n\t * Texture atlas content scale factor(csf)that will be used for<code>GAFMovieClip</code>creation. To create<code>GAFMovieClip's</code>\r\n\t * with different csf assign appropriate csf to<code>GAFTimeline</code>and only after that instantiate<code>GAFMovieClip</code>.\r\n\t * Possible values are values from converted animation config. They are depends from project settings on site converter\r\n\t */\r\n\tprivate function set_contentScaleFactor(csf:Float):Void\r\n\t{\r\n\t\tif(_gafAsset.hasCSF(csf))\r\n\t\t{\r\n\t\t\t_gafAsset.csf=csf;\r\n\t\t}\r\n\r\n\t\tif(_config.textureAtlas==null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar taCSF:CTextureAtlasCSF=_config.textureAtlas.getTextureAtlasForCSF(csf);\r\n\r\n\t\tif(taCSF!=null)\r\n\t\t{\r\n\t\t\t_config.textureAtlas.contentScaleFactor=taCSF;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow \"There is no csf \" + csf + \"in timeline config\";\r\n\t\t}\r\n\t}\r\n\r\n\tpublic var contentScaleFactor(get_contentScaleFactor, null):Float;\r\n \tprivate function get_contentScaleFactor():Float\r\n\t{\r\n\t\treturn _gafAsset.csf;\r\n\t}\r\n\r\n\t/**\r\n\t * Graphical data storage that used by<code>GAFTimeline</code>.\r\n\t */\r\n\tprivate function set_gafgfxData(gafgfxData:GAFGFXData):GAFGFXData\r\n\t{\r\n\t\treturn _gafgfxData=gafgfxData;\r\n\t}\r\n\r\n\tpublic var gafgfxData(get_gafgfxData, set_gafgfxData):GAFGFXData;\r\n \tprivate function get_gafgfxData():GAFGFXData\r\n\t{\r\n\t\treturn _gafgfxData;\r\n\t}\r\n\r\n\tpublic var gafAsset(get_gafAsset, set_gafAsset):GAFAsset;\r\n \tprivate function get_gafAsset():GAFAsset\r\n\t{\r\n\t\treturn _gafAsset;\r\n\t}\r\n\r\n\tprivate function set_gafAsset(asset:GAFAsset):GAFAsset\r\n\t{\r\n\t\treturn _gafAsset=asset;\r\n\t}\r\n\r\n\tpublic var gafSoundData(get_gafSoundData, set_gafSoundData):GAFSoundData;\r\n \tprivate function get_gafSoundData():GAFSoundData\r\n\t{\r\n\t\treturn _gafSoundData;\r\n\t}\r\n\r\n\tprivate function set_gafSoundData(gafSoundData:GAFSoundData):GAFSoundData\r\n\t{\r\n\t\treturn _gafSoundData=gafSoundData;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n}","package com.github.haxePixiGAF.data;\r\n\r\nimport com.github.haxePixiGAF.data.config.CAnimationFrames;\r\nimport com.github.haxePixiGAF.data.config.CAnimationObjects;\r\nimport com.github.haxePixiGAF.data.config.CAnimationSequences;\r\nimport com.github.haxePixiGAF.data.config.CStage;\r\nimport com.github.haxePixiGAF.data.config.CTextFieldObjects;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasScale;\r\nimport com.github.haxePixiGAF.utils.MathUtility;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFTimelineConfig\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\tprivate var _version:String;\r\n\tprivate var _stageConfig:CStage;\r\n\r\n\tprivate var _id:String;\r\n\tprivate var _assetID:String;\r\n\r\n\tprivate var _allTextureAtlases:Array<CTextureAtlasScale>;\r\n\tprivate var _textureAtlas:CTextureAtlasScale;\r\n\r\n\tprivate var _animationConfigFrames:CAnimationFrames;\r\n\tprivate var _animationObjects:CAnimationObjects;\r\n\tprivate var _animationSequences:CAnimationSequences;\r\n\tprivate var _textFields:CTextFieldObjects;\r\n\r\n\tprivate var _namedParts:Map<String,String>;\r\n\tprivate var _linkage:String;\r\n\r\n\tprivate var _debugRegions:Array<GAFDebugInformation>;\r\n\r\n\tprivate var _warnings:Array<String>;\r\n\tprivate var _framesCount:Int=0;\r\n\tprivate var _bounds:Rectangle;\r\n\tprivate var _pivot:Point;\r\n\t//private var _sounds:Dictionary;\r\n\tprivate var _disposed:Bool=false;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(version:String)\r\n\t{\r\n\t\t_version=version;\r\n\r\n\t\t_animationConfigFrames=new CAnimationFrames();\r\n\t\t_animationObjects=new CAnimationObjects();\r\n\t\t_animationSequences=new CAnimationSequences();\r\n\t\t_textFields=new CTextFieldObjects();\r\n\t\t//_sounds=new Dictionary();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\tfor(cTextureAtlasScale in _allTextureAtlases)\r\n\t\t{\r\n\t\t\tcTextureAtlasScale.dispose();\r\n\t\t}\r\n\t\t_allTextureAtlases=null;\r\n\r\n\t\t_animationConfigFrames=null;\r\n\t\t_animationSequences=null;\r\n\t\t_animationObjects=null;\r\n\t\t_textureAtlas=null;\r\n\t\t_textFields=null;\r\n\t\t_namedParts=null;\r\n\t\t_warnings=null;\r\n\t\t_bounds=null;\r\n\t\t//_sounds=null;\r\n\t\t_pivot=null;\r\n\t\t\r\n\t\t_disposed=true;\r\n\t}\r\n\r\n\tpublic function getTextureAtlasForScale(scale:Float):CTextureAtlasScale\r\n\t{\r\n\t\tfor(cTextureAtlas in _allTextureAtlases)\r\n\t\t{\r\n\t\t\tif(MathUtility.equals(cTextureAtlas.scale, scale))\r\n\t\t\t{\r\n\t\t\t\treturn cTextureAtlas;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//public function addSound(data:Dynamic, frame:Int):Void\r\n\t//{\r\n\t\t//_sounds[frame]=new CFrameSound(data);\r\n\t//}\r\n//\r\n\t//public function getSound(frame:Int):CFrameSound\r\n\t//{\r\n\t\t//return _sounds[frame];\r\n\t//}\r\n\r\n\tpublic function addWarning(text:String):Void\r\n\t{\r\n\t\tif(text==null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(_warnings==null)\r\n\t\t{\r\n\t\t\t_warnings=new Array<String>();\r\n\t\t}\r\n\r\n\t\tif(_warnings.indexOf(text)==-1)\r\n\t\t{\r\n\t\t\ttrace(text);\r\n\t\t\t_warnings.push(text);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function getNamedPartID(name:String):String\r\n\t{\r\n\t\tfor(id in _namedParts)\r\n\t\t{\r\n\t\t\tif(_namedParts[id]==name)\r\n\t\t\t{\r\n\t\t\t\treturn id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var textureAtlas(get_textureAtlas, set_textureAtlas):CTextureAtlasScale;\r\n \tprivate function get_textureAtlas():CTextureAtlasScale\r\n\t{\r\n\t\treturn _textureAtlas;\r\n\t}\r\n\r\n\tprivate function set_textureAtlas(textureAtlas:CTextureAtlasScale):CTextureAtlasScale\r\n\t{\r\n\t\treturn _textureAtlas=textureAtlas;\r\n\t}\r\n\r\n\tpublic var animationObjects(get_animationObjects, set_animationObjects):CAnimationObjects;\r\n \tprivate function get_animationObjects():CAnimationObjects\r\n\t{\r\n\t\treturn _animationObjects;\r\n\t}\r\n\r\n\tprivate function set_animationObjects(animationObjects:CAnimationObjects):CAnimationObjects\r\n\t{\r\n\t\treturn _animationObjects=animationObjects;\r\n\t}\r\n\r\n\tpublic var animationConfigFrames(get_animationConfigFrames, set_animationConfigFrames):CAnimationFrames;\r\n \tprivate function get_animationConfigFrames():CAnimationFrames\r\n\t{\r\n\t\treturn _animationConfigFrames;\r\n\t}\r\n\r\n\tprivate function set_animationConfigFrames(animationConfigFrames:CAnimationFrames):CAnimationFrames\r\n\t{\r\n\t\treturn _animationConfigFrames=animationConfigFrames;\r\n\t}\r\n\r\n\tpublic var animationSequences(get_animationSequences, set_animationSequences):CAnimationSequences;\r\n \tprivate function get_animationSequences():CAnimationSequences\r\n\t{\r\n\t\treturn _animationSequences;\r\n\t}\r\n\r\n\tprivate function set_animationSequences(animationSequences:CAnimationSequences):CAnimationSequences\r\n\t{\r\n\t\treturn _animationSequences=animationSequences;\r\n\t}\r\n\r\n\tpublic var textFields(get_textFields, set_textFields):CTextFieldObjects;\r\n \tprivate function get_textFields():CTextFieldObjects\r\n\t{\r\n\t\treturn _textFields;\r\n\t}\r\n\r\n\tprivate function set_textFields(textFields:CTextFieldObjects):CTextFieldObjects\r\n\t{\r\n\t\treturn _textFields=textFields;\r\n\t}\r\n\r\n\tpublic var allTextureAtlases(get_allTextureAtlases, set_allTextureAtlases):Array<CTextureAtlasScale>;\r\n \tprivate function get_allTextureAtlases():Array<CTextureAtlasScale>\r\n\t{\r\n\t\treturn _allTextureAtlases;\r\n\t}\r\n\r\n\tprivate function set_allTextureAtlases(allTextureAtlases:Array<CTextureAtlasScale>):Array<CTextureAtlasScale>\r\n\t{\r\n\t\treturn _allTextureAtlases=allTextureAtlases;\r\n\t}\r\n\r\n\tpublic var version(get_version, null):String;\r\n \tprivate function get_version():String\r\n\t{\r\n\t\treturn _version;\r\n\t}\r\n\r\n\tpublic var debugRegions(get_debugRegions, set_debugRegions):Array<GAFDebugInformation>;\r\n \tprivate function get_debugRegions():Array<GAFDebugInformation>\r\n\t{\r\n\t\treturn _debugRegions;\r\n\t}\r\n\r\n\tprivate function set_debugRegions(debugRegions:Array<GAFDebugInformation>):Array<GAFDebugInformation>\r\n\t{\r\n\t\treturn _debugRegions=debugRegions;\r\n\t}\r\n\r\n\tpublic var warnings(get_warnings, null):Array<String>;\r\n \tprivate function get_warnings():Array<String>\r\n\t{\r\n\t\treturn _warnings;\r\n\t}\r\n\r\n\tpublic var id(get_id, set_id):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\tprivate function set_id(value:String):String\r\n\t{\r\n\t\treturn _id=value;\r\n\t}\r\n\r\n\tpublic var assetID(get_assetID, set_assetID):String;\r\n \tprivate function get_assetID():String\r\n\t{\r\n\t\treturn _assetID;\r\n\t}\r\n\r\n\tprivate function set_assetID(value:String):String\r\n\t{\r\n\t\treturn _assetID=value;\r\n\t}\r\n\r\n\tpublic var namedParts(get_namedParts, set_namedParts):Map<String,String>;\r\n \tprivate function get_namedParts():Map<String,String>\r\n\t{\r\n\t\treturn _namedParts;\r\n\t}\r\n\r\n\tprivate function set_namedParts(value:Map<String,String>):Map<String,String>\r\n\t{\r\n\t\treturn _namedParts=value;\r\n\t}\r\n\r\n\tpublic var linkage(get_linkage, set_linkage):String;\r\n \tprivate function get_linkage():String\r\n\t{\r\n\t\treturn _linkage;\r\n\t}\r\n\r\n\tprivate function set_linkage(value:String):String\r\n\t{\r\n\t\treturn _linkage=value;\r\n\t}\r\n\r\n\tpublic var stageConfig(get_stageConfig, set_stageConfig):CStage;\r\n \tprivate function get_stageConfig():CStage\r\n\t{\r\n\t\treturn _stageConfig;\r\n\t}\r\n\r\n\tprivate function set_stageConfig(stageConfig:CStage):CStage\r\n\t{\r\n\t\treturn _stageConfig=stageConfig;\r\n\t}\r\n\r\n\tpublic var framesCount(get_framesCount, set_framesCount):Int;\r\n \tprivate function get_framesCount():Int\r\n\t{\r\n\t\treturn _framesCount;\r\n\t}\r\n\r\n\tprivate function set_framesCount(value:Int):Int\r\n\t{\r\n\t\treturn _framesCount=value;\r\n\t}\r\n\r\n\tpublic var bounds(get_bounds, set_bounds):Rectangle;\r\n \tprivate function get_bounds():Rectangle\r\n\t{\r\n\t\treturn _bounds;\r\n\t}\r\n\r\n\tprivate function set_bounds(value:Rectangle):Rectangle\r\n\t{\r\n\t\treturn _bounds=value;\r\n\t}\r\n\r\n\tpublic var pivot(get_pivot, set_pivot):Point;\r\n \tprivate function get_pivot():Point\r\n\t{\r\n\t\treturn _pivot;\r\n\t}\r\n\r\n\tprivate function set_pivot(value:Point):Point\r\n\t{\r\n\t\treturn _pivot=value;\r\n\t}\r\n\r\n\tpublic var disposed(get_disposed, null):Bool;\r\n \tprivate function get_disposed():Bool {\r\n\t\treturn _disposed;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CAnimationFrame\r\n{\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// PUBLIC VARIABLES\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// PRIVATE VARIABLES\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tprivate var _instancesDictionary:Map<String,CAnimationFrameInstance>;\r\n\tprivate var _instances:Array<CAnimationFrameInstance>;\r\n\tprivate var _actions:Array<CFrameAction>;\r\n\r\n\tprivate var _frameNumber:Int=0;\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// CONSTRUCTOR\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tpublic function new(frameNumber:Int)\r\n\t{\r\n\t\t_frameNumber=frameNumber;\r\n\r\n\t\t_instancesDictionary=new Map<String,CAnimationFrameInstance>();\r\n\t\t_instances=new Array<CAnimationFrameInstance>();\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// PUBLIC METHODS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tpublic function clone(frameNumber:Int):CAnimationFrame\r\n\t{\r\n\t\tvar result:CAnimationFrame=new CAnimationFrame(frameNumber);\r\n\r\n\t\tfor(instance in _instances)\r\n\t\t{\r\n\t\t\tresult.addInstance(instance);\r\n\t\t\t// .clone());\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic function addInstance(instance:CAnimationFrameInstance):Void\r\n\t{\r\n\t\tif(_instancesDictionary[instance.id]!=null)\r\n\t\t{\r\n\t\t\tif(instance.alpha!=null)\r\n\t\t\t{\r\n\t\t\t\t_instances[_instances.indexOf(_instancesDictionary[instance.id])]=instance;\r\n\r\n\t\t\t\t_instancesDictionary[instance.id]=instance;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// Poping the last element and set it as the removed element\r\n\t\t\t\tvar index:Int=_instances.indexOf(_instancesDictionary[instance.id]);\r\n\t\t\t\t// If index is last element, just pop\r\n\t\t\t\tif(index==(_instances.length - 1))\r\n\t\t\t\t{\r\n\t\t\t\t\t_instances.pop();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t_instances[index]=_instances.pop();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_instancesDictionary.remove(instance.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t_instances.push(instance);\r\n\r\n\t\t\t_instancesDictionary[instance.id]=instance;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function addAction(action:CFrameAction):Void\r\n\t{\r\n\t\tif (_actions==null) _actions =new Array<CFrameAction>();\r\n\t\t_actions.push(action);\r\n\t}\r\n\r\n\tpublic function sortInstances():Void\r\n\t{\r\n\t\t_instances.sort(sortByZIndex);\r\n\t}\r\n\r\n\tpublic function getInstanceByID(id:String):CAnimationFrameInstance\r\n\t{\r\n\t\treturn _instancesDictionary[id];\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// PRIVATE METHODS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tprivate function sortByZIndex(instance1:CAnimationFrameInstance, instance2:CAnimationFrameInstance):Int\r\n\t{\r\n\t\tif(instance1.zIndex<instance2.zIndex)\r\n\t\t{\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\telse if(instance1.zIndex>instance2.zIndex)\r\n\t\t{\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// EVENT HANDLERS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// GETTERS AND SETTERS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tpublic var instances(get_instances, null):Array<CAnimationFrameInstance>;\r\n \tprivate function get_instances():Array<CAnimationFrameInstance>\r\n\t{\r\n\t\treturn _instances;\r\n\t}\r\n\r\n\tpublic var frameNumber(get_frameNumber, null):Int;\r\n \tprivate function get_frameNumber():Int\r\n\t{\r\n\t\treturn _frameNumber;\r\n\t}\r\n\tpublic var actions(get_actions, null):Array<CFrameAction>;\r\n \tprivate function get_actions():Array<CFrameAction>\r\n\t{\r\n\t\treturn _actions;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\nimport pixi.core.math.Matrix;\r\n\r\nusing com.github.haxePixiGAF.utils.MatrixUtility;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CAnimationFrameInstance\r\n{\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// PUBLIC VARIABLES\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// PRIVATE VARIABLES\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tprivate var _id:String;\r\n\tprivate var _zIndex:Int=0;\r\n\tprivate var _matrix:Matrix;\r\n\tprivate var _alpha:Float;\r\n\tprivate var _maskID:String;\r\n\tprivate var _filter:CFilter;\r\n\r\n\tprivate static var tx:Float;\r\n\tprivate static var ty:Float;\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// CONSTRUCTOR\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tpublic function new(id:String)\r\n\t{\r\n\t\t_id=id;\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// PUBLIC METHODS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tpublic function clone():CAnimationFrameInstance\r\n\t{\r\n\t\tvar result:CAnimationFrameInstance=new CAnimationFrameInstance(_id);\r\n\r\n\t\tvar filterCopy:CFilter=null;\r\n\r\n\t\tif(_filter!=null)\r\n\t\t{\r\n\t\t\tfilterCopy=_filter.clone();\r\n\t\t}\r\n\r\n\t\tresult.update(_zIndex, _matrix.clone(), _alpha, _maskID, filterCopy);\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic function update(zIndex:Int, matrix:Matrix, alpha:Float, maskID:String, filter:CFilter):Void\r\n\t{\r\n\t\t_zIndex=zIndex;\r\n\t\t_matrix=matrix;\r\n\t\t_alpha=alpha;\r\n\t\t_maskID=maskID;\r\n\t\t_filter=filter;\r\n\t}\r\n\r\n\tpublic function getTransformMatrix(pivotMatrix:Matrix, scale:Float):Matrix\r\n\t{\r\n\t\tvar result:Matrix=pivotMatrix.clone();\r\n\t\ttx=_matrix.tx;\r\n\t\tty=_matrix.ty;\r\n\t\t_matrix.tx *=scale;\r\n\t\t_matrix.ty *=scale;\r\n\t\tresult.concat(_matrix);\r\n\t\t_matrix.tx=tx;\r\n\t\t_matrix.ty=ty;\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic function applyTransformMatrix(transformationMatrix:Matrix, pivotMatrix:Matrix, scale:Float):Void\r\n\t{\r\n\t\ttransformationMatrix.copyFrom(pivotMatrix);\r\n\t\ttx=_matrix.tx;\r\n\t\tty=_matrix.ty;\r\n\t\t_matrix.tx *=scale;\r\n\t\t_matrix.ty *= scale;\r\n\t\ttransformationMatrix.concat(_matrix);\r\n\t\t_matrix.tx=tx;\r\n\t\t_matrix.ty=ty;\r\n\t}\r\n\r\n\tpublic function calculateTransformMatrix(transformationMatrix:Matrix, pivotMatrix:Matrix, scale:Float):Matrix\r\n\t{\r\n\t\tapplyTransformMatrix(transformationMatrix, pivotMatrix, scale);\r\n\t\treturn transformationMatrix;\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// PRIVATE METHODS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// EVENT HANDLERS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t// GETTERS AND SETTERS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\tpublic var matrix(get_matrix, null):Matrix;\r\n \tprivate function get_matrix():Matrix\r\n\t{\r\n\t\treturn _matrix;\r\n\t}\r\n\r\n\tpublic var alpha(get_alpha, null):Float;\r\n \tprivate function get_alpha():Float\r\n\t{\r\n\t\treturn _alpha;\r\n\t}\r\n\r\n\tpublic var maskID(get_maskID, null):String;\r\n \tprivate function get_maskID():String\r\n\t{\r\n\t\treturn _maskID;\r\n\t}\r\n\r\n\tpublic var filter(get_filter, null):CFilter;\r\n \tprivate function get_filter():CFilter\r\n\t{\r\n\t\treturn _filter;\r\n\t}\r\n\r\n\tpublic var zIndex(get_zIndex, null):Int;\r\n \tprivate function get_zIndex():Int\r\n\t{\r\n\t\treturn _zIndex;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CAnimationFrames\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _frames:Array<CAnimationFrame>;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new()\r\n\t{\r\n\t\t_frames=new Array<CAnimationFrame>();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function addFrame(frame:CAnimationFrame):Void\r\n\t{\r\n\t\t_frames.push(frame);\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var frames(get_frames, null):Array<CAnimationFrame>;\r\n \tprivate function get_frames():Array<CAnimationFrame>\r\n\t{\r\n\t\treturn _frames;\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.data.config;\r\nimport pixi.core.math.Point;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CAnimationObject\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic static inline var TYPE_TEXTURE:String=\"texture\";\r\n\tpublic static inline var TYPE_TEXTFIELD:String=\"textField\";\r\n\tpublic static inline var TYPE_TIMELINE:String=\"timeline\";\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _instanceID:String;\r\n\tprivate var _regionID:String;\r\n\tprivate var _type:String;\r\n\tprivate var _mask:Bool=false;\r\n\tprivate var _maxSize:Point;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(instanceID:String, regionID:String, type:String, mask:Bool)\r\n\t{\r\n\t\t_instanceID=instanceID;\r\n\t\t_regionID=regionID;\r\n\t\t_type=type;\r\n\t\t_mask=mask;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var instanceID(get_instanceID, null):String;\r\n \tprivate function get_instanceID():String\r\n\t{\r\n\t\treturn _instanceID;\r\n\t}\r\n\r\n\tpublic var regionID(get_regionID, null):String;\r\n \tprivate function get_regionID():String\r\n\t{\r\n\t\treturn _regionID;\r\n\t}\r\n\r\n\tpublic var mask(get_mask, null):Bool;\r\n \tprivate function get_mask():Bool\r\n\t{\r\n\t\treturn _mask;\r\n\t}\r\n\r\n\tpublic var type(get_type, null):String;\r\n \tprivate function get_type():String\r\n\t{\r\n\t\treturn _type;\r\n\t}\r\n\r\n\tpublic var maxSize(get_maxSize, set_maxSize):Point;\r\n \tprivate function get_maxSize():Point\r\n\t{\r\n\t\treturn _maxSize;\r\n\t}\r\n\r\n\tprivate function set_maxSize(value:Point):Point\r\n\t{\r\n\t\treturn _maxSize=value;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CAnimationObjects\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _animationObjectsDictionary:Map<String,CAnimationObject>;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new()\r\n\t{\r\n\t\t_animationObjectsDictionary=new Map<String,CAnimationObject>();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function addAnimationObject(animationObject:CAnimationObject):Void\r\n\t{\r\n\t\tif(_animationObjectsDictionary[animationObject.instanceID]==null)\r\n\t\t{\r\n\t\t\t_animationObjectsDictionary[animationObject.instanceID]=animationObject;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function getAnimationObject(instanceID:String):CAnimationObject\r\n\t{\r\n\t\tif(_animationObjectsDictionary[instanceID]!=null)\r\n\t\t{\r\n\t\t\treturn _animationObjectsDictionary[instanceID];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var animationObjectsDictionary(get_animationObjectsDictionary, null):Map<String,CAnimationObject>;\r\n \tprivate function get_animationObjectsDictionary():Map<String,CAnimationObject>\r\n\t{\r\n\t\treturn _animationObjectsDictionary;\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * Data object that describe sequence\r\n */\r\nclass CAnimationSequence\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _id:String;\r\n\tprivate var _startFrameNo:Int=0;\r\n\tprivate var _endFrameNo:Int=0;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic function new(id:String, startFrameNo:Int, endFrameNo:Int)\r\n\t{\r\n\t\t_id=id;\r\n\t\t_startFrameNo=startFrameNo;\r\n\t\t_endFrameNo=endFrameNo;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic function isSequenceFrame(frameNo:Int):Bool\r\n\t{\r\n\t\t// first frame is \"1\" !!!\r\n\r\n\t\tif(frameNo>=_startFrameNo && frameNo<=_endFrameNo)\r\n\t\t{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Sequence ID\r\n\t * @return Sequence ID\r\n\t */\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\t/**\r\n\t * Sequence start frame number\r\n\t * @return Sequence start frame number\r\n\t */\r\n\tpublic var startFrameNo(get_startFrameNo, null):Int;\r\n \tprivate function get_startFrameNo():Int\r\n\t{\r\n\t\treturn _startFrameNo;\r\n\t}\r\n\r\n\t/**\r\n\t * Sequence end frame number\r\n\t * @return Sequence end frame number\r\n\t */\r\n\tpublic var endFrameNo(get_endFrameNo, null):Int;\r\n \tprivate function get_endFrameNo():Int\r\n\t{\r\n\t\treturn _endFrameNo;\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n\r\n/**\r\n * AS3 conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CAnimationSequences\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _sequences:Array<CAnimationSequence>;\r\n\r\n\tprivate var _sequencesStartDictionary:Dynamic;\r\n\tprivate var _sequencesEndDictionary:Dynamic;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new()\r\n\t{\r\n\t\t_sequences=new Array<CAnimationSequence>();\r\n\r\n\t\t_sequencesStartDictionary={};\r\n\t\t_sequencesEndDictionary={};\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function addSequence(sequence:CAnimationSequence):Void\r\n\t{\r\n\t\t_sequences.push(sequence);\r\n\r\n\t\tif(!_sequencesStartDictionary[sequence.startFrameNo])\r\n\t\t{\r\n\t\t\t_sequencesStartDictionary[sequence.startFrameNo]=sequence;\r\n\t\t}\r\n\r\n\t\tif(!_sequencesEndDictionary[sequence.endFrameNo])\r\n\t\t{\r\n\t\t\t_sequencesEndDictionary[sequence.endFrameNo]=sequence;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function getSequenceStart(frameNo:Int):CAnimationSequence\r\n\t{\r\n\t\treturn _sequencesStartDictionary[frameNo];\r\n\t}\r\n\r\n\tpublic function getSequenceEnd(frameNo:Int):CAnimationSequence\r\n\t{\r\n\t\treturn _sequencesEndDictionary[frameNo];\r\n\t}\r\n\r\n\tpublic function getStartFrameNo(sequenceID:String):Int\r\n\t{\r\n\t\tvar result:Int=0;\r\n\r\n\t\tfor(sequence in _sequences)\r\n\t\t{\r\n\t\t\tif(sequence.id==sequenceID)\r\n\t\t\t{\r\n\t\t\t\treturn sequence.startFrameNo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic function getSequenceByID(id:String):CAnimationSequence\r\n\t{\r\n\t\tfor(sequence in _sequences)\r\n\t\t{\r\n\t\t\tif(sequence.id==id)\r\n\t\t\t{\r\n\t\t\t\treturn sequence;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic function getSequenceByFrame(frameNo:Int):CAnimationSequence\r\n\t{\r\n\t\tfor(i in 0..._sequences.length)\r\n\t\t{\r\n\t\t\tif(_sequences[i].isSequenceFrame(frameNo))\r\n\t\t\t{\r\n\t\t\t\treturn _sequences[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var sequences(get_sequences, null):Array<CAnimationSequence>;\r\n \tprivate function get_sequences():Array<CAnimationSequence>\r\n\t{\r\n\t\treturn _sequences;\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CBlurFilterData implements ICFilterData\r\n{\r\n\tpublic var blurX:Float;\r\n\tpublic var blurY:Float;\r\n\tpublic var color:Int=0;\r\n\tpublic var angle:Float=0;\r\n\tpublic var distance:Float=0;\r\n\tpublic var strength:Float=0;\r\n\tpublic var alpha:Float=1;\r\n\tpublic var inner:Bool=false;\r\n\tpublic var knockout:Bool=false;\r\n\tpublic var resolution:Float=1;\r\n\t\r\n\tpublic function new () {}\r\n\t\r\n\tpublic function clone():ICFilterData\r\n\t{\r\n\t\t\r\n\t\tvar copy:CBlurFilterData=new CBlurFilterData();\r\n\t\t\r\n\t\tcopy.blurX=blurX;\r\n\t\tcopy.blurY=blurY;\r\n\t\tcopy.color=color;\r\n\t\tcopy.angle=angle;\r\n\t\tcopy.distance=distance;\r\n\t\tcopy.strength=strength;\r\n\t\tcopy.alpha=alpha;\r\n\t\tcopy.inner=inner;\r\n\t\tcopy.knockout=knockout;\r\n\t\tcopy.resolution=resolution;\r\n\t\t\r\n\t\treturn copy;\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.data.config;\r\nimport com.github.haxePixiGAF.utils.VectorUtility;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CColorMatrixFilterData implements ICFilterData\r\n{\r\n\tpublic var matrix:Array<Float>=new Array<Float>();\r\n\r\n\tpublic function new () {}\r\n\t\r\n\tpublic function clone():ICFilterData\r\n\t{\r\n\t\tvar copy:CColorMatrixFilterData=new CColorMatrixFilterData();\r\n\r\n\t\tVectorUtility.copyMatrix(copy.matrix, matrix);\r\n\r\n\t\treturn copy;\r\n\t}\r\n}","package com.github.haxePixiGAF.utils;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass VectorUtility\r\n{\r\n\r\n\tpublic static inline function fillMatrix(v:Array<Float>,\r\n\t\t\ta00:Float, a01:Float, a02:Float, a03:Float, a04:Float,\r\n\t\t\ta10:Float, a11:Float, a12:Float, a13:Float, a14:Float,\r\n\t\t\ta20:Float, a21:Float, a22:Float, a23:Float, a24:Float,\r\n\t\t\ta30:Float, a31:Float, a32:Float, a33:Float, a34:Float):Void\r\n\t{\r\n\t\tv[0]=a00;v[1]=a01;v[2]=a02;v[3]=a03;v[4]=a04;\r\n\t\tv[5]=a10;v[6]=a11;v[7]=a12;v[8]=a13;v[9]=a14;\r\n\t\tv[10]=a20;v[11]=a21;v[12]=a22;v[13]=a23;v[14]=a24;\r\n\t\tv[15]=a30;v[16]=a31;v[17]=a32;v[18]=a33;v[19]=a34;\r\n\t}\r\n\r\n\tpublic static inline function copyMatrix(source:Array<Float>, dest:Array<Float>):Void\r\n\t{\r\n\t\tvar l:Int=dest.length;\r\n\t\tfor(i in 0...l)\r\n\t\t{\r\n\t\t\tsource[i]=dest[i];\r\n\t\t}\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\nimport com.github.haxePixiGAF.utils.VectorUtility;\r\n\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CFilter\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _filterConfigs:Array<ICFilterData>=new Array<ICFilterData>();\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new () {}\r\n\t\r\n\tpublic function clone():CFilter\r\n\t{\r\n\t\tvar result:CFilter=new CFilter();\r\n\r\n\t\tfor(filterData in _filterConfigs)\r\n\t\t{\r\n\t\t\tresult.filterConfigs.push(filterData.clone());\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic function addBlurFilter(blurX:Float, blurY:Float):String\r\n\t{\r\n\t\tvar filterData:CBlurFilterData=new CBlurFilterData();\r\n\t\tfilterData.blurX=blurX;\r\n\t\tfilterData.blurY=blurY;\r\n\t\tfilterData.color=-1;\r\n\r\n\t\t_filterConfigs.push(filterData);\r\n\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic function addGlowFilter(blurX:Float, blurY:Float, color:Int, alpha:Float,\r\n\t\t\t\t\t\t\t\t  strength:Float=1, inner:Bool=false, knockout:Bool=false):String\r\n\t{\r\n\t\tvar filterData:CBlurFilterData=new CBlurFilterData();\r\n\t\tfilterData.blurX=blurX;\r\n\t\tfilterData.blurY=blurY;\r\n\t\tfilterData.color=color;\r\n\t\tfilterData.alpha=alpha;\r\n\t\tfilterData.strength=strength;\r\n\t\tfilterData.inner=inner;\r\n\t\tfilterData.knockout=knockout;\r\n\r\n\t\t_filterConfigs.push(filterData);\r\n\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic function addDropShadowFilter(blurX:Float, blurY:Float, color:Int, alpha:Float, angle:Float, distance:Float,\r\n\t\t\t\t\t\t\t\t\t\tstrength:Float=1, inner:Bool=false, knockout:Bool=false):String\r\n\t{\r\n\t\tvar filterData:CBlurFilterData=new CBlurFilterData();\r\n\t\tfilterData.blurX=blurX;\r\n\t\tfilterData.blurY=blurY;\r\n\t\tfilterData.color=color;\r\n\t\tfilterData.alpha=alpha;\r\n\t\tfilterData.angle=angle;\r\n\t\tfilterData.distance=distance;\r\n\t\tfilterData.strength=strength;\r\n\t\tfilterData.inner=inner;\r\n\t\tfilterData.knockout=knockout;\r\n\r\n\t\t_filterConfigs.push(filterData);\r\n\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic function addColorTransform(params:Array<Float>):Void\r\n\t{\r\n\t\tif(getColorMatrixFilter()!=null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar filterData:CColorMatrixFilterData=new CColorMatrixFilterData();\r\n\t\tVectorUtility.fillMatrix(filterData.matrix,\r\n\t\t\t\tparams[1], 0, 0, 0, params[2],\r\n\t\t\t\t0, params[3], 0, 0, params[4],\r\n\t\t\t\t0, 0, params[5], 0, params[6],\r\n\t\t\t\t\t\t\t   0, 0, 0, 1, 0);\r\n\t\t_filterConfigs.push(filterData);\r\n\t}\r\n\r\n\tpublic function addColorMatrixFilter(params:Array<Float>):String\r\n\t{\r\n\t\tvar i:Int=0;\r\n\r\n\t\tfor(i in 0...params.length)\r\n\t\t{\r\n\t\t\tif(i % 5==4)\r\n\t\t\t{\r\n\t\t\t\tparams[i]=params[i] / 255;\r\n\t\t\t}\r\n\t\t}\r\n\r\n//\t\t\tvar colorMatrixFilterConfig:CColorMatrixFilterData=getColorMatrixFilter();\r\n//\r\n//\t\t\tif(colorMatrixFilterConfig)\r\n//\t\t\t{\r\n//\t\t\t\treturn WarningConstants.CANT_COLOR_ADJ_CT;\r\n//\t\t\t}\r\n//\t\t\telse\r\n//\t\t\t{\r\n\t\t\tvar colorMatrixFilterConfig:CColorMatrixFilterData=new CColorMatrixFilterData();\r\n\t\t\tVectorUtility.copyMatrix(colorMatrixFilterConfig.matrix, params);\r\n\t\t\t_filterConfigs.push(colorMatrixFilterConfig);\r\n//\t\t\t}\r\n\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic function getBlurFilter():CBlurFilterData\r\n\t{\r\n\t\tfor(filterConfig in _filterConfigs)\r\n\t\t{\r\n\t\t\tif(Std.is(filterConfig, CBlurFilterData))\r\n\t\t\t{\r\n\t\t\t\treturn cast(filterConfig,CBlurFilterData);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function getColorMatrixFilter():CColorMatrixFilterData\r\n\t{\r\n\t\tfor(filterConfig in _filterConfigs)\r\n\t\t{\r\n\t\t\tif(Std.is(filterConfig, CColorMatrixFilterData))\r\n\t\t\t{\r\n\t\t\t\treturn cast(filterConfig,CColorMatrixFilterData);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var filterConfigs(get_filterConfigs, null):Array<ICFilterData>;\r\n \tprivate function get_filterConfigs():Array<ICFilterData>\r\n\t{\r\n\t\treturn _filterConfigs;\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CFrameAction\r\n{\r\n\tpublic var type:Int=0;\r\n\tpublic var scope:String;\r\n\tpublic var params:Array<String>=new Array<String>();\r\n\t\r\n\tpublic static inline var STOP:Int=0;\r\n\tpublic static inline var PLAY:Int=1;\r\n\tpublic static inline var GOTO_AND_STOP:Int=2;\r\n\tpublic static inline var GOTO_AND_PLAY:Int=3;\r\n\tpublic static inline var DISPATCH_EVENT:Int = 4;\r\n\t\r\n\tpublic function new () {}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CSound\r\n{\r\n\tpublic static inline var GAF_PLAY_SOUND:String=\"gafPlaySound\";\r\n\tpublic static inline var WAV:Int=0;\r\n\tpublic static inline var MP3:Int=1;\r\n\r\n\tpublic var soundID:Int=0;\r\n\tpublic var linkageName:String;\r\n\tpublic var source:String;\r\n\tpublic var format:Int=0;\r\n\tpublic var rate:Int=0;\r\n\tpublic var sampleSize:Int=0;\r\n\tpublic var sampleCount:Int=0;\r\n\tpublic var stereo:Bool=false;\r\n\t//public var sound:Sound;\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CStage\r\n{\r\n\tpublic var fps:Int=0;\r\n\t//public var color:Int=0;\r\n\tpublic var color:Float=0;\r\n\tpublic var width:Int=0;\r\n\tpublic var height:Int=0;\r\n\t\r\n\tpublic function new() {}\r\n\t\r\n\tpublic function clone(source:Dynamic):CStage\r\n\t{\r\n\t\tfps=source.fps;\r\n\t\tcolor=source.color;\r\n\t\twidth=source.width;\r\n\t\theight=source.height;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\nimport pixi.core.math.Point;\r\nimport pixi.core.text.TextStyle;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CTextFieldObject\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _id:String;\r\n\tprivate var _width:Float;\r\n\tprivate var _height:Float;\r\n\tprivate var _text:String;\r\n\tprivate var _embedFonts:Bool=false;\r\n\tprivate var _multiline:Bool=false;\r\n\tprivate var _wordWrap:Bool=false;\r\n\tprivate var _restrict:String;\r\n\tprivate var _editable:Bool=false;\r\n\tprivate var _selectable:Bool=false;\r\n\tprivate var _displayAsPassword:Bool=false;\r\n\tprivate var _maxChars:Int=0;\r\n\tprivate var _textFormat:TextStyle;\r\n\tprivate var _pivotPoint:Point;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(id:String, text:String, textFormat:TextStyle, width:Float, height:Float)\r\n\t{\r\n\t\t_id=id;\r\n\t\t_text=text;\r\n\t\t_textFormat=textFormat;\r\n\r\n\t\t_width=width;\r\n\t\t_height=height;\r\n\r\n\t\t_pivotPoint=new Point();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var id(get_id, set_id):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\tprivate function set_id(value:String):String\r\n\t{\r\n\t\treturn _id=value;\r\n\t}\r\n\r\n\tpublic var text(get_text, set_text):String;\r\n \tprivate function get_text():String\r\n\t{\r\n\t\treturn _text;\r\n\t}\r\n\r\n\tprivate function set_text(value:String):String\r\n\t{\r\n\t\treturn _text=value;\r\n\t}\r\n\r\n\tpublic var textFormat(get_textFormat, set_textFormat):TextStyle;\r\n \tprivate function get_textFormat():TextStyle\r\n\t{\r\n\t\treturn _textFormat;\r\n\t}\r\n\r\n\tprivate function set_textFormat(value:TextStyle):TextStyle\r\n\t{\r\n\t\treturn _textFormat=value;\r\n\t}\r\n\r\n\tpublic var width(get_width, set_width):Float;\r\n \tprivate function get_width():Float\r\n\t{\r\n\t\treturn _width;\r\n\t}\r\n\r\n\tprivate function set_width(value:Float):Float\r\n\t{\r\n\t\treturn _width=value;\r\n\t}\r\n\r\n\tpublic var height(get_height, set_height):Float;\r\n \tprivate function get_height():Float\r\n\t{\r\n\t\treturn _height;\r\n\t}\r\n\r\n\tprivate function set_height(value:Float):Float\r\n\t{\r\n\t\treturn _height=value;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var embedFonts(get_embedFonts, set_embedFonts):Bool;\r\n \tprivate function get_embedFonts():Bool\r\n\t{\r\n\t\treturn _embedFonts;\r\n\t}\r\n\r\n\tprivate function set_embedFonts(value:Bool):Bool\r\n\t{\r\n\t\treturn _embedFonts=value;\r\n\t}\r\n\r\n\tpublic var multiline(get_multiline, set_multiline):Bool;\r\n \tprivate function get_multiline():Bool\r\n\t{\r\n\t\treturn _multiline;\r\n\t}\r\n\r\n\tprivate function set_multiline(value:Bool):Bool\r\n\t{\r\n\t\treturn _multiline=value;\r\n\t}\r\n\r\n\tpublic var wordWrap(get_wordWrap, set_wordWrap):Bool;\r\n \tprivate function get_wordWrap():Bool\r\n\t{\r\n\t\treturn _wordWrap;\r\n\t}\r\n\r\n\tprivate function set_wordWrap(value:Bool):Bool\r\n\t{\r\n\t\treturn _wordWrap=value;\r\n\t}\r\n\r\n\tpublic var restrict(get_restrict, set_restrict):String;\r\n \tprivate function get_restrict():String\r\n\t{\r\n\t\treturn _restrict;\r\n\t}\r\n\r\n\tprivate function set_restrict(value:String):String\r\n\t{\r\n\t\treturn _restrict=value;\r\n\t}\r\n\r\n\tpublic var editable(get_editable, set_editable):Bool;\r\n \tprivate function get_editable():Bool\r\n\t{\r\n\t\treturn _editable;\r\n\t}\r\n\r\n\tprivate function set_editable(value:Bool):Bool\r\n\t{\r\n\t\treturn _editable=value;\r\n\t}\r\n\r\n\tpublic var selectable(get_selectable, set_selectable):Bool;\r\n \tprivate function get_selectable():Bool\r\n\t{\r\n\t\treturn _selectable;\r\n\t}\r\n\r\n\tprivate function set_selectable(value:Bool):Bool\r\n\t{\r\n\t\treturn _selectable=value;\r\n\t}\r\n\r\n\tpublic var displayAsPassword(get_displayAsPassword, set_displayAsPassword):Bool;\r\n \tprivate function get_displayAsPassword():Bool\r\n\t{\r\n\t\treturn _displayAsPassword;\r\n\t}\r\n\r\n\tprivate function set_displayAsPassword(value:Bool):Bool\r\n\t{\r\n\t\treturn _displayAsPassword=value;\r\n\t}\r\n\r\n\tpublic var maxChars(get_maxChars, set_maxChars):Int;\r\n \tprivate function get_maxChars():Int\r\n\t{\r\n\t\treturn _maxChars;\r\n\t}\r\n\r\n\tprivate function set_maxChars(value:Int):Int\r\n\t{\r\n\t\treturn _maxChars=value;\r\n\t}\r\n\r\n\tpublic var pivotPoint(get_pivotPoint, set_pivotPoint):Point;\r\n \tprivate function get_pivotPoint():Point\r\n\t{\r\n\t\treturn _pivotPoint;\r\n\t}\r\n\r\n\tprivate function set_pivotPoint(value:Point):Point\r\n\t{\r\n\t\treturn _pivotPoint=value;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CTextFieldObjects\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _textFieldObjectsDictionary:Map<String,CTextFieldObject>;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new()\r\n\t{\r\n\t\t_textFieldObjectsDictionary=new Map<String,CTextFieldObject>();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function addTextFieldObject(textFieldObject:CTextFieldObject):Void\r\n\t{\r\n\t\tif(_textFieldObjectsDictionary[textFieldObject.id]==null)\r\n\t\t{\r\n\t\t\t_textFieldObjectsDictionary[textFieldObject.id]=textFieldObject;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function getAnimationObject(id:String):CAnimationObject\r\n\t{\r\n\t\tif(_textFieldObjectsDictionary[id]!=null)\r\n\t\t{\r\n\t\t\treturn cast(_textFieldObjectsDictionary[id],CAnimationObject);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var textFieldObjectsDictionary(get_textFieldObjectsDictionary, null):Map<String,CTextFieldObject>;\r\n \tprivate function get_textFieldObjectsDictionary():Map<String,CTextFieldObject>\r\n\t{\r\n\t\treturn _textFieldObjectsDictionary;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\nimport com.github.haxePixiGAF.data.textures.TextureAtlas;\r\nimport com.github.haxePixiGAF.data.textures.TextureWrapper;\r\nimport com.github.haxePixiGAF.display.GAFScale9Texture;\r\nimport com.github.haxePixiGAF.display.GAFTexture;\r\nimport com.github.haxePixiGAF.display.IGAFTexture;\r\nimport pixi.core.math.Matrix;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CTextureAtlas\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _textureAtlasesDictionary:Map<String,TextureAtlas>;\r\n\tprivate var _textureAtlasConfig:CTextureAtlasCSF;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(textureAtlasesDictionary:Map<String,TextureAtlas>, textureAtlasConfig:CTextureAtlasCSF)\r\n\t{\r\n\t\t_textureAtlasesDictionary=textureAtlasesDictionary;\r\n\t\t_textureAtlasConfig=textureAtlasConfig;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic static function createFromTextures(texturesDictionary:Map<String,TextureWrapper>,textureAtlasConfig:CTextureAtlasCSF):CTextureAtlas\r\n\t{\r\n\t\tvar atlasesDictionary:Map<String,TextureAtlas>=new Map<String,TextureAtlas>();\r\n\r\n\t\tvar atlas:TextureAtlas;\r\n\r\n\t\tfor(element in textureAtlasConfig.elements.elementsVector)\r\n\t\t{\r\n\t\t\tif(atlasesDictionary[element.atlasID]==null)\r\n\t\t\t{\r\n\t\t\t\t\r\n\t\t\t\tatlasesDictionary[element.atlasID]=new TextureAtlas(texturesDictionary[element.atlasID]);\r\n\t\t\t}\r\n\r\n\t\t\tatlas=atlasesDictionary[element.atlasID];\r\n\t\t\t\r\n\t\t\tatlas.addRegion(element.id, element.region, null, element.rotated);\r\n\t\t}\r\n\t\t\r\n\t\treturn new CTextureAtlas(atlasesDictionary, textureAtlasConfig);\r\n\t}\r\n\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\tfor(textureAtlas in _textureAtlasesDictionary)\r\n\t\t{\r\n\t\t\ttextureAtlas.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function getTexture(id:String):IGAFTexture\r\n\t{\r\n\t\tvar textureAtlasElement:CTextureAtlasElement=_textureAtlasConfig.elements.getElement(id);\r\n\t\tif(textureAtlasElement!=null)\r\n\t\t{\r\n\t\t\tvar texture:TextureWrapper=getTextureByIDAndAtlasID(id, textureAtlasElement.atlasID);\r\n\r\n\t\t\tvar pivotMatrix:Matrix;\r\n\r\n\t\t\tif(_textureAtlasConfig.elements.getElement(id)!=null)\r\n\t\t\t{\r\n\t\t\t\tpivotMatrix=_textureAtlasConfig.elements.getElement(id).pivotMatrix;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tpivotMatrix=new Matrix();\r\n\t\t\t}\r\n\r\n\t\t\tif(textureAtlasElement.scale9Grid !=null)\r\n\t\t\t{\r\n\t\t\t\treturn new GAFScale9Texture(id, texture, pivotMatrix, textureAtlasElement.scale9Grid);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn new GAFTexture(id, texture, pivotMatrix);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function getTextureByIDAndAtlasID(id:String, atlasID:String):TextureWrapper\r\n\t{\r\n\t\tvar textureAtlas:TextureAtlas=_textureAtlasesDictionary[atlasID];\r\n\r\n\t\treturn textureAtlas.getTexture(id);\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CTextureAtlasCSF\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _scale:Float;\r\n\tprivate var _csf:Float;\r\n\r\n\tprivate var _sources:Array<CTextureAtlasSource>;\r\n\r\n\tprivate var _elements:CTextureAtlasElements;\r\n\r\n\tprivate var _atlas:CTextureAtlas;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(csf:Float, scale:Float)\r\n\t{\r\n\t\t_csf=csf;\r\n\t\t_scale = scale;\r\n\r\n\t\t_sources=new Array<CTextureAtlasSource>();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\tif (_atlas != null) {\r\n\t\t\t_atlas.dispose();\r\n\t\t\t_atlas=null;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var csf(get_csf, null):Float;\r\n \tprivate function get_csf():Float\r\n\t{\r\n\t\treturn _csf;\r\n\t}\r\n\r\n\tpublic var sources(get_sources, set_sources):Array<CTextureAtlasSource>;\r\n \tprivate function get_sources():Array<CTextureAtlasSource>\r\n\t{\r\n\t\treturn _sources;\r\n\t}\r\n\r\n\tprivate function set_sources(sources:Array<CTextureAtlasSource>):Array<CTextureAtlasSource>\r\n\t{\r\n\t\treturn _sources=sources;\r\n\t}\r\n\r\n\tpublic var atlas(get_atlas, set_atlas):CTextureAtlas;\r\n \tprivate function get_atlas():CTextureAtlas\r\n\t{\r\n\t\treturn _atlas;\r\n\t}\r\n\r\n\tprivate function set_atlas(atlas:CTextureAtlas):CTextureAtlas\r\n\t{\r\n\t\treturn _atlas=atlas;\r\n\t}\r\n\r\n\tpublic var elements(get_elements, set_elements):CTextureAtlasElements;\r\n \tprivate function get_elements():CTextureAtlasElements\r\n\t{\r\n\t\treturn _elements;\r\n\t}\r\n\r\n\tprivate function set_elements(elements:CTextureAtlasElements):CTextureAtlasElements\r\n\t{\r\n\t\treturn _elements=elements;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CTextureAtlasElement\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _id:String;\r\n\tprivate var _linkage:String;\r\n\tprivate var _atlasID:String;\r\n\tprivate var _region:Rectangle;\r\n\tprivate var _pivotMatrix:Matrix;\r\n\tprivate var _scale9Grid:Rectangle;\r\n\tprivate var _rotated:Bool=false;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(id:String, atlasID:String)\r\n\t{\r\n\t\t_id=id;\r\n\t\t_atlasID=atlasID;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\tpublic var region(get_region, set_region):Rectangle;\r\n \tprivate function get_region():Rectangle\r\n\t{\r\n\t\treturn _region;\r\n\t}\r\n\r\n\tprivate function set_region(region:Rectangle):Rectangle\r\n\t{\r\n\t\treturn _region=region;\r\n\t}\r\n\r\n\tpublic var pivotMatrix(get_pivotMatrix, set_pivotMatrix):Matrix;\r\n \tprivate function get_pivotMatrix():Matrix\r\n\t{\r\n\t\treturn _pivotMatrix;\r\n\t}\r\n\r\n\tprivate function set_pivotMatrix(pivotMatrix:Matrix):Matrix\r\n\t{\r\n\t\treturn _pivotMatrix=pivotMatrix;\r\n\t}\r\n\r\n\tpublic var atlasID(get_atlasID, null):String;\r\n \tprivate function get_atlasID():String\r\n\t{\r\n\t\treturn _atlasID;\r\n\t}\r\n\r\n\tpublic var scale9Grid(get_scale9Grid, set_scale9Grid):Rectangle;\r\n \tprivate function get_scale9Grid():Rectangle\r\n\t{\r\n\t\treturn _scale9Grid;\r\n\t}\r\n\r\n\tprivate function set_scale9Grid(value:Rectangle):Rectangle\r\n\t{\r\n\t\treturn _scale9Grid=value;\r\n\t}\r\n\r\n\tpublic var linkage(get_linkage, set_linkage):String;\r\n \tprivate function get_linkage():String\r\n\t{\r\n\t\treturn _linkage;\r\n\t}\r\n\r\n\tprivate function set_linkage(value:String):String\r\n\t{\r\n\t\treturn _linkage=value;\r\n\t}\r\n\r\n\tpublic var rotated(get_rotated, set_rotated):Bool;\r\n \tprivate function get_rotated():Bool\r\n\t{\r\n\t\treturn _rotated;\r\n\t}\r\n\r\n\tprivate function set_rotated(value:Bool):Bool\r\n\t{\r\n\t\treturn _rotated=value;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CTextureAtlasElements\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _elementsVector:Array<CTextureAtlasElement>;\r\n\tprivate var _elementsDictionary:Map<String,CTextureAtlasElement>;\r\n\tprivate var _elementsByLinkage:Map<String,CTextureAtlasElement>;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new():Void\r\n\t{\r\n\t\t_elementsVector=new Array<CTextureAtlasElement>();\r\n\t\t_elementsDictionary=new Map<String,CTextureAtlasElement>();\r\n\t\t_elementsByLinkage=new Map<String,CTextureAtlasElement>();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function addElement(element:CTextureAtlasElement):Void\r\n\t{\r\n\t\tif(_elementsDictionary[element.id]==null)\r\n\t\t{\r\n\t\t\t_elementsDictionary[element.id]=element;\r\n\r\n\t\t\t_elementsVector.push(element);\r\n\r\n\t\t\tif(element.linkage!=null)\r\n\t\t\t{\r\n\t\t\t\t_elementsByLinkage[element.linkage]=element;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function getElement(id:String):CTextureAtlasElement\r\n\t{\r\n\t\tif(_elementsDictionary[id]!=null)\r\n\t\t{\r\n\t\t\treturn _elementsDictionary[id];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function getElementByLinkage(linkage:String):CTextureAtlasElement\r\n\t{\r\n\t\tif(_elementsByLinkage[linkage]!=null)\r\n\t\t{\r\n\t\t\treturn _elementsByLinkage[linkage];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var elementsVector(get_elementsVector, null):Array<CTextureAtlasElement>;\r\n \tprivate function get_elementsVector():Array<CTextureAtlasElement>\r\n\t{\r\n\t\treturn _elementsVector;\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.data.config;\r\nimport com.github.haxePixiGAF.utils.MathUtility;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CTextureAtlasScale\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _scale:Float;\r\n\r\n\tprivate var _allContentScaleFactors:Array<CTextureAtlasCSF>;\r\n\tprivate var _contentScaleFactor:CTextureAtlasCSF;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new()\r\n\t{\r\n\t\t_allContentScaleFactors=new Array<CTextureAtlasCSF>();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\tfor(cTextureAtlasCSF in _allContentScaleFactors)\r\n\t\t{\r\n\t\t\tcTextureAtlasCSF.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function getTextureAtlasForCSF(csf:Float):CTextureAtlasCSF\r\n\t{\r\n\t\tfor(textureAtlas in _allContentScaleFactors)\r\n\t\t{\r\n\t\t\tif(MathUtility.equals(textureAtlas.csf, csf))\r\n\t\t\t{\r\n\t\t\t\treturn textureAtlas;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function set_scale(scale:Float):Float\r\n\t{\r\n\t\treturn _scale=scale;\r\n\t}\r\n\r\n\tpublic var scale(get_scale, set_scale):Float;\r\n \tprivate function get_scale():Float\r\n\t{\r\n\t\treturn _scale;\r\n\t}\r\n\r\n\tpublic var allContentScaleFactors(get_allContentScaleFactors, set_allContentScaleFactors):Array<CTextureAtlasCSF>;\r\n \tprivate function get_allContentScaleFactors():Array<CTextureAtlasCSF>\r\n\t{\r\n\t\treturn _allContentScaleFactors;\r\n\t}\r\n\r\n\tprivate function set_allContentScaleFactors(value:Array<CTextureAtlasCSF>):Array<CTextureAtlasCSF>\r\n\t{\r\n\t\treturn _allContentScaleFactors=value;\r\n\t}\r\n\r\n\tpublic var contentScaleFactor(get_contentScaleFactor, set_contentScaleFactor):CTextureAtlasCSF;\r\n \tprivate function get_contentScaleFactor():CTextureAtlasCSF\r\n\t{\r\n\t\treturn _contentScaleFactor;\r\n\t}\r\n\r\n\tprivate function set_contentScaleFactor(value:CTextureAtlasCSF):CTextureAtlasCSF\r\n\t{\t\r\n\t\treturn _contentScaleFactor=value;\r\n\t}\r\n}","package com.github.haxePixiGAF.data.config;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass CTextureAtlasSource\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _id:String;\r\n\tprivate var _source:String;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(id:String, source:String)\r\n\t{\r\n\t\t_id=id;\r\n\t\t_source=source;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\tpublic var source(get_source, null):String;\r\n \tprivate function get_source():String\r\n\t{\r\n\t\treturn _source;\r\n\t}\r\n\r\n}","package com.github.haxePixiGAF.data.converters;\r\n\r\nimport com.github.haxePixiGAF.data.GAFAssetConfig;\r\nimport com.github.haxePixiGAF.data.config.CAnimationFrame;\r\nimport com.github.haxePixiGAF.data.config.CAnimationFrameInstance;\r\nimport com.github.haxePixiGAF.data.config.CAnimationObject;\r\nimport com.github.haxePixiGAF.data.config.CAnimationSequence;\r\nimport com.github.haxePixiGAF.data.config.CBlurFilterData;\r\nimport com.github.haxePixiGAF.data.config.CFilter;\r\nimport com.github.haxePixiGAF.data.config.CFrameAction;\r\nimport com.github.haxePixiGAF.data.config.CSound;\r\nimport com.github.haxePixiGAF.data.config.CStage;\r\nimport com.github.haxePixiGAF.data.config.CTextFieldObject;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasCSF;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasElement;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasElements;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasScale;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlasSource;\r\nimport com.github.haxePixiGAF.data.converters.ErrorConstants.ErrorConstants;\r\nimport com.github.haxePixiGAF.events.GAFEvent;\r\nimport com.github.haxePixiGAF.text.TextFormatAlign;\r\nimport com.github.haxePixiGAF.utils.GAFBytesInput;\r\nimport com.github.haxePixiGAF.utils.MathUtility;\r\nimport haxe.Json;\r\nimport haxe.io.Bytes;\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.math.shapes.Rectangle;\r\nimport pixi.core.text.TextStyle;\r\nimport pixi.interaction.EventEmitter;\r\n\r\nusing com.github.haxePixiGAF.utils.MatrixUtility;\r\nusing com.github.haxePixiGAF.utils.RectangleUtility;\r\nusing com.github.haxePixiGAF.utils.EventEmitterUtility;\r\n\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n */\r\nclass BinGAFAssetConfigConverter extends EventEmitter\r\n{\r\n\r\n\tprivate static inline var SIGNATURE_GAC:Int=0x00474143;\t\r\n\t\r\n\t//tags\r\n\tprivate static inline var TAG_END:Int=0;\r\n\tprivate static inline var TAG_DEFINE_ATLAS:Int=1;\r\n\tprivate static inline var TAG_DEFINE_ANIMATION_MASKS:Int=2;\r\n\tprivate static inline var TAG_DEFINE_ANIMATION_OBJECTS:Int=3;\r\n\tprivate static inline var TAG_DEFINE_ANIMATION_FRAMES:Int=4;\r\n\tprivate static inline var TAG_DEFINE_NAMED_PARTS:Int=5;\r\n\tprivate static inline var TAG_DEFINE_SEQUENCES:Int=6;\r\n\tprivate static inline var TAG_DEFINE_TEXT_FIELDS:Int=7;// v4.0\r\n\tprivate static inline var TAG_DEFINE_ATLAS2:Int=8;// v4.0\r\n\tprivate static inline var TAG_DEFINE_STAGE:Int=9;\r\n\tprivate static inline var TAG_DEFINE_ANIMATION_OBJECTS2:Int=10;// v4.0\r\n\tprivate static inline var TAG_DEFINE_ANIMATION_MASKS2:Int=11;// v4.0\r\n\tprivate static inline var TAG_DEFINE_ANIMATION_FRAMES2:Int=12;// v4.0\r\n\tprivate static inline var TAG_DEFINE_TIMELINE:Int=13;// v4.0\r\n\tprivate static inline var TAG_DEFINE_SOUNDS:Int=14;// v5.0\r\n\tprivate static inline var TAG_DEFINE_ATLAS3:Int=15;// v5.0\r\n\r\n\t//filters\r\n\tprivate static inline var FILTER_DROP_SHADOW:Int=0;\r\n\tprivate static inline var FILTER_BLUR:Int=1;\r\n\tprivate static inline var FILTER_GLOW:Int=2;\r\n\tprivate static inline var FILTER_COLOR_MATRIX:Int=6;\t\r\n\t\r\n\tprivate static var sHelperRectangle:Rectangle=new Rectangle(0,0,0,0);\r\n\tprivate static var sHelperMatrix:Matrix=new Matrix();\t\r\n\t\r\n\tprivate var _assetID:String;\r\n\tprivate var _bytes:GAFBytesInput;\r\n\tprivate var _defaultScale:Float;\r\n\tprivate var _defaultContentScaleFactor:Float;\r\n\tprivate var _config:GAFAssetConfig;\r\n\tprivate var _textureElementSizes:Array<Rectangle>;// Point by texture element id\r\n\r\n\r\n\tprivate var _isTimeline:Bool=false;\r\n\tprivate var _currentTimeline:GAFTimelineConfig;\r\n\tprivate var _async:Bool=false;\r\n\tprivate var _ignoreSounds:Bool=false;\r\n\t\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\tpublic function new(assetID:String, bytes:GAFBytesInput)\r\n\t{\r\n\t\tsuper();\r\n\t\t\r\n\t\t_bytes=bytes;\r\n\t\t_assetID=assetID;\r\n\t\t_textureElementSizes=[];\r\n\t}\r\n\t\r\n\tpublic function convert(async:Bool=false):Void\r\n\t{\r\n\t\tif(async)\r\n\t\t{\r\n\t\t\ttrace (\"TODO asynchrone conversion\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tparseStart();\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function parseStart():Void\r\n\t{\r\n\t\t\r\n\t\t_bytes.bigEndian = false;\r\n\t\t\r\n\t\t_config=new GAFAssetConfig(_assetID);\r\n\t\t_config.compression=_bytes.readInt();\r\n\t\t_config.versionMajor=_bytes.readSByte();\r\n\t\t_config.versionMinor = _bytes.readSByte();\r\n\t\t_config.fileLength = _bytes.readUnsignedInt();\t\r\n\t\t\r\n\t\tif(_config.versionMajor>GAFAssetConfig.MAX_VERSION)\r\n\t\t{\r\n\t\t\t//TODO: verifier le systeme de diffusion de message (qui les écoute, les centralise)\r\n\t\t\temit(GAFEvent.ERROR,WarningConstants.UNSUPPORTED_FILE + \"Library version:\" + GAFAssetConfig.MAX_VERSION + \", file version:\" + _config.versionMajor);\r\n\t\t\t//dispatchEvent(new DynamicEvent(ErrorEvent.ERROR, false, false, WarningConstants.UNSUPPORTED_FILE + \"Library version:\" + GAFAssetConfig.MAX_VERSION + \", file version:\" + _config.versionMajor));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tswitch(_config.compression)\r\n\t\t{\r\n\t\t\t// TODO\r\n\t\t\tcase SIGNATURE_GAC: \r\n\t\t\t\tthrow \"HaxePixiGAF: GAF compressed format not supported yet\";\r\n\t\t\t\t//decompressConfig();\r\n\t\t}\r\n\r\n\t\tif(_config.versionMajor<4)\r\n\t\t{\r\n\t\t\t_currentTimeline=new GAFTimelineConfig(_config.versionMajor + \".\" + _config.versionMinor);\r\n\t\t\t_currentTimeline.id=\"0\";\r\n\t\t\t_currentTimeline.assetID=_assetID;\r\n\t\t\t_currentTimeline.framesCount=_bytes.readShort();\r\n\t\t\t_currentTimeline.bounds=new Rectangle(_bytes.readFloat(), _bytes.readFloat(), _bytes.readFloat(), _bytes.readFloat());\r\n\t\t\t_currentTimeline.pivot=new Point(_bytes.readFloat(), _bytes.readFloat());\r\n\t\t\t_config.timelines.push(_currentTimeline);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\r\n\t\t\tvar i:Int=0;\r\n\t\t\tvar l:UInt = _bytes.readUnsignedInt();\r\n\t\t\tfor(i in 0...l)\r\n\t\t\t{\r\n\t\t\t\t_config.scaleValues.push(_bytes.readFloat());\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tl = _bytes.readUnsignedInt();\r\n\r\n\t\t\tfor(i in 0...l)\r\n\t\t\t{\r\n\t\t\t\t_config.csfValues.push(_bytes.readFloat());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treadNextTag();\r\n\t}\r\n\t\r\n\tprivate function checkForMissedRegions(timelineConfig:GAFTimelineConfig):Void\r\n\t{\r\n\t\tif(timelineConfig.textureAtlas!=null && timelineConfig.textureAtlas.contentScaleFactor.elements!=null)\r\n\t\t{\r\n\t\t\tfor(ao in timelineConfig.animationObjects.animationObjectsDictionary)\r\n\t\t\t{\r\n\t\t\t\tif(ao.type==CAnimationObject.TYPE_TEXTURE && timelineConfig.textureAtlas.contentScaleFactor.elements.getElement(ao.regionID)==null)\r\n\t\t\t\t{\r\n\t\t\t\t\ttimelineConfig.addWarning(WarningConstants.REGION_NOT_FOUND);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function readNextTag():Void\r\n\t{\r\n\t\t\r\n\t\tvar tagID:Int=_bytes.readShort();\r\n\t\tvar tagLength:Int=_bytes.readUnsignedInt();\r\n\t\t\r\n\t\tswitch(tagID)\r\n\t\t{\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_STAGE:\r\n\t\t\t\treadStageConfig(_bytes, _config);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ATLAS:\r\n\t\t\t\treadTextureAtlasConfig(tagID);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ATLAS2:\r\n\t\t\t\treadTextureAtlasConfig(tagID);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ATLAS3:\r\n\t\t\t\treadTextureAtlasConfig(tagID);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_MASKS:\r\n\t\t\t\treadAnimationMasks(tagID, _bytes, _currentTimeline);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_MASKS2:\r\n\t\t\t\treadAnimationMasks(tagID, _bytes, _currentTimeline);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_OBJECTS:\r\n\t\t\t\treadAnimationObjects(tagID, _bytes, _currentTimeline);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_OBJECTS2:\r\n\t\t\t\treadAnimationObjects(tagID, _bytes, _currentTimeline);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_FRAMES:\r\n\t\t\t\treadAnimationFrames(tagID);\r\n\t\t\t\treturn;\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_FRAMES2:\r\n\t\t\t\treadAnimationFrames(tagID);\r\n\t\t\t\treturn;\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_NAMED_PARTS:\r\n\t\t\t\treadNamedParts(_bytes, _currentTimeline);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_SEQUENCES:\r\n\t\t\t\treadAnimationSequences(_bytes, _currentTimeline);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_TEXT_FIELDS:\r\n\t\t\t\treadTextFields(_bytes, _currentTimeline);\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_SOUNDS:\r\n\t\t\t\t//TODO TAG_DEFINE_SOUNDS\r\n\t\t\t\ttrace (\"TODO TAG_DEFINE_SOUNDS\");\r\n\t\t\t\tif(!_ignoreSounds)\r\n\t\t\t\t{\r\n\t\t\t\t\t//readSounds(_bytes, _config);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t_bytes.position +=tagLength;\r\n\t\t\t\t}\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_DEFINE_TIMELINE:\r\n\t\t\t\t_currentTimeline=readTimeline();\r\n\t\t\tcase BinGAFAssetConfigConverter.TAG_END:\r\n\t\t\t\tif(_isTimeline)\r\n\t\t\t\t{\r\n\t\t\t\t\t_isTimeline=false;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t_bytes.position=_bytes.length;\r\n\t\t\t\t\tendParsing();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\ttrace(WarningConstants.UNSUPPORTED_TAG);\r\n\t\t\t\t_bytes.position +=tagLength;\r\n\t\t}\r\n\r\n\t\tdelayedReadNextTag();\r\n\t}\r\n\r\n\tprivate function delayedReadNextTag():Void\r\n\t{\r\n\t\tif(_async)\r\n\t\t{\r\n\t\t\ttrace (\"TODO asynchrone delayedReadNextTag\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treadNextTag();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function readTimeline():GAFTimelineConfig\r\n\t{\r\n\t\tvar timelineConfig:GAFTimelineConfig=new GAFTimelineConfig(_config.versionMajor + \".\" + _config.versionMinor);\r\n\t\ttimelineConfig.id = Std.string(_bytes.readUnsignedInt());\r\n\t\ttimelineConfig.assetID=_config.id;\r\n\t\ttimelineConfig.framesCount=_bytes.readUnsignedInt();\r\n\t\ttimelineConfig.bounds=new Rectangle(_bytes.readFloat(), _bytes.readFloat(), _bytes.readFloat(), _bytes.readFloat());\r\n\t\ttimelineConfig.pivot=new Point(_bytes.readFloat(), _bytes.readFloat());\r\n\t\t\r\n\t\tvar hasLinkage:Bool = _bytes.readBoolean();\r\n\t\t\r\n\t\tif(hasLinkage)\r\n\t\t{\r\n\t\t\ttimelineConfig.linkage = _bytes.readUTF();\t\t\t\r\n\t\t}\r\n\r\n\t\t_config.timelines.push(timelineConfig);\r\n\r\n\t\t_isTimeline=true;\r\n\r\n\t\treturn timelineConfig;\r\n\t}\r\n\t\r\n\tprivate function readTextureAtlasConfig(tagID:Int):Void\r\n\t{\r\n\t\tvar i:Int=0;\r\n\t\tvar j:Int=0;\r\n\r\n\t\tvar scale:Float = _bytes.readFloat();\r\n\t\t\r\n\t\tif(_config.scaleValues.indexOf(scale)==-1)\r\n\t\t{\r\n\t\t\t_config.scaleValues.push(scale);\r\n\t\t}\r\n\r\n\t\tvar textureAtlas:CTextureAtlasScale=getTextureAtlasScale(scale);\r\n\r\n\t\t/////////////////////\r\n\r\n\t\tvar contentScaleFactor:CTextureAtlasCSF=null;\r\n\t\tvar atlasLength:Int = _bytes.readSByte();\r\n\t\t\r\n\t\tvar atlasID:Int=0;\r\n\t\tvar sourceLength:Int=0;\r\n\t\tvar csf:Float;\r\n\t\tvar source:String;\r\n\r\n\t\tvar elements:CTextureAtlasElements=null;\r\n\t\tif(textureAtlas.allContentScaleFactors.length>0)\r\n\t\t{\r\n\t\t\telements=textureAtlas.allContentScaleFactors[0].elements;\r\n\t\t}\r\n\r\n\t\tif(elements==null)\r\n\t\t{\r\n\t\t\telements=new CTextureAtlasElements();\r\n\t\t}\r\n\r\n\t\tfor(i in 0...atlasLength)\r\n\t\t{\r\n\t\t\tatlasID = _bytes.readUnsignedInt();\r\n\t\t\t\r\n\t\t\tsourceLength = _bytes.readSByte();\r\n\t\t\t\r\n\t\t\tfor(j in 0...sourceLength)\r\n\t\t\t{\r\n\t\t\t\tsource = _bytes.readUTF();\r\n\r\n\t\t\t\tcsf = _bytes.readFloat();\r\n\r\n\t\t\t\tif(_config.csfValues.indexOf(csf)==-1)\r\n\t\t\t\t{\r\n\t\t\t\t\t_config.csfValues.push(csf);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontentScaleFactor = getTextureAtlasCSF(scale, csf);\r\n\r\n\t\t\t\tupdateTextureAtlasSources(contentScaleFactor, Std.string(atlasID), source);\r\n\t\t\t\tif(contentScaleFactor.elements==null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcontentScaleFactor.elements=elements;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t/////////////////////\r\n\t\t\r\n\t\tvar elementsLength:Int = _bytes.readUnsignedInt();\r\n\t\t\r\n\t\tvar element:CTextureAtlasElement;\r\n\t\tvar hasScale9Grid:Bool=false;\r\n\t\tvar scale9Grid:Rectangle=null;\r\n\t\tvar pivot:Point;\r\n\t\tvar topLeft:Point;\r\n\t\tvar elementScaleX:Float=0;\r\n\t\tvar elementScaleY:Float=0;\r\n\t\tvar elementWidth:Float;\r\n\t\tvar elementHeight:Float;\r\n\t\tvar elementAtlasID:Int=0;\r\n\t\tvar rotation:Bool=false;\r\n\t\tvar linkageName:String=\"\";\r\n\r\n\t\tfor(i in 0...elementsLength)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tpivot = new Point(_bytes.readFloat(), _bytes.readFloat());\t\r\n\t\t\ttopLeft = new Point(_bytes.readFloat(), _bytes.readFloat());\r\n\t\t\t\r\n\t\t\tif(tagID==BinGAFAssetConfigConverter.TAG_DEFINE_ATLAS || tagID==BinGAFAssetConfigConverter.TAG_DEFINE_ATLAS2)\r\n\t\t\t{\t\t\t\r\n\t\t\t\telementScaleX = elementScaleY = _bytes.readFloat();\r\n\t\t\t}\r\n\r\n\t\t\telementWidth = _bytes.readFloat();\t\t\t\r\n\t\t\telementHeight = _bytes.readFloat();\r\n\t\t\tatlasID = _bytes.readUnsignedInt();\r\n\t\t\telementAtlasID = _bytes.readUnsignedInt();\r\n\r\n\t\t\tif(tagID==BinGAFAssetConfigConverter.TAG_DEFINE_ATLAS2\r\n\t\t\t|| tagID==BinGAFAssetConfigConverter.TAG_DEFINE_ATLAS3)\r\n\t\t\t{\r\n\t\t\t\thasScale9Grid=_bytes.readBoolean();\r\n\t\t\t\tif(hasScale9Grid)\r\n\t\t\t\t{\r\n\t\t\t\t\tscale9Grid=new Rectangle(\r\n\t\t\t\t\t\t\t_bytes.readFloat(), _bytes.readFloat(),\r\n\t\t\t\t\t\t\t_bytes.readFloat(), _bytes.readFloat()\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tscale9Grid=null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(tagID==BinGAFAssetConfigConverter.TAG_DEFINE_ATLAS3)\r\n\t\t\t{\r\n\t\t\t\telementScaleX=_bytes.readFloat();\r\n\t\t\t\telementScaleY=_bytes.readFloat();\r\n\t\t\t\trotation=_bytes.readBoolean();\r\n\t\t\t\tlinkageName=_bytes.readUTF();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(elements.getElement(Std.string(elementAtlasID))==null)\r\n\t\t\t{\r\n\t\t\t\telement=new CTextureAtlasElement(Std.string(elementAtlasID), Std.string(atlasID));\r\n\t\t\t\telement.region=new Rectangle(Std.int(topLeft.x), Std.int(topLeft.y), elementWidth, elementHeight);\r\n\t\t\t\telement.pivotMatrix = new Matrix(1 / elementScaleX, 0, 0, 1 / elementScaleY, -pivot.x / elementScaleX, -pivot.y / elementScaleY);\r\n\t\t\t\telement.scale9Grid=scale9Grid;\r\n\t\t\t\telement.linkage=linkageName;\r\n\t\t\t\telement.rotated=rotation;\r\n\t\t\t\telements.addElement(element);\r\n\r\n\t\t\t\tif(element.rotated)\r\n\t\t\t\t{\r\n\t\t\t\t\tsHelperRectangle.x = 0;\r\n\t\t\t\t\tsHelperRectangle.y = 0;\r\n\t\t\t\t\tsHelperRectangle.width = elementHeight;\r\n\t\t\t\t\tsHelperRectangle.height = elementWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tsHelperRectangle.x = 0;\r\n\t\t\t\t\tsHelperRectangle.y = 0;\r\n\t\t\t\t\tsHelperRectangle.width = elementWidth;\r\n\t\t\t\t\tsHelperRectangle.height = elementHeight;\r\n\t\t\t\t}\r\n\t\t\t\tsHelperMatrix.copyFrom(element.pivotMatrix);\r\n\t\t\t\tvar invertScale:Float=1 / scale;\r\n\t\t\t\tsHelperMatrix.scale(invertScale, invertScale);\r\n\t\t\t\t// TODO RectangleUtil.getBounds\r\n\t\t\t\t//RectangleUtil.getBounds(sHelperRectangle, sHelperMatrix, sHelperRectangle);\r\n\r\n\t\t\t\tif(_textureElementSizes[elementAtlasID]==null)\r\n\t\t\t\t{\r\n\t\t\t\t\t_textureElementSizes[elementAtlasID]=sHelperRectangle.clone();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t_textureElementSizes[elementAtlasID]=_textureElementSizes[elementAtlasID].union(sHelperRectangle);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function getTextureAtlasScale(scale:Float):CTextureAtlasScale\r\n\t{\r\n\t\tvar textureAtlasScale:CTextureAtlasScale=null;\r\n\t\tvar textureAtlasScales:Array<CTextureAtlasScale>=_config.allTextureAtlases;\r\n\r\n\t\tvar l:Int = textureAtlasScales.length;\r\n\t\t\r\n\t\tfor(i in 0...l)\r\n\t\t{\r\n\t\t\tif(MathUtility.equals(textureAtlasScales[i].scale, scale))\r\n\t\t\t{\r\n\t\t\t\ttextureAtlasScale=textureAtlasScales[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(textureAtlasScale==null)\r\n\t\t{\r\n\t\t\ttextureAtlasScale=new CTextureAtlasScale();\r\n\t\t\ttextureAtlasScale.scale=scale;\r\n\t\t\ttextureAtlasScales.push(textureAtlasScale);\r\n\t\t}\r\n\r\n\t\treturn textureAtlasScale;\r\n\t}\r\n\t\r\n\tprivate function getTextureAtlasCSF(scale:Float, csf:Float):CTextureAtlasCSF\r\n\t{\r\n\t\tvar textureAtlasScale:CTextureAtlasScale=getTextureAtlasScale(scale);\r\n\t\tvar textureAtlasCSF:CTextureAtlasCSF=textureAtlasScale.getTextureAtlasForCSF(csf);\r\n\t\tif(textureAtlasCSF==null)\r\n\t\t{\r\n\t\t\ttextureAtlasCSF=new CTextureAtlasCSF(csf, scale);\r\n\t\t\ttextureAtlasScale.allContentScaleFactors.push(textureAtlasCSF);\r\n\t\t}\r\n\r\n\t\treturn textureAtlasCSF;\r\n\t}\r\n\r\n\tprivate function updateTextureAtlasSources(textureAtlasCSF:CTextureAtlasCSF, atlasID:String, source:String):Void\r\n\t{\r\n\t\tvar textureAtlasSource:CTextureAtlasSource=null;\r\n\t\tvar textureAtlasSources:Array<CTextureAtlasSource>=textureAtlasCSF.sources;\r\n\t\t\r\n\t\tvar l:Int = textureAtlasSources.length;\r\n\t\t\r\n\t\tfor(i in 0...l)\r\n\t\t{\r\n\t\t\tif(textureAtlasSources[i].id==atlasID)\r\n\t\t\t{\r\n\t\t\t\ttextureAtlasSource=textureAtlasSources[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(textureAtlasSource==null)\r\n\t\t{\r\n\t\t\ttextureAtlasSource=new CTextureAtlasSource(atlasID, source);\r\n\t\t\ttextureAtlasSources.push(textureAtlasSource);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static function readAnimationMasks(tagID:Int, tagContent:GAFBytesInput, timelineConfig:GAFTimelineConfig):Void\r\n\t{\r\n\t\tvar length:Int=tagContent.readUnsignedInt();\r\n\t\tvar objectID:Int=0;\r\n\t\tvar regionID:Int=0;\r\n\t\tvar type:String;\r\n\r\n\t\tfor(i in 0...length)\r\n\t\t{\r\n\t\t\tobjectID=tagContent.readUnsignedInt();\r\n\t\t\tregionID=tagContent.readUnsignedInt();\r\n\t\t\tif(tagID==BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_MASKS)\r\n\t\t\t{\r\n\t\t\t\ttype=CAnimationObject.TYPE_TEXTURE;\r\n\t\t\t}\r\n\t\t\telse // BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_MASKS2\r\n\t\t\t{\r\n\t\t\t\ttype=getAnimationObjectTypeString(tagContent.readUnsignedShort());\r\n\t\t\t}\r\n\t\t\ttimelineConfig.animationObjects.addAnimationObject(new CAnimationObject(objectID + \"\", regionID + \"\", type, true));\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static function getAnimationObjectTypeString(type:Int):String\r\n\t{\r\n\t\tvar typeString:String=CAnimationObject.TYPE_TEXTURE;\r\n\t\tswitch(type)\r\n\t\t{\r\n\t\t\tcase 0:\r\n\t\t\t\ttypeString=CAnimationObject.TYPE_TEXTURE;\r\n\t\t\tcase 1:\r\n\t\t\t\ttypeString=CAnimationObject.TYPE_TEXTFIELD;\r\n\t\t\tcase 2:\r\n\t\t\t\ttypeString=CAnimationObject.TYPE_TIMELINE;\r\n\t\t}\r\n\r\n\t\treturn typeString;\r\n\t}\r\n\r\n\tprivate static function readAnimationObjects(tagID:Int, tagContent:GAFBytesInput, timelineConfig:GAFTimelineConfig):Void\r\n\t{\r\n\t\tvar length:Int=tagContent.readUnsignedInt();\r\n\t\tvar objectID:Int=0;\r\n\t\tvar regionID:Int=0;\r\n\t\tvar type:String;\r\n\r\n\t\tfor(i in 0...length)\r\n\t\t{\r\n\t\t\tobjectID=tagContent.readUnsignedInt();\r\n\t\t\tregionID=tagContent.readUnsignedInt();\r\n\t\t\tif(tagID==BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_OBJECTS)\r\n\t\t\t{\r\n\t\t\t\ttype=CAnimationObject.TYPE_TEXTURE;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttype=getAnimationObjectTypeString(tagContent.readUnsignedShort());\r\n\t\t\t}\r\n\t\t\ttimelineConfig.animationObjects.addAnimationObject(new CAnimationObject(objectID + \"\", regionID + \"\", type, false));\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static function readAnimationSequences(tagContent:GAFBytesInput, timelineConfig:GAFTimelineConfig):Void\r\n\t{\r\n\t\tvar length:Int=tagContent.readUnsignedInt();\r\n\t\tvar sequenceID:String;\r\n\t\tvar startFrameNo:Int;\r\n\t\tvar endFrameNo:Int;\r\n\r\n\t\tfor(i in 0...length)\r\n\t\t{\r\n\t\t\tsequenceID=tagContent.readUTF();\r\n\t\t\tstartFrameNo=tagContent.readShort();\r\n\t\t\tendFrameNo=tagContent.readShort();\r\n\t\t\ttimelineConfig.animationSequences.addSequence(new CAnimationSequence(sequenceID, startFrameNo, endFrameNo));\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static function readNamedParts(tagContent:GAFBytesInput, timelineConfig:GAFTimelineConfig):Void\r\n\t{\r\n\t\ttimelineConfig.namedParts=new Map<String,String>();\r\n\r\n\t\tvar length:Int=tagContent.readUnsignedInt();\r\n\t\tvar partID:Int=0;\r\n\t\tfor(i in 0...length)\r\n\t\t{\r\n\t\t\tpartID=tagContent.readUnsignedInt();\r\n\t\t\ttimelineConfig.namedParts[Std.string(partID)]=tagContent.readUTF();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static function readTextFields(tagContent:GAFBytesInput, timelineConfig:GAFTimelineConfig):Void\r\n\t{\r\n\t\tvar length:Int=tagContent.readUnsignedInt();\r\n\t\tvar pivotX:Float;\r\n\t\tvar pivotY:Float;\r\n\t\tvar textFieldID:Int=0;\r\n\t\tvar width:Float;\r\n\t\tvar height:Float;\r\n\t\tvar text:String;\r\n\t\tvar embedFonts:Bool;\r\n\t\tvar multiline:Bool;\r\n\t\tvar wordWrap:Bool;\r\n\t\tvar restrict:String=null;\r\n\t\tvar editable:Bool;\r\n\t\tvar selectable:Bool;\r\n\t\tvar displayAsPassword:Bool;\r\n\t\tvar maxChars:Int=0;\r\n\r\n\t\tvar textFormat:TextStyle;\r\n\r\n\t\tfor(i in 0...length)\r\n\t\t{\r\n\t\t\ttextFieldID=tagContent.readUnsignedInt();\r\n\t\t\tpivotX=tagContent.readFloat();\r\n\t\t\tpivotY=tagContent.readFloat();\r\n\t\t\twidth=tagContent.readFloat();\r\n\t\t\theight=tagContent.readFloat();\r\n\r\n\t\t\ttext=tagContent.readUTF();\r\n\r\n\t\t\tembedFonts=tagContent.readBoolean();\r\n\t\t\tmultiline=tagContent.readBoolean();\r\n\t\t\twordWrap=tagContent.readBoolean();\r\n\r\n\t\t\tvar hasRestrict:Bool=tagContent.readBoolean();\r\n\t\t\tif(hasRestrict)\r\n\t\t\t{\r\n\t\t\t\trestrict=tagContent.readUTF();\r\n\t\t\t}\r\n\r\n\t\t\teditable=tagContent.readBoolean();\r\n\t\t\tselectable=tagContent.readBoolean();\r\n\t\t\tdisplayAsPassword=tagContent.readBoolean();\r\n\t\t\tmaxChars=tagContent.readUnsignedInt();\r\n\r\n\t\t\t// read textFormat\r\n\t\t\tvar alignFlag:Int=tagContent.readUnsignedInt();\r\n\t\t\tvar align:String=null;\r\n\t\t\tswitch(alignFlag)\r\n\t\t\t{\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\talign=TextFormatAlign.LEFT;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\talign=TextFormatAlign.RIGHT;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\talign=TextFormatAlign.CENTER;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\talign=TextFormatAlign.JUSTIFY;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\talign=TextFormatAlign.START;\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\talign=TextFormatAlign.END;\r\n\t\t\t}\r\n\r\n\t\t\tvar blockIndent:Float=tagContent.readUnsignedInt();\r\n\t\t\tvar bold:Bool=tagContent.readBoolean();\r\n\t\t\tvar bullet:Bool=tagContent.readBoolean();\r\n\t\t\tvar color:Int=tagContent.readUnsignedInt();\r\n\r\n\t\t\tvar font:String=tagContent.readUTF();\r\n\t\t\tvar indent:Int=tagContent.readUnsignedInt();\r\n\t\t\tvar italic:Bool=tagContent.readBoolean();\r\n\t\t\tvar kerning:Bool=tagContent.readBoolean();\r\n\t\t\tvar leading:Int=tagContent.readUnsignedInt();\r\n\t\t\tvar leftMargin:Float=tagContent.readUnsignedInt();\r\n\t\t\tvar letterSpacing:Float=tagContent.readFloat();\r\n\t\t\tvar rightMargin:Float=tagContent.readUnsignedInt();\r\n\t\t\tvar size:Int=tagContent.readUnsignedInt();\r\n\r\n\t\t\tvar l:Int=tagContent.readUnsignedInt();\r\n\t\t\tvar tabStops:Array<Dynamic>=[];\r\n\t\t\tfor(j in 0...l)\r\n\t\t\t{\r\n\t\t\t\ttabStops.push(tagContent.readUnsignedInt());\r\n\t\t\t}\r\n\r\n\t\t\tvar target:String=tagContent.readUTF();\r\n\t\t\tvar underline:Bool=tagContent.readBoolean();\r\n\t\t\tvar url:String=tagContent.readUTF();\r\n\r\n\t\t\t/* var display:String=tagContent.readUTF();*/\r\n\r\n\t\t\ttextFormat = new TextStyle();\r\n\t\t\ttextFormat.fontFamily = font;\r\n\t\t\ttextFormat.fontSize = size;\r\n\t\t\ttextFormat.fill = color;\r\n\t\t\ttextFormat.fontWeight = bold ? \"bold\" : \"normal\";\r\n\t\t\ttextFormat.fontStyle = italic ? \"italic\" : \"normal\";\r\n\t\t\t//textFormat. = underline;\r\n\t\t\t//textFormat. = url;\r\n\t\t\t//textFormat. = target;\r\n\t\t\ttextFormat.align = align;\r\n\t\t\t//textFormat. = leftMargin;\r\n\t\t\t//textFormat. = rightMargin;\r\n\t\t\t//textFormat. = blockIndent;\r\n\t\t\t//textFormat. = leading;\r\n\r\n\t\t\t//textFormat.=bullet;\r\n\t\t\t//textFormat.=kerning;\r\n\t\t\t//textFormat.=display;\r\n\t\t\ttextFormat.letterSpacing=letterSpacing;\r\n\t\t\t//textFormat.=tabStops;\r\n\t\t\t//textFormat.=indent;\r\n\r\n\t\t\tvar textFieldObject:CTextFieldObject=new CTextFieldObject(Std.string(textFieldID), text, textFormat,width, height);\r\n\t\t\ttextFieldObject.pivotPoint.x=-pivotX;\r\n\t\t\ttextFieldObject.pivotPoint.y=-pivotY;\r\n\t\t\ttextFieldObject.embedFonts=embedFonts;\r\n\t\t\ttextFieldObject.multiline=multiline;\r\n\t\t\ttextFieldObject.wordWrap=wordWrap;\r\n\t\t\ttextFieldObject.restrict=restrict;\r\n\t\t\ttextFieldObject.editable=editable;\r\n\t\t\ttextFieldObject.selectable=selectable;\r\n\t\t\ttextFieldObject.displayAsPassword=displayAsPassword;\r\n\t\t\ttextFieldObject.maxChars=maxChars;\r\n\t\t\ttimelineConfig.textFields.addTextFieldObject(textFieldObject);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function readAnimationFrames(tagID:Int, startIndex:Int=0, ?framesCount:Int=-1, ?prevFrame:CAnimationFrame=null):Void\r\n\t{\r\n\t\tif(framesCount==-1)\r\n\t\t{\r\n\t\t\tframesCount=_bytes.readUnsignedInt();\r\n\t\t}\r\n\t\tvar missedFrameNumber:Int=0;\r\n\t\tvar filterLength:Int=0;\r\n\t\tvar frameNumber:Int=0;\r\n\t\tvar statesCount:Int=0;\r\n\t\tvar filterType:Int=0;\r\n\t\tvar stateID:Int=0;\r\n\t\tvar zIndex:Int=0;\r\n\t\tvar alpha:Float;\r\n\t\tvar matrix:Matrix;\r\n\t\tvar maskID:String;\r\n\t\tvar hasMask:Bool=false;\r\n\t\tvar hasEffect:Bool=false;\r\n\t\tvar hasActions:Bool=false;\r\n\t\tvar hasColorTransform:Bool=false;\r\n\t\tvar hasChangesInDisplayList:Bool=false;\r\n\r\n\t\tvar timelineConfig:GAFTimelineConfig=_config.timelines[_config.timelines.length - 1];\r\n\t\tvar instance:CAnimationFrameInstance;\r\n\t\tvar currentFrame:CAnimationFrame;\r\n\t\tvar blurFilter:CBlurFilterData;\r\n\t\tvar blurFilters:Map<String,CBlurFilterData>= new Map<String,CBlurFilterData>();\r\n\t\tvar filter:CFilter;\r\n\r\n\t\tif(framesCount!=-1)\r\n\t\t{\r\n\t\t\tfor(i in startIndex...framesCount)\r\n\t\t\t{\r\n\t\t\t\tif(_async /*&&(getTimer()- cycleTime>=20)*/)\r\n\t\t\t\t{\r\n\t\t\t\t\ttrace (\"TODO asynchrone readAnimationFrames\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tframeNumber=_bytes.readUnsignedInt();\r\n\r\n\t\t\t\tif(tagID==BinGAFAssetConfigConverter.TAG_DEFINE_ANIMATION_FRAMES)\r\n\t\t\t\t{\r\n\t\t\t\t\thasChangesInDisplayList=true;\r\n\t\t\t\t\thasActions=false;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\thasChangesInDisplayList=_bytes.readBoolean();\r\n\t\t\t\t\thasActions=_bytes.readBoolean();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(prevFrame!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentFrame=prevFrame.clone(frameNumber);\r\n\r\n\t\t\t\t\tmissedFrameNumber = prevFrame.frameNumber + 1;\r\n\t\t\t\t\twhile (missedFrameNumber < currentFrame.frameNumber) {\r\n\t\t\t\t\t\ttimelineConfig.animationConfigFrames.addFrame(prevFrame.clone(missedFrameNumber));\r\n\t\t\t\t\t\tmissedFrameNumber++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentFrame=new CAnimationFrame(frameNumber);\r\n\r\n\t\t\t\t\tif(currentFrame.frameNumber>1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmissedFrameNumber = 1;\r\n\t\t\t\t\t\twhile (missedFrameNumber < currentFrame.frameNumber) {\r\n\t\t\t\t\t\t\ttimelineConfig.animationConfigFrames.addFrame(new CAnimationFrame(missedFrameNumber));\r\n\t\t\t\t\t\t\tmissedFrameNumber++;\r\n\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(hasChangesInDisplayList)\r\n\t\t\t\t{\r\n\t\t\t\t\tstatesCount=_bytes.readUnsignedInt();\r\n\r\n\t\t\t\t\tfor(j in 0...statesCount)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thasColorTransform=_bytes.readBoolean();\r\n\t\t\t\t\t\thasMask=_bytes.readBoolean();\r\n\t\t\t\t\t\thasEffect=_bytes.readBoolean();\r\n\r\n\t\t\t\t\t\tstateID=_bytes.readUnsignedInt();\r\n\t\t\t\t\t\tzIndex=_bytes.readInt();\r\n\t\t\t\t\t\talpha=_bytes.readFloat();\r\n\t\t\t\t\t\tif(alpha==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\talpha = GAF.maxAlpha;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmatrix = new Matrix(_bytes.readFloat(), _bytes.readFloat(), _bytes.readFloat(),_bytes.readFloat(), _bytes.readFloat(), _bytes.readFloat());\r\n\r\n\t\t\t\t\t\tfilter=null;\r\n\r\n\t\t\t\t\t\tif(hasColorTransform)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar params:Array<Float>=[\r\n\t\t\t\t\t\t\t\t_bytes.readFloat(), _bytes.readFloat(), _bytes.readFloat(),\r\n\t\t\t\t\t\t\t\t_bytes.readFloat(), _bytes.readFloat(), _bytes.readFloat(),\r\n\t\t\t\t\t\t\t\t_bytes.readFloat()];\r\n\t\t\t\t\t\t\tif (filter==null) filter=new CFilter();\r\n\t\t\t\t\t\t\tfilter.addColorTransform(params);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(hasEffect)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (filter==null) filter=new CFilter();\r\n\r\n\t\t\t\t\t\t\tfilterLength=_bytes.readSByte();\r\n\t\t\t\t\t\t\tfor(k in 0...filterLength)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfilterType=_bytes.readUnsignedInt();\r\n\t\t\t\t\t\t\t\tvar warning:String=null;\r\n\r\n\t\t\t\t\t\t\t\tswitch(filterType)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcase BinGAFAssetConfigConverter.FILTER_DROP_SHADOW:\r\n\t\t\t\t\t\t\t\t\t\twarning=readDropShadowFilter(_bytes, filter);\r\n\t\t\t\t\t\t\t\t\tcase BinGAFAssetConfigConverter.FILTER_BLUR:\r\n\t\t\t\t\t\t\t\t\t\twarning=readBlurFilter(_bytes, filter);\r\n\t\t\t\t\t\t\t\t\t\tblurFilter=cast(filter.filterConfigs[filter.filterConfigs.length - 1],CBlurFilterData);\r\n\t\t\t\t\t\t\t\t\t\tif(blurFilter.blurX>=2 && blurFilter.blurY>=2)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tif (!blurFilters.exists(Std.string(stateID)))\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tblurFilters[Std.string(stateID)]=blurFilter;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tblurFilters[Std.string(stateID)]=null;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcase BinGAFAssetConfigConverter.FILTER_GLOW:\r\n\t\t\t\t\t\t\t\t\t\twarning=readGlowFilter(_bytes, filter);\r\n\t\t\t\t\t\t\t\t\tcase BinGAFAssetConfigConverter.FILTER_COLOR_MATRIX:\r\n\t\t\t\t\t\t\t\t\t\twarning=readColorMatrixFilter(_bytes, filter);\r\n\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\ttrace(WarningConstants.UNSUPPORTED_FILTERS);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\ttimelineConfig.addWarning(warning);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(hasMask)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaskID=_bytes.readUnsignedInt()+ \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaskID=\"\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinstance=new CAnimationFrameInstance(stateID + \"\");\r\n\t\t\t\t\t\tinstance.update(zIndex, matrix, alpha, maskID, filter);\r\n\r\n\t\t\t\t\t\tif(maskID!=null && filter!=null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttimelineConfig.addWarning(WarningConstants.FILTERS_UNDER_MASK);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcurrentFrame.addInstance(instance);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcurrentFrame.sortInstances();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(hasActions)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar data:Dynamic;\r\n\t\t\t\t\tvar action:CFrameAction;\r\n\t\t\t\t\tvar count:Int=_bytes.readUnsignedInt();\r\n\t\t\t\t\tfor(a in 0...count)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\taction=new CFrameAction();\r\n\t\t\t\t\t\taction.type=_bytes.readUnsignedInt();\r\n\t\t\t\t\t\taction.scope=_bytes.readUTF();\r\n\r\n\t\t\t\t\t\tvar paramsLength:Int=_bytes.readUnsignedInt();\r\n\t\t\t\t\t\tif(paramsLength>0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar lBytes:Bytes = Bytes.alloc(paramsLength);\r\n\t\t\t\t\t\t\t_bytes.readBytes(lBytes, 0, paramsLength);\r\n\t\t\t\t\t\t\tvar paramsBA:GAFBytesInput = new GAFBytesInput(lBytes);\r\n\t\t\t\t\t\t\tparamsBA.bigEndian = false;\r\n\t\t\t\t\t\t\twhile(paramsBA.position<paramsBA.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\taction.params.push(paramsBA.readUTF());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tparamsBA.close();\r\n\t\t\t\t\t\t\tparamsBA = null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(action.type==CFrameAction.DISPATCH_EVENT &&  action.params[0]==CSound.GAF_PLAY_SOUND &&  action.params.length>3)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif(_ignoreSounds)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcontinue;//do not add sound events if they're ignored\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdata=Json.parse(action.params[3]);\r\n\t\t\t\t\t\t\t//timelineConfig.addSound(data, frameNumber);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcurrentFrame.addAction(action);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimelineConfig.animationConfigFrames.addFrame(currentFrame);\r\n\r\n\t\t\t\tprevFrame=currentFrame;\r\n\t\t\t} //end loop\r\n\r\n\t\t\tmissedFrameNumber = prevFrame.frameNumber + 1;\r\n\t\t\twhile (missedFrameNumber<=timelineConfig.framesCount) {\r\n\t\t\t\ttimelineConfig.animationConfigFrames.addFrame(prevFrame.clone(missedFrameNumber));\r\n\t\t\t\tmissedFrameNumber++;\r\n\t\t\t}\r\n\r\n\t\t\tfor(currentFrame in timelineConfig.animationConfigFrames.frames)\r\n\t\t\t{\r\n\t\t\t\tfor(instance in currentFrame.instances)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(blurFilters[instance.id]!=null && instance.filter!=null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tblurFilter=instance.filter.getBlurFilter();\r\n\t\t\t\t\t\tif(blurFilter!=null && blurFilter.resolution==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tblurFilter.blurX *=0.5;\r\n\t\t\t\t\t\t\tblurFilter.blurY *=0.5;\r\n\t\t\t\t\t\t\tblurFilter.resolution=0.75;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} //end condition\r\n\r\n\t\tdelayedReadNextTag();\r\n\t}\r\n\t\r\n\tprivate function readMaskMaxSizes():Void\r\n\t{\r\n\t\tfor(timeline in _config.timelines)\r\n\t\t{\r\n\t\t\tfor(frame in timeline.animationConfigFrames.frames)\r\n\t\t\t{\r\n\t\t\t\tfor(frameInstance in frame.instances)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar animationObject:CAnimationObject=timeline.animationObjects.getAnimationObject(frameInstance.id);\r\n\t\t\t\t\tif(animationObject.mask)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(animationObject.maxSize==null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tanimationObject.maxSize=new Point();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar maxSize:Point=animationObject.maxSize;\r\n\r\n\t\t\t\t\t\tif(animationObject.type==CAnimationObject.TYPE_TEXTURE)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsHelperRectangle.copyFrom(_textureElementSizes[Std.parseInt(animationObject.regionID)]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(animationObject.type==CAnimationObject.TYPE_TIMELINE)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar maskTimeline:GAFTimelineConfig=null;\r\n\t\t\t\t\t\t\tfor(maskTimeline in _config.timelines)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif(maskTimeline.id==animationObject.regionID)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsHelperRectangle.copyFrom(maskTimeline.bounds);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(animationObject.type==CAnimationObject.TYPE_TEXTFIELD)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar textField:CTextFieldObject=timeline.textFields.textFieldObjectsDictionary[animationObject.regionID];\r\n\t\t\t\t\t\t\tsHelperRectangle.x =-textField.pivotPoint.x;\r\n\t\t\t\t\t\t\tsHelperRectangle.y =-textField.pivotPoint.y;\r\n\t\t\t\t\t\t\tsHelperRectangle.width = textField.width;\r\n\t\t\t\t\t\t\tsHelperRectangle.height = textField.height;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//TODO\r\n\t\t\t\t\t\t//RectangleUtil.getBounds(sHelperRectangle, frameInstance.matrix, sHelperRectangle);\r\n\t\t\t\t\t\tmaxSize.set(\r\n\t\t\t\t\t\t\t\tMath.max(maxSize.x, Math.abs(sHelperRectangle.width)),\r\n\t\t\t\t\t\t\t\tMath.max(maxSize.y, Math.abs(sHelperRectangle.height)));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function endParsing():Void\r\n\t{\r\n\t\t_bytes.close();\r\n\t\t_bytes=null;\r\n\r\n\t\treadMaskMaxSizes();\r\n\r\n\t\tvar itemIndex:Int=0;\r\n\t\t\r\n\t\tif(Math.isNaN(_config.defaultScale))\r\n\t\t{\r\n\t\t\t\r\n\t\t\tif(!Math.isNaN(_defaultScale))\r\n\t\t\t{\r\n\t\t\t\titemIndex=MathUtility.getItemIndex(_config.scaleValues, _defaultScale);\r\n\t\t\t\tif(itemIndex<0)\r\n\t\t\t\t{\r\n\t\t\t\t\tparseError(_defaultScale + ErrorConstants.SCALE_NOT_FOUND);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_config.defaultScale=_config.scaleValues[itemIndex];\r\n\t\t}\r\n\r\n\t\tif(Math.isNaN(_config.defaultContentScaleFactor))\r\n\t\t{\r\n\t\t\titemIndex=0;\r\n\t\t\tif(!Math.isNaN(_defaultContentScaleFactor))\r\n\t\t\t{\r\n\t\t\t\titemIndex=MathUtility.getItemIndex(_config.csfValues, _defaultContentScaleFactor);\r\n\t\t\t\tif(itemIndex<0)\r\n\t\t\t\t{\r\n\t\t\t\t\tparseError(_defaultContentScaleFactor + ErrorConstants.CSF_NOT_FOUND);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_config.defaultContentScaleFactor=_config.csfValues[itemIndex];\r\n\t\t}\r\n\r\n\t\tfor(textureAtlasScale in _config.allTextureAtlases)\r\n\t\t{\r\n\t\t\tfor(textureAtlasCSF in textureAtlasScale.allContentScaleFactors)\r\n\t\t\t{\r\n\t\t\t\tif(MathUtility.equals(_config.defaultContentScaleFactor, textureAtlasCSF.csf))\r\n\t\t\t\t{\r\n\t\t\t\t\ttextureAtlasScale.contentScaleFactor=textureAtlasCSF;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(timelineConfig in _config.timelines)\r\n\t\t{\r\n\t\t\ttimelineConfig.allTextureAtlases=_config.allTextureAtlases;\r\n\r\n\t\t\tfor(textureAtlasScale in _config.allTextureAtlases)\r\n\t\t\t{\r\n\t\t\t\tif(MathUtility.equals(_config.defaultScale, textureAtlasScale.scale))\r\n\t\t\t\t{\r\n\t\t\t\t\ttimelineConfig.textureAtlas=textureAtlasScale;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttimelineConfig.stageConfig=_config.stageConfig;\r\n\r\n\t\t\tcheckForMissedRegions(timelineConfig);\r\n\t\t}\r\n\r\n\t\temit(GAFEvent.COMPLETE, {target:this});\r\n\t}\r\n\t\r\n\tprivate function parseError(message:String):Void\r\n\t{\r\n\t\tif(hasEventListener(GAFEvent.ERROR))\r\n\t\t{\r\n\t\t\temit(GAFEvent.ERROR, {bubbles:false, cancelable:false, text:message});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow message;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var config(get_config, null):GAFAssetConfig;\r\n \tprivate function get_config():GAFAssetConfig\r\n\t{\r\n\t\treturn _config;\r\n\t}\r\n\r\n\tpublic var assetID(get_assetID, null):String;\r\n \tprivate function get_assetID():String\r\n\t{\r\n\t\treturn _assetID;\r\n\t}\r\n\r\n\tpublic var ignoreSounds(null, set_ignoreSounds):Bool;\r\n \tprivate function set_ignoreSounds(ignoreSounds:Bool)\r\n\t{\r\n\t\treturn _ignoreSounds=ignoreSounds;\r\n\t}\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate static function readStageConfig(tagContent:GAFBytesInput, config:GAFAssetConfig):Void\r\n\t{\r\n\t\tvar stageConfig:CStage=new CStage();\r\n\r\n\t\tstageConfig.fps = tagContent.readSByte();\r\n\t\t//stageConfig.color=tagContent.readInt();\r\n\t\tstageConfig.color=tagContent.readFloat();\r\n\t\tstageConfig.width=tagContent.readUnsignedShort();\r\n\t\tstageConfig.height=tagContent.readUnsignedShort();\r\n\t\t\r\n\t\tconfig.stageConfig=stageConfig;\r\n\t}\r\n\t\r\n\tprivate static function readDropShadowFilter(source:GAFBytesInput, filter:CFilter):String\r\n\t{\r\n\t\tvar color:Array<Dynamic>=readColorValue(source);\r\n\t\tvar blurX:Float=source.readFloat();\r\n\t\tvar blurY:Float=source.readFloat();\r\n\t\tvar angle:Float=source.readFloat();\r\n\t\tvar distance:Float=source.readFloat();\r\n\t\tvar strength:Float=source.readFloat();\r\n\t\tvar inner:Bool=source.readBoolean();\r\n\t\tvar knockout:Bool=source.readBoolean();\r\n\r\n\t\treturn filter.addDropShadowFilter(blurX, blurY, color[1], color[0], angle, distance, strength, inner, knockout);\r\n\t}\r\n\r\n\tprivate static function readBlurFilter(source:GAFBytesInput, filter:CFilter):String\r\n\t{\r\n\t\treturn filter.addBlurFilter(source.readFloat(), source.readFloat());\r\n\t}\r\n\r\n\tprivate static function readGlowFilter(source:GAFBytesInput, filter:CFilter):String\r\n\t{\r\n\t\tvar color:Array<Dynamic>=readColorValue(source);\r\n\t\tvar blurX:Float=source.readFloat();\r\n\t\tvar blurY:Float=source.readFloat();\r\n\t\tvar strength:Float=source.readFloat();\r\n\t\tvar inner:Bool=source.readBoolean();\r\n\t\tvar knockout:Bool=source.readBoolean();\r\n\r\n\t\treturn filter.addGlowFilter(blurX, blurY, color[1], color[0], strength, inner, knockout);\r\n\t}\r\n\r\n\tprivate static function readColorMatrixFilter(source:GAFBytesInput, filter:CFilter):String\r\n\t{\r\n\t\tvar matrix:Array<Float>=new Array<Float>();\r\n\t\tfor(i in 0...20)\r\n\t\t{\r\n\t\t\tmatrix[i]=source.readFloat();\r\n\t\t}\r\n\r\n\t\treturn filter.addColorMatrixFilter(matrix);\r\n\t}\r\n\r\n\tprivate static function readColorValue(source:GAFBytesInput):Array<Float>\r\n\t{\r\n\t\tvar argbValue:Int=source.readUnsignedInt();\r\n\t\tvar alpha:Float=Std.int(((argbValue>>24)& 0xFF)* 100 / 255)/ 100;\r\n\t\tvar color:Int=argbValue & 0xFFFFFF;\r\n\r\n\t\treturn [alpha, color];\r\n\t}\r\n\t\r\n\t// -------------\r\n\t\r\n\tpublic var defaultScale(null, set_defaultScale):Float;\r\n \tprivate function set_defaultScale(defaultScale:Float)\r\n\t{\r\n\t\treturn _defaultScale=defaultScale;\r\n\t}\r\n\r\n\tpublic var defaultCSF(null, set_defaultCSF):Float;\r\n \tprivate function set_defaultCSF(csf:Float)\r\n\t{\r\n\t\treturn _defaultContentScaleFactor=csf;\r\n\t}\r\n\t\r\n}","package com.github.haxePixiGAF.data.tagfx;\r\n\r\nimport com.github.haxePixiGAF.data.textures.TextureWrapper;\r\nimport pixi.core.math.Point;\r\nimport pixi.interaction.EventEmitter;\r\n\r\n/**\r\n * Dispatched when he texture is decoded. It can only be used when the callback has been executed.\r\n */\r\n//[Event(name=\"textureReady\", type=\"flash.events.Event\")]\r\n\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass TAGFXBase extends EventEmitter implements ITAGFX\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic static inline var EVENT_TYPE_TEXTURE_READY:String=\"textureReady\";\r\n\r\n\tpublic static inline var SOURCE_TYPE_BITMAP_DATA:String=\"sourceTypeBitmapData\";\r\n\tpublic static inline var SOURCE_TYPE_BITMAP:String=\"sourceTypeBitmap\";\r\n\tpublic static inline var SOURCE_TYPE_PNG_BA:String=\"sourceTypePNGBA\";\r\n\tpublic static inline var SOURCE_TYPE_ATF_BA:String=\"sourceTypeATFBA\";\r\n\tpublic static inline var SOURCE_TYPE_PNG_URL:String=\"sourceTypePNGURL\";\r\n\tpublic static inline var SOURCE_TYPE_ATF_URL:String=\"sourceTypeATFURL\";\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _texture:TextureWrapper;\r\n\tprivate var _textureSize:Point;\r\n\tprivate var _textureScale:Float=-1;\r\n\tprivate var _textureFormat:String;\r\n\tprivate var _source:Dynamic;\r\n\tprivate var _clearSourceAfterTextureCreated:Bool=false;\r\n\tprivate var _isReady:Bool=false;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new()\r\n\t{\r\n\t\tsuper();\r\n\t\t//if(Capabilities.isDebugger &&\r\n\t\t\t\t//getQualifiedClassName(this)==\"com.catalystapps.gaf.data::TAGFXBase\")\r\n\t\t//{\r\n\t\t\t//throw new AbstractClassError();\r\n\t\t//}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function onTextureReady(texture:TextureWrapper):Void\r\n\t{\r\n\t\t_isReady=true;\r\n\t\t//dispatchEvent(new Event(EVENT_TYPE_TEXTURE_READY));\r\n\t\temit(EVENT_TYPE_TEXTURE_READY);\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var texture(get_texture, null):TextureWrapper;\r\n \tprivate function get_texture():TextureWrapper\r\n\t{\r\n\t\treturn _texture;\r\n\t}\r\n\r\n\tpublic var textureSize(get_textureSize, set_textureSize):Point;\r\n \tprivate function get_textureSize():Point\r\n\t{\r\n\t\treturn _textureSize;\r\n\t}\r\n\r\n\tprivate function set_textureSize(value:Point):Point\r\n\t{\r\n\t\treturn _textureSize=value;\r\n\t}\r\n\r\n\tpublic var textureScale(get_textureScale, set_textureScale):Float;\r\n \tprivate function get_textureScale():Float\r\n\t{\r\n\t\treturn _textureScale;\r\n\t}\r\n\r\n\tprivate function set_textureScale(value:Float):Float\r\n\t{\r\n\t\treturn _textureScale=value;\r\n\t}\r\n\r\n\tpublic var textureFormat(get_textureFormat, set_textureFormat):String;\r\n \tprivate function get_textureFormat():String\r\n\t{\r\n\t\treturn _textureFormat;\r\n\t}\r\n\r\n\tprivate function set_textureFormat(value:String):String\r\n\t{\r\n\t\treturn _textureFormat=value;\r\n\t}\r\n\r\n\tpublic var sourceType(get_sourceType, null):String;\r\n \tprivate function get_sourceType():String\r\n\t{\r\n\t\t//TODO\r\n\t\t//throw new AbstractMethodError();\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic var source(get_source, null):Dynamic;\r\n \tprivate function get_source():Dynamic\r\n\t{\r\n\t\treturn _source;\r\n\t}\r\n\r\n\t//public var clearSourceAfterTextureCreated(get_clearSourceAfterTextureCreated, set_clearSourceAfterTextureCreated):Bool;\r\n \t//private function get_clearSourceAfterTextureCreated():Bool\r\n\t//{\r\n\t\t//return _clearSourceAfterTextureCreated;\r\n\t//}\r\n//\r\n\t//private function set_clearSourceAfterTextureCreated(value:Bool):Bool\r\n\t//{\r\n\t\t//return _clearSourceAfterTextureCreated=value;\r\n\t//}\r\n\r\n\tpublic var ready(get_ready, null):Bool;\r\n \tprivate function get_ready():Bool\r\n\t{\r\n\t\treturn _isReady;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n}","package com.github.haxePixiGAF.data.tagfx;\r\nimport com.github.haxePixiGAF.data.textures.TextureWrapper;\r\nimport pixi.core.textures.BaseTexture;\r\n\r\n/**\r\n * @author Mathieu Anthoine\r\n */\r\nclass TAGFXsourcePixi extends TAGFXBase\r\n{\r\n\r\n\tprivate var bob:String;\r\n\t\r\n\tpublic function new(source:String) \r\n\t{\r\n\t\tsuper();\r\n\t\t_source = source;\r\n\t\tbob = source;\r\n\t}\r\n\t\r\n\toverride private function get_sourceType(): String {\r\n\t\treturn \"Texture_Pixi\";\r\n\t}\r\n\r\n\toverride private function get_texture(): TextureWrapper\r\n\t{\r\n\t\treturn new TextureWrapper(BaseTexture.fromImage(_source));\r\n\t}\r\n\t\r\n}","package com.github.haxePixiGAF.data.textures;\r\n\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.shapes.Rectangle;\r\nimport pixi.core.textures.BaseTexture;\r\nimport pixi.core.textures.Texture;\r\n\r\n/**\r\n * PixiJs Wrapper of the Starling Texture Class\r\n * @author Mathieu Anthoine\r\n */\r\nclass TextureWrapper extends Texture\r\n{\r\n\t\r\n\tpublic function new(?pBaseTexture:BaseTexture, ?pFrame:Rectangle, ?pCrop:Rectangle, ?pTrim:Rectangle, ?pRotate:Bool) \r\n\t{\r\n\t\tsuper(pBaseTexture,pFrame,pCrop,pTrim,pRotate);\t\t\r\n\t}\r\n\t\r\n\tpublic var base (get_base, null):BaseTexture;\r\n\tprivate function get_base ():BaseTexture {\r\n\t\treturn null;\r\n\t\t//return baseTexture;\r\n\t}\r\n\t\r\n\t/// The Context3DTextureFormat of the underlying texture data.\r\n\tpublic var format(get_format, null) :  String;\r\n\tprivate function get_format(): String\r\n\t{\r\n\t\t//TODO\r\n\t\treturn \"bgra\";\r\n\t}\r\n\t\r\n\tpublic var frameHeight(get_frameHeight, null):Float;\r\n\tprivate function get_frameHeight():Float \r\n\t{\r\n\t\treturn frame!=null ? frame.height : height;\r\n\t}\r\n\t\r\n\tpublic var frameWidth(get_frameWidth, null):Float;\r\n\tprivate function get_frameWidth():Float \r\n\t{\r\n\t\treturn frame!=null ? frame.width : width;\r\n\t}\r\n\t\r\n\tpublic var mipMapping(get_mipMapping, null): Bool;\r\n\tprivate function get_mipMapping():Bool \r\n\t{\r\n\t\treturn false;\r\n\t\t//return base.mipmap;\r\n\t}\r\n\t\r\n\tpublic var nativeHeight(get_nativeHeight, null):Float;\r\n\tprivate function get_nativeHeight():Float \r\n\t{\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic var nativeWidth(get_nativeWidth, null):Float;\r\n\tprivate function get_nativeWidth():Float \r\n\t{\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic var premultipliedAlpha(get_premultipliedAlpha, null):Bool;\r\n\tprivate function get_premultipliedAlpha():Bool \r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tpublic var root(get_root, null): TextureWrapper;\r\n\tprivate function get_root():TextureWrapper \r\n\t{\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic var scale(get_scale, null):Float;\r\n\tprivate function get_scale():Float \r\n\t{\r\n\t\treturn 1;\r\n\t}\r\n\t\r\n\tpublic var transformationMatrix(get_transformationMatrix, null) :Matrix;\r\n\tprivate function get_transformationMatrix():Matrix \r\n\t{\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic var transformationMatrixToRoot(get_transformationMatrixToRoot, null) :Matrix;\r\n\tprivate function get_transformationMatrixToRoot():Matrix \r\n\t{\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/** Creates a texture that contains a region (in pixels) of another texture. The new\r\n\t *  texture will reference the base texture; no data is duplicated.\r\n\t *\r\n\t *  @param texture  The texture you want to create a SubTexture from.\r\n\t *  @param region   The region of the parent texture that the SubTexture will show\r\n\t *                  (in points).\r\n\t *  @param frame    If the texture was trimmed, the frame rectangle can be used to restore\r\n\t *                  the trimmed area.\r\n\t *  @param rotated  If true, the SubTexture will show the parent region rotated by\r\n\t *                  90 degrees (CCW).\r\n\t *  @param scaleModifier  The scale factor of the new texture will be calculated by\r\n\t *                  multiplying the parent texture's scale factor with this value.\r\n\t */\r\n\tpublic static function fromTexture(texture:TextureWrapper, region:Rectangle=null,\r\n\t\t\t\t\t\t\t\t\t   frame:Rectangle=null, rotated:Bool=false,\r\n\t\t\t\t\t\t\t\t\t   scaleModifier:Float=1.0):TextureWrapper\r\n\t{\r\n\t\treturn new SubTexture(texture, region, false, frame, rotated, scaleModifier);\r\n\t}\r\n\t\r\n\tpublic static var maxSize(get_maxSize, null) : Int;\r\n\tprivate static function get_maxSize():Int \r\n\t{\r\n\t\t//var target:Starling = Starling.current;\r\n\t\t//var profile:String = target ? target.profile : \"baseline\";\r\n\r\n\t\t//if (profile == \"baseline\" || profile == \"baselineConstrained\")\r\n\t\t\t//return 2048;\r\n\t\t//else\r\n\t\t\t//return 4096;\r\n\t\t\r\n\t\treturn 4096;\r\n\t}\r\n\t\r\n}","package com.github.haxePixiGAF.data.textures;\r\n\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.shapes.Rectangle;\r\nimport pixi.core.textures.BaseTexture;\r\n\r\nusing com.github.haxePixiGAF.utils.MatrixUtility;\r\n\r\n/**\r\n * TODO: check\r\n * AS3 Conversion of Starling SubTexture class\r\n * @author Mathieu Anthoine\r\n */\r\n\r\n/** A SubTexture represents a section of another texture. This is achieved solely by\r\n *  manipulation of texture coordinates, making the class very efficient. \r\n *\r\n *<p><em>Note that it is OK to create subtextures of subtextures.</em></p>\r\n */\r\nclass SubTexture extends TextureWrapper\r\n{\r\n\tprivate var _parent:TextureWrapper;\r\n\tprivate var _ownsParent:Bool=false;\r\n\tprivate var _region:Rectangle;\r\n\tprivate var _rotated:Bool=false;\r\n\tprivate var _scale:Float;\t\r\n\tprivate var _transformationMatrix:Matrix;\r\n\tprivate var _transformationMatrixToRoot:Matrix;\r\n\r\n\r\n\t/** Creates a new SubTexture containing the specified region of a parent texture.\r\n\t *\r\n\t *  @param parent\t The texture you want to create a SubTexture from.\r\n\t *  @param region\t The region of the parent texture that the SubTexture will show\r\n\t *\t\t\t\t\t(in points). If<code>null</code>, the complete area of the parent.\r\n\t *  @param ownsParent If<code>true</code>, the parent texture will be disposed\r\n\t *\t\t\t\t\tautomatically when the SubTexture is disposed.\r\n\t *  @param frame\t  If the texture was trimmed, the frame rectangle can be used to restore\r\n\t *\t\t\t\t\tthe trimmed area.\r\n\t *  @param rotated\tIf true, the SubTexture will show the parent region rotated by\r\n\t *\t\t\t\t\t90 degrees(CCW).\r\n\t *  @param scaleModifier  The scale factor of the SubTexture will be calculated by\r\n\t *\t\t\t\t\tmultiplying the parent texture's scale factor with this value.\r\n\t */\r\n\tpublic function new(pParent:TextureWrapper, pRegion:Rectangle=null, pOwnsParent:Bool=false, pFrame:Rectangle=null, pRotated:Bool=false, pScaleModifier:Float=1)\r\n\t{\t\r\n\t\t\r\n\t\tsuper(pParent.baseTexture, pRegion,null,null,pRotated);\r\n\t\tsetTo(pParent, pRegion, pOwnsParent, pFrame, pRotated, pScaleModifier);\r\n\t\t\r\n\t}\r\n\t\r\n\toverride private function get_base ():BaseTexture {\r\n\t\treturn _parent.baseTexture;\r\n\t}\r\n\t\r\n\toverride private function get_frameHeight():Float \r\n\t{\r\n\t\treturn frame.height;\r\n\t}\r\n\t\r\n\toverride private function get_frameWidth():Float \r\n\t{\r\n\t\treturn frame.width;\r\n\t}\r\n\t\r\n\toverride private function get_mipMapping():Bool \r\n\t{\r\n\t\treturn _parent.mipMapping;\r\n\t}\r\n\t\r\n\toverride private function get_nativeHeight():Float \r\n\t{\r\n\t\treturn height * _scale;\r\n\t}\r\n\t\r\n\toverride private function get_nativeWidth():Float \r\n\t{\r\n\t\treturn width * _scale;\r\n\t}\r\n\t\r\n\toverride private function get_format():String \r\n\t{\r\n\t\treturn _parent.format;\r\n\t}\r\n\t\r\n\toverride private function get_premultipliedAlpha():Bool \r\n\t{\r\n\t\treturn _parent.premultipliedAlpha;\r\n\t}\r\n\t\r\n\toverride private function get_root():TextureWrapper \r\n\t{\r\n\t\treturn _parent.root;\r\n\t}\r\n\t\r\n\toverride private function get_scale():Float \r\n\t{\r\n\t\treturn _scale;\r\n\t}\r\n\t\r\n\toverride private function get_transformationMatrix():Matrix \r\n\t{\r\n\t\treturn _transformationMatrix;\r\n\t}\r\n\t\r\n\toverride private function get_transformationMatrixToRoot():Matrix \r\n\t{\r\n\t\treturn _transformationMatrixToRoot;\r\n\t}\r\n\t\r\n\t/** \r\n\t *\r\n\t *<p>Textures are supposed to be immutable, and Starling uses this assumption for\r\n\t *  optimizations and simplifications all over the place. However, in some situations where\r\n\t *  the texture is not accessible to the outside, this can be overruled in order to avoid\r\n\t *  allocations.</p>\r\n\t */\r\n\tpublic function setTo(pParent:TextureWrapper, pRegion:Rectangle=null, pOwnsParent:Bool=false, pFrame:Rectangle=null, pRotated:Bool=false, pScaleModifier:Float=1):Void\r\n\t{\r\n\t\tif(_region==null) _region=new Rectangle(0,0,0,0);\r\n\t\tif (pRegion!=null) {\r\n\t\t\t_region.x = pRegion.x;\r\n\t\t\t_region.y = pRegion.y;\r\n\t\t\t_region.width = pRegion.width;\r\n\t\t\t_region.height = pRegion.height;\r\n\t\t} else {\r\n\t\t\t_region.x = 0;\r\n\t\t\t_region.y = 0;\r\n\t\t\t_region.width = pParent.width;\r\n\t\t\t_region.height = pParent.height;\r\n\t\t}\r\n\r\n\t\t//if(pFrame!=null)\r\n\t\t//{\r\n\t\t\t//if (frame!=null) {\r\n\t\t\t\t//frame.x=pFrame.x;\r\n\t\t\t\t//frame.y=pFrame.y;\r\n\t\t\t\t//frame.width=pFrame.width;\r\n\t\t\t\t//frame.height=pFrame.height;\r\n\t\t\t//}\r\n\t\t\t//else frame=pFrame.clone();\r\n\t\t//}\r\n\t\t//else frame=null;\r\n\r\n\t\t_parent=pParent;\r\n\t\t_ownsParent=pOwnsParent;\r\n\t\t_rotated=pRotated;\r\n\t\t\r\n\t\tif (frame!=null) {\r\n\t\t\tframe.width=(pRotated ? _region.height:_region.width)/ pScaleModifier;\r\n\t\t\tframe.height=(pRotated ? _region.width:_region.height)/ pScaleModifier;\r\n\t\t}\r\n\t\t\r\n\t\t_scale = (_parent!=null ? _parent.scale : 1) * pScaleModifier;\r\n\r\n\t\t//if(frame!=null &&(frame.x>0 || frame.y>0 ||\r\n\t\t\t//frame.x+frame.width<width || frame.y+frame.height<height))\r\n\t\t//{\r\n\t\t\t//trace(\"[Starling] Warning:frames inside the texture's region are unsupported.\");\r\n\t\t//}\r\n\r\n\t\tupdateMatrices();\r\n\t}\r\n\r\n\tprivate function updateMatrices():Void\r\n\t{\r\n\t\tif (_transformationMatrix != null) _transformationMatrix.identity();\r\n\t\telse _transformationMatrix=new Matrix();\r\n\r\n\t\tif(_transformationMatrixToRoot!=null) _transformationMatrixToRoot.identity();\r\n\t\telse _transformationMatrixToRoot=new Matrix();\r\n\r\n\t\tif(_rotated)\r\n\t\t{\r\n\t\t\t_transformationMatrix.translate(0, -1);\r\n\t\t\t_transformationMatrix.rotate(Math.PI / 2.0);\r\n\t\t}\r\n\r\n\t\t_transformationMatrix.scale(_region.width  / _parent.width, _region.height / _parent.height);\r\n\t\t_transformationMatrix.translate(_region.x  / _parent.width, _region.y  / _parent.height);\r\n\r\n\t\tvar texture:SubTexture=this;\r\n\t\twhile(texture!=null)\r\n\t\t{\r\n\t\t\t_transformationMatrixToRoot.concat(texture._transformationMatrix);\r\n\t\t\t\r\n\t\t\tif (Std.is(texture.parent,SubTexture)) texture=cast(texture.parent,SubTexture);\r\n\t\t\telse texture = null;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/** Disposes the parent texture if this texture owns it. */\r\n\tpublic override function destroy(?destroyBase:Bool):Void\r\n\t{\r\n\t\tif (_ownsParent) {\r\n\t\t\t_parent.destroy();\r\n\t\t}\r\n\t\tsuper.destroy(destroyBase);\r\n\t}\r\n\r\n\t/** The texture which the SubTexture is based on. */\r\n\tpublic var parent(get_parent, null):TextureWrapper;\r\n \tprivate function get_parent():TextureWrapper { return _parent;}\r\n\t\r\n\t/** Indicates if the parent texture is disposed when this object is disposed. */\r\n\tpublic var ownsParent(get_ownsParent, null):Bool;\r\n \tprivate function get_ownsParent():Bool { return _ownsParent;}\r\n\t\r\n\t/** If true, the SubTexture will show the parent region rotated by 90 degrees(CCW). */\r\n\tpublic var rotated(get_rotated, null):Bool;\r\n \tprivate function get_rotated():Bool { return _rotated;}\r\n\r\n\t/** The region of the parent texture that the SubTexture is showing(in points).\r\n\t *\r\n\t *<p>CAUTION:not a copy, but the actual object! Do not modify!</p>*/\r\n\tpublic var region(get_region, null):Rectangle;\r\n \tprivate function get_region():Rectangle {\r\n\t\treturn _region;\r\n\t}\t\r\n\t\r\n}","package com.github.haxePixiGAF.data.textures;\r\n\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\n/**\r\n * AS3 Conversion of Starling TextureAtlas class\r\n * @author Mathieu Anthoine\r\n */\r\n\r\n/** A texture atlas is a collection of many smaller textures in one big image. This class\r\n *  is used to access textures from such an atlas.\r\n *  \r\n *<p>Using a texture atlas for your textures solves two problems:</p>\r\n *  \r\n *<ul>\r\n *\t<li>Whenever you switch between textures, the batching of image objects is disrupted.</li>\r\n *\t<li>Any Stage3D texture has to have side lengths that are powers of two. Starling hides \r\n *\t\tthis limitation from you, but at the cost of additional graphics memory.</li>\r\n *</ul>\r\n *  \r\n *<p>By using a texture atlas, you avoid both texture switches and the power-of-two \r\n *  limitation. All textures are within one big \"super-texture\", and Starling takes care that \r\n *  the correct part of this texture is displayed.</p>\r\n *  \r\n *<p>There are several ways to create a texture atlas. One is to use the atlas generator \r\n *  script that is bundled with Starling's sibling, the<a href=\"http://www.sparrow-framework.org\">\r\n *  Sparrow framework</a>. It was only tested in Mac OS X, though. A great multi-platform \r\n *  alternative is the commercial tool<a href=\"http://www.texturepacker.com\">\r\n *  Texture Packer</a>.</p>\r\n *  \r\n *<p>Whatever tool you use, Starling expects the following file format:</p>\r\n * \r\n *<listing>\r\n * \t&lt;TextureAtlas imagePath='atlas.png'&gt;\r\n * \t  &lt;SubTexture name='texture_1' x='0'  y='0' width='50' height='50'/&gt;\r\n * \t  &lt;SubTexture name='texture_2' x='50' y='0' width='20' height='30'/&gt;\r\n * \t&lt;/TextureAtlas&gt;\r\n *</listing>\r\n *  \r\n *<strong>Texture Frame</strong>\r\n *\r\n *<p>If your images have transparent areas at their edges, you can make use of the \r\n *<code>frame</code>property of the Texture class. Trim the texture by removing the \r\n *  transparent edges and specify the original texture size like this:</p>\r\n * \r\n *<listing>\r\n * \t&lt;SubTexture name='trimmed' x='0' y='0' height='10' width='10'\r\n * \t\tframeX='-10' frameY='-10' frameWidth='30' frameHeight='30'/&gt;\r\n *</listing>\r\n *\r\n *<strong>Texture Rotation</strong>\r\n *\r\n *<p>Some atlas generators can optionally rotate individual textures to optimize the texture\r\n *  distribution. This is supported via the boolean attribute \"rotated\". If it is set to\r\n *<code>true</code>for a certain subtexture, this means that the texture on the atlas\r\n *  has been rotated by 90 degrees, clockwise. Starling will undo that rotation by rotating\r\n *  it counter-clockwise.</p>\r\n *\r\n *<p>In this case, the positional coordinates(<code>x, y, width, height</code>)\r\n *  are expected to point at the subtexture as it is present on the atlas(in its rotated\r\n *  form), while the \"frame\" properties must describe the texture in its upright form.</p>\r\n *\r\n */\r\nclass TextureAtlas\r\n{\r\n\tprivate var _atlasTexture:TextureWrapper;\r\n\tprivate var _subTextures:Map<String,TextureWrapper>;\r\n\tprivate var _subTextureNames:Array<String>;\r\n\t\r\n\t/** helper objects */\r\n\tprivate static var sNames:Array<String>=[];\r\n\t\r\n\t/** Create a texture atlas from a texture by parsing the regions from an XML file. */\r\n\tpublic function new(texture:TextureWrapper)\r\n\t{\r\n\t\t_subTextures=new Map<String,TextureWrapper>();\r\n\t\t_atlasTexture=texture;\r\n\t}\r\n\t\r\n\t/** Disposes the atlas texture. */\r\n\tpublic function dispose():Void\r\n\t{\r\n\t\t_atlasTexture.destroy();\r\n\t}\r\n\t\r\n\t/** Retrieves a SubTexture by name. Returns<code>null</code>if it is not found. */\r\n\tpublic function getTexture(name:String):TextureWrapper\r\n\t{\r\n\t\treturn _subTextures[name];\r\n\t}\r\n\t\r\n\t/** Returns all textures that start with a certain string, sorted alphabetically\r\n\t *(especially useful for \"MovieClip\"). */\r\n\tpublic function getTextures(prefix:String=\"\", ?out:Array<TextureWrapper>  ):Array<TextureWrapper>\r\n\t{\r\n\t\tif (out == null) out = new Array<TextureWrapper>();\r\n\t\tfor (name in getNames(prefix, sNames)) out[out.length] = getTexture(name);// avoid 'push'\r\n\t\t\r\n\t\t//sNames.length=0;\r\n\t\tsNames=[];\r\n\t\treturn out;\r\n\t}\r\n\t\r\n\t/** Returns all texture names that start with a certain string, sorted alphabetically. */\r\n\tpublic function getNames(prefix:String=\"\", ?out:Array<String>):Array<String>\r\n\t{\r\n\t\tif (out == null) out = new Array<String>();\r\n\t\tvar name:String;\r\n\t\t\r\n\t\tif(_subTextureNames==null)\r\n\t\t{\r\n\t\t\t// optimization:store sorted list of texture names\r\n\t\t\t_subTextureNames=[];\r\n\t\t\tfor(name in _subTextures.keys())_subTextureNames[_subTextureNames.length]=name;\r\n\t\t\t_subTextureNames.sort(function (pA:String,pB:String):Int { return pA.toLowerCase()<pB.toLowerCase() ? -1 : 1;});\r\n\t\t}\r\n\r\n\t\tfor(name in _subTextureNames) {\r\n\t\t\tif(name.indexOf(prefix)==0) out[out.length]=name;\r\n\t\t}\r\n\t\t\r\n\t\treturn out;\r\n\t}\r\n\t\r\n\t/** Returns the region rectangle associated with a specific name, or<code>null</code>\r\n\t *  if no region with that name has been registered. */\r\n\tpublic function getRegion(name:String):Rectangle\r\n\t{\r\n\t\tvar subTexture:SubTexture=cast _subTextures[name];\r\n\t\treturn subTexture!=null ? subTexture.region:null;\r\n\t}\r\n\t\r\n\t/** Returns the frame rectangle of a specific region, or<code>null</code>if that region \r\n\t *  has no frame. */\r\n\tpublic function getFrame(name:String):Rectangle\r\n\t{\r\n\t\tvar subTexture:SubTexture=cast _subTextures[name];\r\n\t\treturn subTexture!=null ? subTexture.frame:null;\r\n\t}\r\n\t\r\n\t/** If true, the specified region in the atlas is rotated by 90 degrees(clockwise). The\r\n\t *  SubTexture is thus rotated counter-clockwise to cancel out that transformation. */\r\n\tpublic function getRotation(name:String):Bool\r\n\t{\r\n\t\tvar subTexture:SubTexture=cast _subTextures[name];\r\n\t\treturn subTexture!=null ? subTexture.rotated:false;\r\n\t}\r\n\r\n\t/** Adds a named region for a SubTexture(described by rectangle with coordinates in\r\n\t *  points)with an optional frame. */\r\n\tpublic function addRegion(name:String, region:Rectangle, frame:Rectangle=null, rotated:Bool=false):Void\r\n\t{\r\n\t\t_subTextures[name]=new SubTexture(_atlasTexture, region, false, frame, rotated);\r\n\t\t_subTextureNames=null;\r\n\t}\r\n\t\r\n\t/** Removes a region with a certain name. */\r\n\tpublic function removeRegion(name:String):Void\r\n\t{\r\n\t\tvar subTexture:SubTexture=cast _subTextures[name];\r\n\t\t//if(subTexture) subTexture.dispose();\r\n\t\tif(subTexture!=null) subTexture.destroy();\r\n\t\t_subTextures.remove(name);\r\n\t\t_subTextureNames=null;\r\n\t}\r\n\t\r\n\t/** The base texture that makes up the atlas. */\r\n\tpublic var texture(get_texture, null):TextureWrapper;\r\n \tprivate function get_texture():TextureWrapper { return _atlasTexture;}\r\n\t\r\n\t// utility methods\r\n\r\n\tprivate static function parseBool(value:String):Bool\r\n\t{\r\n\t\treturn value.toLowerCase()==\"true\";\r\n\t}\r\n}","package com.github.haxePixiGAF.display;\r\n\r\nimport com.github.haxePixiGAF.data.config.CFilter;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.display.DisplayObject.DestroyOptions;\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.Point;\r\nimport haxe.extern.EitherType;\r\n\r\n/**\r\n * ...\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFContainer extends Container implements IGAFDisplayObject implements IMaxSize\r\n{\r\n\r\n\tprivate static var HELPER_MATRIX:Matrix=new Matrix();\r\n\t\r\n\tprivate var _maxSize:Point;\r\n\r\n\t//private var _filterChain:GAFFilterChain;\r\n\tprivate var _filterConfig:CFilter;\r\n\tprivate var _filterScale:Float;\r\n\t\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic var transformationMatrix(get_transformationMatrix,set_transformationMatrix):Matrix;\r\n\tprivate function get_transformationMatrix():Matrix {\r\n\t\treturn localTransform;\r\n\t\t\r\n\t}\r\n\tprivate function set_transformationMatrix(matrix:Matrix):Matrix {\r\n\t\treturn localTransform=matrix;\r\n\t}\r\n\t\r\n\tpublic var maxSize(get_maxSize, set_maxSize):Point;\r\n \tprivate function get_maxSize():Point\r\n\t{\r\n\t\treturn _maxSize;\r\n\t}\r\n\r\n\tprivate function set_maxSize(value:Point):Point\r\n\t{\r\n\t\treturn _maxSize=value;\r\n\t}\r\n\t\r\n\t\t/**  */\r\n\tpublic function setFilterConfig(value:CFilter, scale:Float=1):Void\r\n\t{\r\n\t\t//TODO: setFilterConfig\r\n\t\t//trace (\"TODO: setFilterConfig\");\r\n\t\t\r\n\t\t//if(!Starling.current.contextValid)\r\n\t\t//{\r\n\t\t\t//return;\r\n\t\t//}\r\n//\r\n\t\t//if(_filterConfig !=value || _filterScale !=scale)\r\n\t\t//{\r\n\t\t\t//if(value!=null)\r\n\t\t\t//{\r\n\t\t\t\t//_filterConfig=value;\r\n\t\t\t\t//_filterScale=scale;\r\n//\r\n\t\t\t\t//if(_filterChain)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//_filterChain.dispose();\r\n\t\t\t\t//}\r\n\t\t\t\t//else\r\n\t\t\t\t//{\r\n\t\t\t\t\t//_filterChain=new GAFFilterChain();\r\n\t\t\t\t//}\r\n//\r\n\t\t\t\t//_filterChain.setFilterData(_filterConfig);\r\n//\r\n\t\t\t\t//filter=_filterChain;\r\n\t\t\t//}\r\n\t\t\t//else\r\n\t\t\t//{\r\n\t\t\t\t//if(filter)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//filter.dispose();\r\n\t\t\t\t\t//filter=null;\r\n\t\t\t\t//}\r\n//\r\n\t\t\t\t//_filterChain=null;\r\n\t\t\t\t//_filterConfig=null;\r\n\t\t\t\t//_filterScale=NaN;\r\n\t\t\t//}\r\n\t\t//}\r\n\t}\r\n\t\r\n\tpublic function invalidateOrientation():Void\r\n\t{\r\n\t\t//_orientationChanged=true;\r\n\t}\r\n\t\r\n\tpublic var pivotMatrix(get_pivotMatrix, null):Matrix;\r\n \tprivate function get_pivotMatrix():Matrix\r\n\t{\r\n\t\t//HELPER_MATRIX.copyFrom(_pivotMatrix);\r\n\t\tHELPER_MATRIX.identity();\r\n\r\n\t\t//if(_pivotChanged)\r\n\t\t//{\r\n\t\t\t//HELPER_MATRIX.tx=pivotX;\r\n\t\t\t//HELPER_MATRIX.ty=pivotY;\r\n\t\t//}\r\n\r\n\t\treturn HELPER_MATRIX;\r\n\t}\r\n\t\r\n}","package com.github.haxePixiGAF.display;\r\n\r\nimport com.github.haxePixiGAF.data.config.CFilter;\r\nimport haxe.extern.EitherType;\r\nimport js.Lib;\r\nimport pixi.core.display.DisplayObject.DestroyOptions;\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.sprites.Sprite;\r\n\r\nusing com.github.haxePixiGAF.utils.MatrixUtility;\r\n\r\n/**\r\n * TODO : check doublons (scale, scaleX, pivot, pivotX) et supprimer ce qui est en trop\r\n * @author Mathieu Anthoine\r\n */\r\n/**\r\n * GAFImage represents static GAF display object that is part of the<code>GAFMovieClip</code>.\r\n */\r\nclass GAFImage extends Sprite implements IGAFImage implements IMaxSize implements IGAFDebug\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//private static inline var V_DATA_ATTR:String=\"position\";\r\n\r\n\t//private static var HELPER_POINT:Point=new Point();\r\n\t//private static var HELPER_POINT_3D:Vector3D=new Vector3D();\r\n\tprivate static var HELPER_MATRIX:Matrix=new Matrix();\r\n\t//private static var HELPER_MATRIX_3D:Matrix3D=new Matrix3D();\r\n\r\n\tprivate var _assetTexture:IGAFTexture;\r\n\r\n\t//private var _filterChain:GAFFilterChain;\r\n\t//private var _filterConfig:CFilter;\r\n\t//private var _filterScale:Float;\r\n\r\n\tprivate var _maxSize:Point;\r\n\r\n\t//private var _pivotChanged:Bool=false;\r\n\r\n\tpublic var __debugOriginalAlpha:Float=null;\r\n\r\n\t//private var _orientationChanged:Bool=false;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Creates a new<code>GAFImage</code>instance.\r\n\t * @param assetTexture<code>IGAFTexture</code>from which it will be created.\r\n\t */\r\n\tpublic function new(assetTexture:IGAFTexture)\r\n\t{\r\n\t\t_assetTexture=assetTexture.clone();\r\n\r\n\t\tsuper(_assetTexture.texture);\r\n\t\t\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Creates a new instance of GAFImage.\r\n\t */\r\n\tpublic function copy():GAFImage\r\n\t{\r\n\t\treturn new GAFImage(_assetTexture);\r\n\t}\r\n\r\n\tpublic function invalidateOrientation():Void\r\n\t{\r\n\t\t//_orientationChanged = true;\r\n\t}\r\n\r\n\tpublic var debugColors(null, set_debugColors):Array<Int>;\r\n \tprivate function set_debugColors(value:Array<Int>):Array<Int>\r\n\t{\r\n\t\treturn null;\r\n\t\t\r\n\t\t/*var alpha0:Float;\r\n\t\tvar alpha1:Float;\r\n\r\n\t\tswitch(value.length)\r\n\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\tcolor=value[0];\r\n\t\t\t\talpha=(value[0]>>>24)/ 255;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tsetVertexColor(0, value[0]);\r\n\t\t\t\tsetVertexColor(1, value[0]);\r\n\t\t\t\tsetVertexColor(2, value[1]);\r\n\t\t\t\tsetVertexColor(3, value[1]);\r\n\r\n\t\t\t\talpha0=(value[0]>>>24)/ 255;\r\n\t\t\t\talpha1=(value[1]>>>24)/ 255;\r\n\t\t\t\tsetVertexAlpha(0, alpha0);\r\n\t\t\t\tsetVertexAlpha(1, alpha0);\r\n\t\t\t\tsetVertexAlpha(2, alpha1);\r\n\t\t\t\tsetVertexAlpha(3, alpha1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tsetVertexColor(0, value[0]);\r\n\t\t\t\tsetVertexColor(1, value[0]);\r\n\t\t\t\tsetVertexColor(2, value[1]);\r\n\t\t\t\tsetVertexColor(3, value[2]);\r\n\r\n\t\t\t\talpha0=(value[0]>>>24)/ 255;\r\n\t\t\t\tsetVertexAlpha(0, alpha0);\r\n\t\t\t\tsetVertexAlpha(1, alpha0);\r\n\t\t\t\tsetVertexAlpha(2,(value[1]>>>24)/ 255);\r\n\t\t\t\tsetVertexAlpha(3,(value[2]>>>24)/ 255);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tsetVertexColor(0, value[0]);\r\n\t\t\t\tsetVertexColor(1, value[1]);\r\n\t\t\t\tsetVertexColor(2, value[2]);\r\n\t\t\t\tsetVertexColor(3, value[3]);\r\n\r\n\t\t\t\tsetVertexAlpha(0,(value[0]>>>24)/ 255);\r\n\t\t\t\tsetVertexAlpha(1,(value[1]>>>24)/ 255);\r\n\t\t\t\tsetVertexAlpha(2,(value[2]>>>24)/ 255);\r\n\t\t\t\tsetVertexAlpha(3,(value[3]>>>24)/ 255);\r\n\t\t\t\tbreak;\r\n\t\t}*/\r\n\t\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * Change the texture of the<code>GAFImage</code>to a new one.\r\n\t * @param newTexture the new<code>IGAFTexture</code>which will be used to replace existing one.\r\n\t */\r\n\tpublic function changeTexture(newTexture:IGAFTexture):Void\r\n\t{\r\n\t\ttexture=newTexture.texture;\r\n\t\t//readjustSize();\r\n\t\t_assetTexture.copyFrom(newTexture);\r\n\t}\r\n\r\n\tpublic function setFilterConfig(value:CFilter, scale:Float=1):Void\r\n\t{\r\n\t\t//trace (\"setFilterConfig: TODO\");\r\n\t\t\r\n\t\t/*if(!Starling.current.contextValid)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(_filterConfig !=value || _filterScale !=scale)\r\n\t\t{\r\n\t\t\tif(value)\r\n\t\t\t{\r\n\t\t\t\t_filterConfig=value;\r\n\t\t\t\t_filterScale=scale;\r\n\r\n\t\t\t\tif(_filterChain)\r\n\t\t\t\t{\r\n\t\t\t\t\t_filterChain.dispose();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t_filterChain=new GAFFilterChain();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_filterChain.setFilterData(_filterConfig);\r\n\r\n\t\t\t\tfilter=_filterChain;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(filter)\r\n\t\t\t\t{\r\n\t\t\t\t\tfilter.dispose();\r\n\t\t\t\t\tfilter=null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_filterChain=null;\r\n\t\t\t\t_filterConfig=null;\r\n\t\t\t\t_filterScale=NaN;\r\n\t\t\t}\r\n\t\t}*/\r\n\t}\r\n\r\n\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function __debugHighlight():Void\r\n\t{\r\n\t\tif(Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\t__debugOriginalAlpha=alpha;\r\n\t\t}\r\n\t\talpha=1;\r\n\t}\r\n\r\n\tpublic function __debugLowlight():Void\r\n\t{\r\n\t\tif(Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\t__debugOriginalAlpha=alpha;\r\n\t\t}\r\n\t\talpha=.05;\r\n\t}\r\n\r\n\tpublic function __debugResetLight():Void\r\n\t{\r\n\t\tif(!Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\talpha=__debugOriginalAlpha;\r\n\t\t\t__debugOriginalAlpha=null;\r\n\t\t}\r\n\t}\r\n\r\n\t//[Inline]\r\n\tprivate function updateTransformMatrix():Void\r\n\t{\r\n\t\t//if(_orientationChanged)\r\n\t\t//{\r\n\t\t\t//transformationMatrix=transformationMatrix;\r\n\t\t\t//_orientationChanged=false;\r\n\t\t//}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Disposes all resources of the display object.\r\n\t */\r\n\toverride public function destroy(?options:EitherType<Bool, DestroyOptions>):Void\r\n\t{\r\n\t\t//if(filter!=null)\r\n\t\t//{\r\n\t\t\t//filter.dispose();\r\n\t\t\t//filter=null;\r\n\t\t//}\r\n\t\t_assetTexture=null;\r\n\t\t//_filterConfig=null;\r\n\r\n\t\tsuper.destroy(options);\r\n\t}\r\n\r\n\t\r\n\t//TODO: getGAFGetbounds\r\n\t\r\n\t//override public function getBounds(targetSpace:DisplayObject, resultRect:Rectangle=null):Rectangle\r\n\t//{\r\n\t\t//if(!resultRect)resultRect=new Rectangle(0,0,0,0);\r\n//\r\n\t\t//if(targetSpace==this)// optimization\r\n\t\t//{\r\n\t\t\t//vertexData.getPoint(3,V_DATA_ATTR, HELPER_POINT);\r\n\t\t\t//resultRect.setTo(0.0, 0.0, HELPER_POINT.x, HELPER_POINT.y);\r\n\t\t//}\r\n\t\t//else if(targetSpace==parent && rotation==0.0 && isEquivalent(skewX, skewY))// optimization\r\n\t\t//{\r\n\t\t\t//var scaleX:Float=scaleX;\r\n\t\t\t//var scaleY:Float=scaleY;\r\n\t\t\t//vertexData.getPoint(3,V_DATA_ATTR, HELPER_POINT);\r\n\t\t\t//resultRect.setTo(x - pivotX * scaleX,\t  y - pivotY * scaleY,\r\n\t\t\t\t\t//HELPER_POINT.x * scaleX, HELPER_POINT.y * scaleY);\r\n\t\t\t//if(scaleX<0){ resultRect.width  *=-1;resultRect.x -=resultRect.width;}\r\n\t\t\t//if(scaleY<0){ resultRect.height *=-1;resultRect.y -=resultRect.height;}\r\n\t\t//}\r\n\t\t//else if(is3D && stage)\r\n\t\t//{\r\n\t\t\t//stage.getCameraPosition(targetSpace, HELPER_POINT_3D);\r\n\t\t\t//getTransformationMatrix3D(targetSpace, HELPER_MATRIX_3D);\r\n\t\t\t//vertexData.getBoundsProjected(V_DATA_ATTR,HELPER_MATRIX_3D, HELPER_POINT_3D, 0, 4, resultRect);\r\n\t\t//}\r\n\t\t//else\r\n\t\t//{\r\n\t\t\t//getTransformationMatrix(targetSpace, HELPER_MATRIX);\r\n\t\t\t//vertexData.getBounds(V_DATA_ATTR,HELPER_MATRIX, 0, 4, resultRect);\r\n\t\t//}\r\n//\r\n\t\t//return resultRect;\r\n\t//}\r\n\r\n\tprivate function isEquivalent(a:Float, b:Float, epsilon:Float=0.0001):Bool\r\n\t{\r\n\t\treturn(a - epsilon<b)&&(a + epsilon>b);\r\n\t}\r\n\r\n\tpublic var pivotX(null, set_pivotX):Float;\r\n \tprivate function set_pivotX(value:Float):Float\r\n\t{\r\n\t\t//_pivotChanged = true;\r\n\t\treturn pivot.x = value;\r\n\t}\r\n\r\n\tpublic var pivotY(null, set_pivotY):Float;\r\n \tprivate function set_pivotY(value:Float):Float\r\n\t{\r\n\t\t//_pivotChanged=true;\r\n\t\treturn pivot.y=value;\r\n\t}\r\n\r\n\t//override public function get x():Float\r\n\t//{\r\n\t\t//updateTransformMatrix();\r\n\t\t//return super.x;\r\n\t//}\r\n\r\n\t//override public function get y():Float\r\n\t//{\r\n\t\t//updateTransformMatrix();\r\n\t\t//return super.y;\r\n\t//}\r\n\r\n\t//override public var rotation(get_rotation, set_rotation):Float;\r\n \t//private function get_rotation():Float\r\n\t//{\r\n\t\t//updateTransformMatrix();\r\n\t\t//return super.rotation;\r\n\t//}\r\n\r\n\tpublic var scaleX(get_scaleX, null):Float;\r\n \tprivate function get_scaleX():Float\r\n\t{\r\n\t\t//updateTransformMatrix();\r\n\t\treturn scale.x;\r\n\t}\r\n\r\n\tpublic var scaleY(get_scaleY, null):Float;\r\n \tprivate function get_scaleY():Float\r\n\t{\r\n\t\t//updateTransformMatrix();\r\n\t\treturn scale.y;\r\n\t}\r\n\r\n\tpublic var skewX(get_skewX, null):Float;\r\n \tprivate function get_skewX():Float\r\n\t{\r\n\t\t//updateTransformMatrix();\r\n\t\treturn skew.x;\r\n\t}\r\n\r\n\tpublic var skewY(get_skewY, null):Float;\r\n \tprivate function get_skewY():Float\r\n\t{\r\n\t\t//updateTransformMatrix();\r\n\t\treturn skew.y;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var maxSize(get_maxSize, set_maxSize):Point;\r\n \tprivate function get_maxSize():Point\r\n\t{\r\n\t\treturn _maxSize;\r\n\t}\r\n\r\n\tprivate function set_maxSize(value:Point):Point\r\n\t{\r\n\t\treturn _maxSize=value;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current<code>IGAFTexture</code>.\r\n\t * @return current<code>IGAFTexture</code>\r\n\t */\r\n\tpublic var assetTexture(get_assetTexture, null):IGAFTexture;\r\n \tprivate function get_assetTexture():IGAFTexture\r\n\t{\r\n\t\treturn _assetTexture;\r\n\t}\r\n\r\n\tpublic var pivotMatrix(get_pivotMatrix, null):Matrix;\r\n \tprivate function get_pivotMatrix():Matrix\r\n\t{\r\n\t\tHELPER_MATRIX.copyFrom(_assetTexture.pivotMatrix);\r\n\t\t//if(_pivotChanged)\r\n\t\t//{\r\n\t\t\t//HELPER_MATRIX.tx=pivotX;\r\n\t\t\t//HELPER_MATRIX.ty=pivotY;\r\n\t\t//}\r\n\t\t\r\n\t\treturn HELPER_MATRIX;\r\n\t}\r\n\t\r\n\tpublic var transformationMatrix(get_transformationMatrix,set_transformationMatrix):Matrix;\r\n\tprivate function get_transformationMatrix():Matrix {\r\n\t\treturn localTransform;\r\n\t\t\r\n\t}\r\n\tprivate function set_transformationMatrix(matrix:Matrix):Matrix {\r\n\t\treturn localTransform=matrix;\r\n\t}\r\n\t\r\n\tpublic var textureSmoothing(get_textureSmoothing,set_textureSmoothing):String;\r\n\tprivate function get_textureSmoothing():String {\r\n\t\t//return _style.textureSmoothing;\r\n\t\t//TODO get_textureSmoothing\r\n\t\treturn \"\";\r\n\t}\r\n\t\r\n\tprivate function set_textureSmoothing(value:String):String {\r\n\t\t//TODO set_textureSmoothing\r\n\t\t//return _style.textureSmoothing = value;\r\n\t\treturn \"\";\r\n\t}\r\n\t\r\n}","package com.github.haxePixiGAF.display;\r\n\r\nimport com.github.haxePixiGAF.data.GAFAsset;\r\nimport com.github.haxePixiGAF.data.GAFTimeline;\r\nimport com.github.haxePixiGAF.data.GAFTimelineConfig;\r\nimport com.github.haxePixiGAF.data.config.CAnimationFrame;\r\nimport com.github.haxePixiGAF.data.config.CAnimationFrameInstance;\r\nimport com.github.haxePixiGAF.data.config.CAnimationObject;\r\nimport com.github.haxePixiGAF.data.config.CAnimationSequence;\r\nimport com.github.haxePixiGAF.data.config.CFilter;\r\nimport com.github.haxePixiGAF.data.config.CFrameAction;\r\nimport com.github.haxePixiGAF.data.config.CTextFieldObject;\r\nimport com.github.haxePixiGAF.data.config.CTextureAtlas;\r\nimport com.github.haxePixiGAF.events.GAFEvent;\r\nimport com.github.haxePixiGAF.utils.DebugUtility;\r\nimport haxe.extern.EitherType;\r\nimport js.Browser;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.display.DisplayObject;\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\nusing com.github.haxePixiGAF.utils.MatrixUtility;\r\nusing com.github.haxePixiGAF.utils.EventEmitterUtility;\r\n\r\n/**\r\n * GAFMovieClip represents animation display object that is ready to be used in Starling display list. It has\r\n * all controls for animation familiar from standard MovieClip(<code>play</code>,<code>stop</code>,<code>gotoAndPlay,</code>etc.)\r\n * and some more like<code>loop</code>,<code>nPlay</code>,<code>setSequence</code>that helps manage playback\r\n */\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFMovieClip extends GAFContainer implements IAnimatable\r\n{\r\n\t/** Dispatched when playhead reached first frame of sequence */\r\n\tpublic static inline var EVENT_TYPE_SEQUENCE_START:String = \"typeSequenceStart\";\r\n\t\r\n\t/** Dispatched when playhead reached end frame of sequence */\r\n\tpublic static inline var EVENT_TYPE_SEQUENCE_END:String = \"typeSequenceEnd\";\r\n\t\r\n\t/** Dispatched whenever the movie has displayed its last frame. */\r\n\t// GAFEvent.COMPLETE\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//TODO TextureSmoothing.BILINEAR\r\n\tprivate var _smoothing:String = \"\";// TextureSmoothing.BILINEAR;\r\n\r\n\tprivate var _displayObjectsDictionary:Map<String,IGAFDisplayObject>;\r\n\tprivate var _stencilMasksDictionary:Map<String,DisplayObject>;\r\n\tprivate var _displayObjectsVector:Array<IGAFDisplayObject>;\r\n\tprivate var _imagesVector:Array<IGAFImage>;\r\n\tprivate var _mcVector:Array<GAFMovieClip>;\r\n\r\n\tprivate var _playingSequence:CAnimationSequence;\r\n\tprivate var _timelineBounds:Rectangle;\r\n\t//TODO _boundsAndPivot\r\n\t//private var _boundsAndPivot:MeshBatch;\r\n\tprivate var _config:GAFTimelineConfig;\r\n\tprivate var _gafTimeline:GAFTimeline;\r\n\r\n\tprivate var _loop:Bool=true;\r\n\tprivate var _skipFrames:Bool=true;\r\n\tprivate var _reset:Bool=false;\r\n\tprivate var _masked:Bool=false;\r\n\tprivate var _inPlay:Bool=false;\r\n\tprivate var _hidden:Bool=false;\r\n\tprivate var _reverse:Bool=false;\r\n\tprivate var _started:Bool=false;\r\n\tprivate var _disposed:Bool=false;\r\n\tprivate var _hasFilter:Bool=false;\r\n\tprivate var _useClipping:Bool=false;\r\n\tprivate var _alphaLessMax:Bool=false;\r\n\tprivate var _addToJuggler:Bool=false;\r\n\r\n\tprivate var _scale:Float;\r\n\tprivate var _contentScaleFactor:Float;\r\n\tprivate var _currentTime:Float=0;\r\n\t// Hold the current time spent animating\r\n\tprivate var _lastFrameTime:Float=0;\r\n\tprivate var _frameDuration:Float;\r\n\t\r\n\tprivate var _previousTime:Float=-1;\r\n\r\n\tprivate var _nextFrame:Int=0;\r\n\tprivate var _startFrame:Int=0;\r\n\tprivate var _finalFrame:Int=0;\r\n\tprivate var _currentFrame:Int=0;\r\n\tprivate var _totalFrames:Int=0;\r\n\r\n\tprivate var __debugOriginalAlpha:Float=null;\r\n\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Creates a new GAFMovieClip instance.\r\n\t *\r\n\t * @param gafTimeline<code>GAFTimeline</code>from what<code>GAFMovieClip</code>will be created\r\n\t * @param fps defines the frame rate of the movie clip. If not set - the stage config frame rate will be used instead.\r\n\t * @param addToJuggler if<code>true - GAFMovieClip</code>will listen<code>requestAnimationFrame</code>\r\n\t * and removed automatically on<code>dispose</code>\r\n\t */\r\n\tpublic function new(gafTimeline:GAFTimeline, pFps:Int=-1, addToJuggler:Bool=true)\r\n\t{\r\n\t\tsuper();\r\n\t\t\r\n\t\t_gafTimeline=gafTimeline;\r\n\t\t_config=gafTimeline.config;\r\n\t\t_scale=gafTimeline.scale;\r\n\t\t_contentScaleFactor=gafTimeline.contentScaleFactor;\r\n\t\t_addToJuggler=addToJuggler;\r\n\r\n\t\tinitialize(gafTimeline.textureAtlas, gafTimeline.gafAsset);\r\n\r\n\t\tif(_config.bounds!=null)\r\n\t\t{\r\n\t\t\t_timelineBounds=_config.bounds.clone();\r\n\t\t}\r\n\t\tif(pFps>0)\r\n\t\t{\r\n\t\t\tfps=pFps;\r\n\t\t}\r\n\r\n\t\tdraw();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/** \r\n\t * Returns the child display object that exists with the specified ID. Use to obtain animation's parts\r\n\t *\r\n\t * @param id Child ID\r\n\t * @return The child display object with the specified ID\r\n\t */\r\n\tpublic function getChildByID(id:String):IGAFDisplayObject\r\n\t{\r\n\t\treturn _displayObjectsDictionary[id];\r\n\t}\r\n\r\n\t/** \r\n\t * Returns the mask display object that exists with the specified ID. Use to obtain animation's masks\r\n\t *\r\n\t * @param id Mask ID\r\n\t * @return The mask display object with the specified ID\r\n\t */\r\n\tpublic function getMaskByID(id:String):DisplayObject\r\n\t{\r\n\t\treturn _stencilMasksDictionary[id];\r\n\t}\r\n\r\n\t/**\r\n\t * Shows mask display object that exists with the specified ID. Used for debug purposes only!\r\n\t *\r\n\t * @param id Mask ID\r\n\t */\r\n\tpublic function showMaskByID(id:String):Void\r\n\t{\r\n\t\tvar maskObject:IGAFDisplayObject=_displayObjectsDictionary[id];\r\n\t\tvar maskAsDisplayObject:DisplayObject=cast(maskObject, DisplayObject);\r\n\t\tvar stencilMaskObject:DisplayObject=_stencilMasksDictionary[id];\r\n\t\tif(maskObject!=null && stencilMaskObject!=null)\r\n\t\t{\r\n\t\t\tmaskAsDisplayObject.mask=stencilMaskObject;\r\n\t\t\taddChild(stencilMaskObject);\r\n\t\t\taddChild(maskAsDisplayObject);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttrace(\"WARNING:mask object is missing. It might be disposed.\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Hides mask display object that previously has been shown using<code>showMaskByID</code>method.\r\n\t * Used for debug purposes only!\r\n\t *\r\n\t * @param id Mask ID\r\n\t */\r\n\tpublic function hideMaskByID(id:String):Void\r\n\t{\r\n\t\tvar maskObject:IGAFDisplayObject=_displayObjectsDictionary[id];\r\n\t\tvar maskAsDisplayObject:DisplayObject=cast(maskObject, DisplayObject);\r\n\t\tvar stencilMaskObject:DisplayObject=_stencilMasksDictionary[id];\r\n\t\tif(stencilMaskObject!=null)\r\n\t\t{\r\n\t\t\tif(stencilMaskObject.parent==this)\r\n\t\t\t{\r\n\t\t\t\tstencilMaskObject.parent.mask=null;\r\n\t\t\t\tremoveChild(stencilMaskObject);\r\n\t\t\t\tremoveChild(maskAsDisplayObject);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttrace(\"WARNING:mask object is missing. It might be disposed.\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Clear playing sequence. If animation already in play just continue playing without sequence limitation\r\n\t */\r\n\tpublic function clearSequence():Void\r\n\t{\r\n\t\t_playingSequence=null;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns id of the sequence where animation is right now. If there is no sequences - returns<code>null</code>.\r\n\t *\r\n\t * @return id of the sequence\r\n\t */\r\n\tpublic var currentSequence(get_currentSequence, null):String;\r\n \tprivate function get_currentSequence():String\r\n\t{\r\n\t\tvar sequence:CAnimationSequence=_config.animationSequences.getSequenceByFrame(currentFrame);\r\n\t\tif(sequence!=null)\r\n\t\t{\r\n\t\t\treturn sequence.id;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Set sequence to play\r\n\t *\r\n\t * @param id Sequence ID\r\n\t * @param play Play or not immediately.<code>true</code>- starts playing from sequence start frame.<code>false</code>- go to sequence start frame and stop\r\n\t * @return sequence to play\r\n\t */\r\n\tpublic function setSequence(id:String, play:Bool=true):CAnimationSequence\r\n\t{\r\n\t\t_playingSequence=_config.animationSequences.getSequenceByID(id);\r\n\r\n\t\tif(_playingSequence!=null)\r\n\t\t{\r\n\t\t\tvar startFrame:Int=_reverse ? _playingSequence.endFrameNo - 1:_playingSequence.startFrameNo;\r\n\t\t\tif(play)\r\n\t\t\t{\r\n\t\t\t\tgotoAndPlay(startFrame);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tgotoAndStop(startFrame);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn _playingSequence;\r\n\t}\r\n\r\n\t/**\r\n\t * Moves the playhead in the timeline of the movie clip<code>play()</code>or<code>play(false)</code>.\r\n\t * Or moves the playhead in the timeline of the movie clip and all child movie clips<code>play(true)</code>.\r\n\t * Use<code>play(true)</code>in case when animation contain nested timelines for correct playback right after\r\n\t * initialization(like you see in the original swf file).\r\n\t * @param applyToAllChildren Specifies whether playhead should be moved in the timeline of the movie clip\r\n\t *(<code>false</code>)or also in the timelines of all child movie clips(<code>true</code>).\r\n\t */\r\n\tpublic function play(applyToAllChildren:Bool=false):Void\r\n\t{\r\n\t\t\r\n\t\t_started=true;\r\n\r\n\t\tif(applyToAllChildren)\r\n\t\t{\r\n\t\t\tvar i:Int=_mcVector.length;\r\n\t\t\twhile(i-->0)\r\n\t\t\t{\r\n\t\t\t\t_mcVector[i]._started=true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_play(applyToAllChildren, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Stops the playhead in the movie clip<code>stop()</code>or<code>stop(false)</code>.\r\n\t * Or stops the playhead in the movie clip and in all child movie clips<code>stop(true)</code>.\r\n\t * Use<code>stop(true)</code>in case when animation contain nested timelines for full stop the\r\n\t * playhead in the movie clip and in all child movie clips.\r\n\t * @param applyToAllChildren Specifies whether playhead should be stopped in the timeline of the\r\n\t * movie clip(<code>false</code>)or also in the timelines of all child movie clips(<code>true</code>)\r\n\t */\r\n\tpublic function stop(applyToAllChildren:Bool=false):Void\r\n\t{\r\n\t\t\r\n\t\t_started=false;\r\n\r\n\t\tif(applyToAllChildren)\r\n\t\t{\r\n\t\t\tvar i:Int=_mcVector.length;\r\n\t\t\twhile(i-->0)\r\n\t\t\t{\r\n\t\t\t\t_mcVector[i]._started=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_stop(applyToAllChildren, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Brings the playhead to the specified frame of the movie clip and stops it there. First frame is \"1\"\r\n\t *\r\n\t * @param frame A number representing the frame number, or a string representing the label of the frame, to which the playhead is sent.\r\n\t */\r\n\tpublic function gotoAndStop(frame:Dynamic):Void\r\n\t{\r\n\t\tcheckAndSetCurrentFrame(frame);\r\n\r\n\t\tstop();\r\n\t}\r\n\r\n\t/**\r\n\t * Starts playing animation at the specified frame. First frame is \"1\"\r\n\t *\r\n\t * @param frame A number representing the frame number, or a string representing the label of the frame, to which the playhead is sent.\r\n\t */\r\n\tpublic function gotoAndPlay(frame:Dynamic):Void\r\n\t{\r\n\t\tcheckAndSetCurrentFrame(frame);\r\n\r\n\t\tplay();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the<code>loop</code>value to the GAFMovieClip instance and for the all children.\r\n\t */\r\n\tpublic function loopAll(loop:Bool):Void\r\n\t{\r\n\t\t//TODO: loop\r\n\t\t//loop=loop;\r\n\r\n\t\tvar i:Int=_mcVector.length;\r\n\t\twhile(i-->0)\r\n\t\t{\r\n\t\t\t_mcVector[i].loop=loop;\r\n\t\t}\r\n\t}\r\n\r\n\t/** \r\n\t * Advances all objects by a certain time(in seconds).\r\n\t * @see starling.animation.IAnimatable\r\n\t */\r\n\tpublic function advanceTime(passedTime:Float):Void\r\n\t{\r\n\t\tif (_previousTime==-1) _previousTime = passedTime;\r\n\t\tvar lTime:Float = (passedTime - _previousTime) / 1000;\r\n\t\t_previousTime = passedTime;\r\n\r\n\t\tif(_disposed)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if(_config.disposed)\r\n\t\t{\r\n\t\t\tdestroy();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(_inPlay && _frameDuration !=Math.POSITIVE_INFINITY)\r\n\t\t{\r\n\t\t\t_currentTime +=lTime;\r\n\r\n\t\t\tvar framesToPlay:Int=Std.int((_currentTime - _lastFrameTime)/ _frameDuration);\r\n\t\t\tif(_skipFrames)\r\n\t\t\t{\r\n\t\t\t\t//here we skip the drawing of all frames to be played right now, but the last one\r\n\t\t\t\tfor(i in 0...framesToPlay)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(_inPlay)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchangeCurrentFrame((i + 1)!=framesToPlay);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse //if a playback was Interrupted by some action or an event\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(!_disposed)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdraw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(framesToPlay>0)\r\n\t\t\t{\r\n\t\t\t\tchangeCurrentFrame(false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(_mcVector!=null)\r\n\t\t{\r\n\t\t\tfor(i in 0..._mcVector.length)\r\n\t\t\t{\r\n\t\t\t\t_mcVector[i].advanceTime(passedTime);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (_addToJuggler) Browser.window.requestAnimationFrame(advanceTime);\r\n\t}\r\n\r\n\t/** Shows bounds of a whole animation with a pivot point.\r\n\t * Used for debug purposes.\r\n\t */\r\n\tpublic function showBounds(value:Bool):Void\r\n\t{\r\n\t\tif(_config.bounds!=null)\r\n\t\t{\r\n\t\t\t//TODO showBounds\r\n\t\t\ttrace (\"TODO showBounds\");\r\n\t\t\t\r\n\t\t\t//if(!_boundsAndPivot)\r\n\t\t\t//{\r\n\t\t\t\t//_boundsAndPivot=new MeshBatch();\r\n\t\t\t\t//updateBounds(_config.bounds);\r\n\t\t\t//}\r\n//\r\n\t\t\t//if(value)\r\n\t\t\t//{\r\n\t\t\t\t//addChild(_boundsAndPivot);\r\n\t\t\t//}\r\n\t\t\t//else\r\n\t\t\t//{\r\n\t\t\t\t//removeChild(_boundsAndPivot);\r\n\t\t\t//}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new instance of GAFMovieClip.\r\n\t */\r\n\tpublic function copy():GAFMovieClip\r\n\t{\r\n\t\treturn new GAFMovieClip(_gafTimeline, Std.int(fps), _addToJuggler);\r\n\t}\r\n\t\r\n\t/**\r\n\t * give access to fields created dynamically\r\n\t * @param\t\r\n\t */\r\n\r\n\t \r\n\tpublic function getField (pName:String) {\r\n\t\tif (!Reflect.hasField(this, pName)) throw \"Field \"+pName+\" does not exist.\";\r\n\t\treturn Reflect.field(this,pName);\r\n\t}\r\n\t \r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t// --------------------------------------------------------------------------\r\n\r\n\tprivate function _gotoAndStop(frame:Dynamic):Void\r\n\t{\r\n\t\tcheckAndSetCurrentFrame(frame);\r\n\r\n\t\t_stop();\r\n\t}\r\n\r\n\tprivate function _play(applyToAllChildren:Bool=false, calledByUser:Bool=false):Void\r\n\t{\r\n\t\tif(_inPlay && !applyToAllChildren)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar i:Int=0, l:Int=0;\r\n\r\n\t\tif(_totalFrames>1)\r\n\t\t{\r\n\t\t\t_inPlay=true;\r\n\t\t}\r\n\r\n\t\tif(applyToAllChildren && _config.animationConfigFrames.frames.length>0)\r\n\t\t{\r\n\t\t\tvar frameConfig:CAnimationFrame=_config.animationConfigFrames.frames[_currentFrame];\r\n\t\t\tif(frameConfig.actions!=null)\r\n\t\t\t{\r\n\t\t\t\tvar action:CFrameAction;\r\n\t\t\t\tvar l:UInt = frameConfig.actions.length;\r\n\t\t\t\tfor(i in 0...l)\r\n\t\t\t\t{\r\n\t\t\t\t\taction=frameConfig.actions[i];\r\n\t\t\t\t\tif(action.type==CFrameAction.STOP\r\n\t\t\t\t\t\t\t||(action.type==CFrameAction.GOTO_AND_STOP\r\n\t\t\t\t\t\t\t&& Std.parseInt(action.params[0])==currentFrame))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_inPlay=false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar child:Container;\r\n\t\t\tvar childMC:GAFMovieClip;\r\n\t\t\tl = children.length;\r\n\t\t\tfor(i in 0...l)\r\n\t\t\t{\r\n\t\t\t\tchild=cast(getChildAt(i),Container);\r\n\t\t\t\tif(Std.is(child, GAFMovieClip))\r\n\t\t\t\t{\r\n\t\t\t\t\tchildMC=cast(child, GAFMovieClip);\r\n\t\t\t\t\tif(calledByUser)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchildMC.play(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchildMC._play(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trunActions();\r\n\r\n\t\t_reset=false;\r\n\t}\r\n\r\n\tprivate function _stop(applyToAllChildren:Bool=false, calledByUser:Bool=false):Void\r\n\t{\r\n\t\t_inPlay=false;\r\n\r\n\t\tif(applyToAllChildren\r\n\t\t&& _config.animationConfigFrames.frames.length>0)\r\n\t\t{\r\n\t\t\tvar child:Container;\r\n\t\t\tvar childMC:GAFMovieClip;\r\n\t\t\tfor(i in 0...children.length)\r\n\t\t\t{\r\n\t\t\t\tchild = cast (getChildAt(i), Container);\r\n\t\t\t\tif(Std.is(child, GAFMovieClip))\r\n\t\t\t\t{\r\n\t\t\t\t\tchildMC=cast(child, GAFMovieClip);\r\n\t\t\t\t\tif(calledByUser)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchildMC.stop(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchildMC._stop(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate function checkPlaybackEvents():Void\r\n\t{\r\n\t\tvar sequence:CAnimationSequence;\r\n\t\tif(hasEventListener(EVENT_TYPE_SEQUENCE_START))\r\n\t\t{\r\n\t\t\tsequence=_config.animationSequences.getSequenceStart(_currentFrame + 1);\r\n\t\t\tif(sequence!=null)\r\n\t\t\t{\r\n\t\t\t\temit(EVENT_TYPE_SEQUENCE_START,{target:this,bubbles:false,data:sequence});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(hasEventListener(EVENT_TYPE_SEQUENCE_END))\r\n\t\t{\r\n\t\t\tsequence=_config.animationSequences.getSequenceEnd(_currentFrame + 1);\r\n\t\t\tif(sequence!=null)\r\n\t\t\t{\r\n\t\t\t\temit(EVENT_TYPE_SEQUENCE_END,{target:this,bubbles:false,data:sequence});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(hasEventListener(GAFEvent.COMPLETE))\r\n\t\t{\r\n\t\t\tif(_currentFrame==_finalFrame)\r\n\t\t\t{\r\n\t\t\t\temit(GAFEvent.COMPLETE);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tprivate function runActions():Void\r\n\t{\r\n\t\tif(_config.animationConfigFrames.frames.length==0)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar i:Int=0, l:Int=0;\r\n\t\tvar actions:Array<CFrameAction> = _config.animationConfigFrames.frames[_currentFrame].actions;\r\n\t\tif(actions!=null)\r\n\t\t{\r\n\t\t\tvar action:CFrameAction;\r\n\t\t\tvar l:UInt = actions.length;\r\n\t\t\tfor(i in 0...l)\r\n\t\t\t{\r\n\t\t\t\taction=actions[i];\r\n\t\t\t\tswitch(action.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase CFrameAction.STOP:\r\n\t\t\t\t\t\tstop();\r\n\t\t\t\t\tcase CFrameAction.PLAY:\r\n\t\t\t\t\t\tplay();\r\n\t\t\t\t\tcase CFrameAction.GOTO_AND_STOP:\r\n\t\t\t\t\t\tgotoAndStop(action.params[0]);\r\n\t\t\t\t\tcase CFrameAction.GOTO_AND_PLAY:\r\n\t\t\t\t\t\tgotoAndPlay(action.params[0]);\r\n\t\t\t\t\tcase CFrameAction.DISPATCH_EVENT:\r\n\t\t\t\t\t\t//TODO CFrameAction.DISPATCH_EVENT\r\n\t\t\t\t\t\ttrace (\"CFrameAction.DISPATCH_EVENT\");\r\n\t\t\t\t\t\tvar actionType:String=action.params[0];\r\n\t\t\t\t\t\tif(hasEventListener(actionType))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar bubbles:Bool = false;\r\n\t\t\t\t\t\t\tvar data:Dynamic=null;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tswitch(action.params.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t\tdata=action.params[3];\r\n\t\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t\t// cancelable param is not used\r\n\t\t\t\t\t\t\t\t\tbubbles=cast(action.params[1],Bool);\r\n\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\tbubbles=cast(action.params[1],Bool);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\temit(actionType, {target:this,bubbles:bubbles, data:data});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//if(actionType==CSound.GAF_PLAY_SOUND && GAF.autoPlaySounds)\r\n\t\t\t\t\t\t//{\r\n\t\t\t\t\t\t\t//_gafTimeline.startSound(currentFrame);\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate function checkAndSetCurrentFrame(frame:Dynamic):Void\r\n\t{\r\n\t\tif (cast(frame,UInt) > 0)\r\n\t\t{\r\n\t\t\tif(frame>_totalFrames)\r\n\t\t\t{\r\n\t\t\t\tframe=_totalFrames;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(Std.is(frame, String))\r\n\t\t{\r\n\t\t\tvar label:String=frame;\r\n\t\t\tframe=_config.animationSequences.getStartFrameNo(label);\r\n\r\n\t\t\tif(frame==0)\r\n\t\t\t{\r\n\t\t\t\tthrow \"Frame label \" + label + \" not found\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tframe=1;\r\n\t\t}\r\n\r\n\t\tif(_playingSequence!=null && !_playingSequence.isSequenceFrame(frame))\r\n\t\t{\r\n\t\t\t_playingSequence=null;\r\n\t\t}\r\n\r\n\t\tif(_currentFrame !=frame - 1)\r\n\t\t{\r\n\t\t\t_currentFrame=cast(frame,UInt) - 1;\r\n\t\t\trunActions();\r\n\t\t\t//actions may Interrupt playback and lead to content disposition\r\n\t\t\tif(!_disposed)\r\n\t\t\t{\r\n\t\t\t\tdraw();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate function clearDisplayList():Void\r\n\t{\r\n\t\tremoveChildren();\r\n\t}\r\n\r\n\tprivate function draw():Void\r\n\t{\r\n\t\t\r\n\t\tvar i:Int=0;\r\n\t\tvar l:Int=0;\r\n\r\n\t\tif(_config.debugRegions!=null)\r\n\t\t{\r\n\t\t\t// Non optimized way when there are debug regions\r\n\t\t\tclearDisplayList();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Just hide the children to avoid dispatching a lot of events and alloc temporary arrays\r\n\t\t\tvar l:UInt = _displayObjectsVector.length;\r\n\t\t\tfor(i in 0...l)\r\n\t\t\t{\r\n\t\t\t\t_displayObjectsVector[i].alpha=0;\r\n\t\t\t}\r\n\r\n\t\t\tl = _mcVector.length;\r\n\t\t\t\r\n\t\t\tfor(i in 0...l)\r\n\t\t\t{\r\n\t\t\t\t_mcVector[i]._hidden=true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar frames:Array<CAnimationFrame>=_config.animationConfigFrames.frames;\r\n\t\tif(frames.length>_currentFrame)\r\n\t\t{\r\n\t\t\tvar mc:GAFMovieClip;\r\n\t\t\tvar objectPivotMatrix:Matrix;\r\n\t\t\tvar displayObject:IGAFDisplayObject;\r\n\t\t\tvar instance:CAnimationFrameInstance;\r\n\t\t\tvar stencilMaskObject:DisplayObject;\r\n\r\n\t\t\tvar animationObjectsDictionary:Map<String,CAnimationObject>=_config.animationObjects.animationObjectsDictionary;\r\n\t\t\tvar frameConfig:CAnimationFrame=frames[_currentFrame];\r\n\t\t\tvar instances:Array<CAnimationFrameInstance>=frameConfig.instances;\r\n\t\t\tl=instances.length;\r\n\t\t\ti=0;\r\n\t\t\twhile(i<l)\r\n\t\t\t{\r\n\t\t\t\tinstance=instances[i++];\r\n\r\n\t\t\t\tdisplayObject=_displayObjectsDictionary[instance.id];\r\n\t\t\t\tif(displayObject!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobjectPivotMatrix=getTransformMatrix(displayObject, GAFContainer.HELPER_MATRIX);\r\n\t\t\t\t\tif (Std.is(displayObject, GAFMovieClip)) mc = cast(displayObject, GAFMovieClip);\r\n\t\t\t\t\telse mc = null;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(mc!=null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(instance.alpha<0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmc.reset();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(mc._reset && mc._started)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmc._play(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmc._hidden=false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(instance.alpha<=0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdisplayObject.alpha=instance.alpha;\r\n\r\n\t\t\t\t\t//if display object is not a mask\r\n\t\t\t\t\tif(!animationObjectsDictionary[instance.id].mask)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//if display object is under mask\r\n\t\t\t\t\t\tif(instance.maskID!=\"\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trenderDebug(mc, instance, true);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstencilMaskObject=_stencilMasksDictionary[instance.maskID];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(stencilMaskObject!=null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tinstance.applyTransformMatrix(displayObject.transformationMatrix, objectPivotMatrix, _scale);\r\n\t\t\t\t\t\t\t\tdisplayObject.invalidateOrientation();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tcast(displayObject, DisplayObject).mask = stencilMaskObject;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\taddChild(stencilMaskObject);\r\n\t\t\t\t\t\t\t\taddChild(cast(displayObject, DisplayObject));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse //if display object is not masked\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trenderDebug(mc, instance, _masked);\r\n\t\t\t\t\t\t\tinstance.applyTransformMatrix(displayObject.transformationMatrix, objectPivotMatrix, _scale);\r\n\t\t\t\t\t\t\tdisplayObject.invalidateOrientation();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdisplayObject.setFilterConfig(instance.filter, _scale);\r\n\t\t\t\t\t\t\taddChild(cast(displayObject,DisplayObject));\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(mc!=null && mc._started)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmc._play(true);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(DebugUtility.RENDERING_DEBUG && Std.is(displayObject,IGAFDebug))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar colors:Array<Int>=DebugUtility.getRenderingDifficultyColor(instance, _alphaLessMax, _masked, _hasFilter);\r\n\t\t\t\t\t\t\tcast(displayObject,IGAFDebug).debugColors=colors;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar maskObject:IGAFDisplayObject=_displayObjectsDictionary[instance.id];\r\n\t\t\t\t\t\tif(maskObject!=null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar maskInstance:CAnimationFrameInstance=frameConfig.getInstanceByID(instance.id);\r\n\t\t\t\t\t\t\tif(maskInstance!=null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tgetTransformMatrix(maskObject, GAFContainer.HELPER_MATRIX);\r\n\t\t\t\t\t\t\t\tmaskInstance.applyTransformMatrix(maskObject.transformationMatrix, GAFContainer.HELPER_MATRIX, _scale);\r\n\t\t\t\t\t\t\t\tmaskObject.invalidateOrientation();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthrow \"Unable to find mask with ID \" + instance.id;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (Std.is(maskObject, GAFMovieClip)) mc = cast(maskObject, GAFMovieClip);\r\n\t\t\t\t\t\t\telse mc = null;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(mc!=null && mc._started)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tmc._play(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(_config.debugRegions!=null)\r\n\t\t{\r\n\t\t\taddDebugRegions();\r\n\t\t}\r\n\r\n\t\tcheckPlaybackEvents();\r\n\t}\r\n\r\n\tprivate function renderDebug(mc:GAFMovieClip, instance:CAnimationFrameInstance, masked:Bool):Void\r\n\t{\r\n\r\n\t\tif(DebugUtility.RENDERING_DEBUG && mc!=null)\r\n\t\t{\r\n\t\t\t//TODO renderDebug\r\n\t\t\ttrace (\"TODO renderDebug\");\r\n\t\t\t//var hasFilter:Bool=(instance.filter !=null)|| _hasFilter;\r\n\t\t\t////var alphaLessMax:Bool=instance.alpha<GAF.maxAlpha || _alphaLessMax;\r\n\t\t\t//var alphaLessMax:Bool=instance.alpha<GAF.maxAlpha || _alphaLessMax;\r\n\t\t\t//\r\n\t\t\t//var changed:Bool=false;\r\n\t\t\t//if(mc._alphaLessMax !=alphaLessMax)\r\n\t\t\t//{\r\n\t\t\t\t//mc._alphaLessMax=alphaLessMax;\r\n\t\t\t\t//changed=true;\r\n\t\t\t//}\r\n\t\t\t//if(mc._masked !=masked)\r\n\t\t\t//{\r\n\t\t\t\t//mc._masked=masked;\r\n\t\t\t\t//changed=true;\r\n\t\t\t//}\r\n\t\t\t//if(mc._hasFilter !=hasFilter)\r\n\t\t\t//{\r\n\t\t\t\t//mc._hasFilter=hasFilter;\r\n\t\t\t\t//changed=true;\r\n\t\t\t//}\r\n\t\t\t//if(changed)\r\n\t\t\t//{\r\n\t\t\t\t//mc.draw();\r\n\t\t\t//}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate function addDebugRegions():Void\r\n\t{\r\n\t\t//TODO addDebugRegions\r\n\t\ttrace (\"TODO addDebugRegions\");\r\n\t\t\r\n\t\t//var debugView:Quad;\r\n\t\t//for (debugRegion in _config.debugRegions)\r\n\t\t//{\r\n\t\t\t//switch(debugRegion.type)\r\n\t\t\t//{\r\n\t\t\t\t//case GAFDebugInformation.TYPE_POINT:\r\n\t\t\t\t\t//debugView=new Quad(4, 4, debugRegion.color);\r\n\t\t\t\t\t//debugView.x=debugRegion.point.x - 2;\r\n\t\t\t\t\t//debugView.y=debugRegion.point.y - 2;\r\n\t\t\t\t\t//debugView.alpha=debugRegion.alpha;\r\n\t\t\t\t\t//break;\r\n\t\t\t\t//case GAFDebugInformation.TYPE_RECT:\r\n\t\t\t\t\t//debugView=new Quad(debugRegion.rect.width, debugRegion.rect.height, debugRegion.color);\r\n\t\t\t\t\t//debugView.x=debugRegion.rect.x;\r\n\t\t\t\t\t//debugView.y=debugRegion.rect.y;\r\n\t\t\t\t\t//debugView.alpha=debugRegion.alpha;\r\n\t\t\t\t\t//break;\r\n\t\t\t//}\r\n//\r\n\t\t\t//addChild(debugView);\r\n\t\t//}\r\n\t}\r\n\r\n\tprivate function reset():Void\r\n\t{\r\n\t\t_gotoAndStop((_reverse ? _finalFrame:_startFrame)+ 1);\r\n\t\t_reset=true;\r\n\t\t_currentTime=0;\r\n\t\t_lastFrameTime=0;\r\n\r\n\t\tvar i:Int=_mcVector.length;\r\n\t\twhile(i-->0)\r\n\t\t{\r\n\t\t\t_mcVector[i].reset();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function initialize(textureAtlas:CTextureAtlas, gafAsset:GAFAsset):Void\r\n\t{\r\n\t\t_displayObjectsDictionary=new Map<String,IGAFDisplayObject>();\r\n\t\t_stencilMasksDictionary=new Map<String,DisplayObject>();\r\n\t\t_displayObjectsVector=[];\r\n\t\t_imagesVector=[];\r\n\t\t_mcVector=[];\r\n\r\n\t\t_currentFrame=0;\r\n\t\t_totalFrames = _config.framesCount;\r\n\t\tfps=_config.stageConfig!=null ? _config.stageConfig.fps: 60;\r\n\r\n\t\tvar animationObjectsDictionary:Map<String,CAnimationObject>=_config.animationObjects.animationObjectsDictionary;\r\n\r\n\t\tvar displayObject:DisplayObject=null;\r\n\t\t\r\n\t\tfor (animationObjectConfig in animationObjectsDictionary)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tswitch(animationObjectConfig.type)\r\n\t\t\t{\r\n\t\t\t\tcase CAnimationObject.TYPE_TEXTURE:\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar texture:IGAFTexture = textureAtlas.getTexture(animationObjectConfig.regionID);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(Std.is(texture, GAFScale9Texture) && !animationObjectConfig.mask)// GAFScale9Image doesn't work as mask\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//TODO initialize GAFScale9Texture\r\n\t\t\t\t\t\ttrace (\"TODO initialize GAFScale9Texture\");\r\n\t\t\t\t\t\t//displayObject=new GAFScale9Image(cast(texture,GAFScale9Texture));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdisplayObject = new GAFImage(texture);\r\n\t\t\t\t\t\tcast(displayObject,GAFImage).textureSmoothing=_smoothing;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase CAnimationObject.TYPE_TEXTFIELD:\r\n\t\t\t\t\tvar tfObj:CTextFieldObject=_config.textFields.textFieldObjectsDictionary[animationObjectConfig.regionID];\r\n\t\t\t\t\tdisplayObject=new GAFTextField(tfObj, _scale, _contentScaleFactor);\r\n\t\t\t\tcase CAnimationObject.TYPE_TIMELINE:\r\n\t\t\t\t\tvar timeline:GAFTimeline=gafAsset.getGAFTimelineByID(animationObjectConfig.regionID);\r\n\t\t\t\t\tdisplayObject=new GAFMovieClip(timeline, Std.int(fps), false);\r\n\t\t\t}\r\n\r\n\t\t\tif(animationObjectConfig.maxSize!=null && Std.is(displayObject,IMaxSize))\r\n\t\t\t{\r\n\t\t\t\tvar maxSize:Point=new Point(\r\n\t\t\t\t\t\tanimationObjectConfig.maxSize.x * _scale,\r\n\t\t\t\t\t\tanimationObjectConfig.maxSize.y * _scale);\r\n\t\t\t\tcast(displayObject,IMaxSize).maxSize=maxSize;\r\n\t\t\t}\r\n\r\n\t\t\taddDisplayObject(animationObjectConfig.instanceID, displayObject);\r\n\t\t\tif(animationObjectConfig.mask)\r\n\t\t\t{\r\n\t\t\t\taddDisplayObject(animationObjectConfig.instanceID, displayObject, true);\r\n\t\t\t}\r\n\r\n\t\t\tif(_config.namedParts !=null)\r\n\t\t\t{\r\n\t\t\t\tvar instanceName:String=_config.namedParts[animationObjectConfig.instanceID];\r\n\t\t\t\tif (instanceName != null && !Reflect.hasField(this,instanceName))\r\n\t\t\t\t{\r\n\t\t\t\t\tReflect.setField(this, _config.namedParts[animationObjectConfig.instanceID], displayObject);\r\n\t\t\t\t\tdisplayObject.name=instanceName;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(_addToJuggler)\r\n\t\t{\r\n\t\t\tBrowser.window.requestAnimationFrame(advanceTime);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate function addDisplayObject(id:String, displayObject:DisplayObject, asMask:Bool=false):Void\r\n\t{\r\n\t\tif(asMask)\r\n\t\t{\r\n\t\t\t_stencilMasksDictionary[id] = displayObject;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t_displayObjectsDictionary[id]=cast(displayObject,IGAFDisplayObject);\r\n\t\t\t_displayObjectsVector[_displayObjectsVector.length]=cast(displayObject, IGAFDisplayObject);\r\n\t\t\tif(Std.is(displayObject, IGAFImage))\r\n\t\t\t{\r\n\t\t\t\t_imagesVector[_imagesVector.length]=cast(displayObject, IGAFImage);\r\n\t\t\t}\r\n\t\t\telse if(Std.is(displayObject, GAFMovieClip))\r\n\t\t\t{\r\n\t\t\t\t_mcVector[_mcVector.length]=cast(displayObject, GAFMovieClip);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate function updateBounds(bounds:Rectangle):Void\r\n\t{\r\n\t\t//TODO updateBounds\r\n\t\ttrace (\"TODO updateBounds\");\r\n\t\t\r\n\t\t//_boundsAndPivot.clear();\r\n\t\t////bounds\r\n\t\t//if(bounds.width>0 &&  bounds.height>0)\r\n\t\t//{\r\n\t\t\t//var quad:Quad=new Quad(bounds.width * _scale, 2, 0xff0000);\r\n\t\t\t//quad.x=bounds.x * _scale;\r\n\t\t\t//quad.y=bounds.y * _scale;\r\n\t\t\t//_boundsAndPivot.addMesh(quad);\r\n\t\t\t//quad=new Quad(bounds.width * _scale, 2, 0xff0000);\r\n\t\t\t//quad.x=bounds.x * _scale;\r\n\t\t\t//quad.y=bounds.bottom * _scale - 2;\r\n\t\t\t//_boundsAndPivot.addMesh(quad);\r\n\t\t\t//quad=new Quad(2, bounds.height * _scale, 0xff0000);\r\n\t\t\t//quad.x=bounds.x * _scale;\r\n\t\t\t//quad.y=bounds.y * _scale;\r\n\t\t\t//_boundsAndPivot.addMesh(quad);\r\n\t\t\t//quad=new Quad(2, bounds.height * _scale, 0xff0000);\r\n\t\t\t//quad.x=bounds.right * _scale - 2;\r\n\t\t\t//quad.y=bounds.y * _scale;\r\n\t\t\t//_boundsAndPivot.addMesh(quad);\r\n\t\t//}\r\n\t\t////pivot point\r\n\t\t//quad=new Quad(5, 5, 0xff0000);\r\n\t\t//_boundsAndPivot.addMesh(quad);\r\n\t}\r\n\r\n\r\n\tpublic function __debugHighlight():Void\r\n\t{\r\n\r\n\t\tif(Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\t__debugOriginalAlpha=alpha;\r\n\t\t}\r\n\t\talpha=1;\r\n\t}\r\n\r\n\tpublic function __debugLowlight():Void\r\n\t{\r\n\r\n\t\tif(Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\t__debugOriginalAlpha=alpha;\r\n\t\t}\r\n\t\talpha=.05;\r\n\t}\r\n\r\n\tpublic function __debugResetLight():Void\r\n\t{\r\n\r\n\t\tif(!Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\talpha=__debugOriginalAlpha;\r\n\t\t\t__debugOriginalAlpha=null;\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/** Removes a child at a certain index. The index positions of any display objects above\r\n\t *  the child are decreased by 1. If requested, the child will be disposed right away. */\r\n\toverride public function removeChildAt(index:Int/*, dispose:Bool=false*/):DisplayObject\r\n\t{\r\n\t\t//TODO: removeChildAt\r\n\t\ttrace (\"TODO: removeChildAt\");\r\n\t\t\r\n\t\t//if(dispose)\r\n\t\t//{\r\n\t\t\t//var key:String;\r\n\t\t\t//var instanceName:String;\r\n\t\t\t//var child:DisplayObject=getChildAt(index);\r\n\t\t\t//if(Std.is(child, IGAFDisplayObject))\r\n\t\t\t//{\r\n\t\t\t\t//var id:Int=_mcVector.indexOf(cast(child,GAFMovieClip));\r\n\t\t\t\t//if(id>=0)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//_mcVector.splice(id, 1);\r\n\t\t\t\t//}\r\n\t\t\t\t//id=_imagesVector.indexOf(cast(child,IGAFImage));\r\n\t\t\t\t//if(id>=0)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//_imagesVector.splice(id, 1);\r\n\t\t\t\t//}\r\n\t\t\t\t//id=_displayObjectsVector.indexOf(cast(child,IGAFDisplayObject));\r\n\t\t\t\t//if(id>=0)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//_displayObjectsVector.splice(id, 1);\r\n//\r\n\t\t\t\t\t//for(key in _displayObjectsDictionary.keys())\r\n\t\t\t\t\t//{\r\n\t\t\t\t\t\t//if(_displayObjectsDictionary[key]==child)\r\n\t\t\t\t\t\t//{\r\n\t\t\t\t\t\t\t//if(_config.namedParts !=null)\r\n\t\t\t\t\t\t\t//{\r\n\t\t\t\t\t\t\t\t//instanceName=_config.namedParts[key];\r\n\t\t\t\t\t\t\t\t//if(instanceName!=null && Reflect.hasField(this,instanceName))\r\n\t\t\t\t\t\t\t\t//{\r\n\t\t\t\t\t\t\t\t\t////delete this[instanceName];\r\n\t\t\t\t\t\t\t\t\t//Reflect.deleteField(this, instanceName);\r\n\t\t\t\t\t\t\t\t//}\r\n\t\t\t\t\t\t\t//}\r\n//\r\n\t\t\t\t\t\t\t////delete _displayObjectsDictionary[key];\r\n\t\t\t\t\t\t\t//_displayObjectsDictionary[key] = null;\r\n\t\t\t\t\t\t\t//break;\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t//}\r\n\t\t\t\t//}\r\n//\r\n\t\t\t\t//for(key in _stencilMasksDictionary.keys())\r\n\t\t\t\t//{\r\n\t\t\t\t\t//if(_stencilMasksDictionary[key]==child)\r\n\t\t\t\t\t//{\r\n\t\t\t\t\t\t//if(_config.namedParts !=null)\r\n\t\t\t\t\t\t//{\r\n\t\t\t\t\t\t\t//instanceName=_config.namedParts[key];\r\n\t\t\t\t\t\t\t//if(instanceName!=null && Reflect.hasField(this,instanceName))\r\n\t\t\t\t\t\t\t//{\r\n\t\t\t\t\t\t\t\t////delete this[instanceName];\r\n\t\t\t\t\t\t\t\t//Reflect.deleteField(this, instanceName);\r\n\t\t\t\t\t\t\t//}\r\n\t\t\t\t\t\t//}\r\n//\r\n\t\t\t\t\t\t////delete _stencilMasksDictionary[key];\r\n\t\t\t\t\t\t//_stencilMasksDictionary[key]=null;\r\n\t\t\t\t\t\t//break;\r\n\t\t\t\t\t//}\r\n\t\t\t\t//}\r\n\t\t\t//}\r\n\t\t//}\r\n\r\n\t\t//return super.removeChildAt(index, dispose);\r\n\t\tgetChildAt(index).destroy();\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\r\n\t/** Returns a child object with a certain name(non-recursively). */\r\n\toverride public function getChildByName(name:String):DisplayObject\r\n\t{\r\n\t\tvar numChildren:Int=_displayObjectsVector.length;\r\n\t\tfor(i in 0...numChildren)\r\n\t\t\tif(_displayObjectsVector[i].name==name)\r\n\t\t\t\treturn cast(_displayObjectsVector[i],DisplayObject);\r\n\t\treturn super.getChildByName(name);\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes all resources of the display object instance. Note:this method won't delete used texture atlases from GPU memory.\r\n\t * To delete texture atlases from GPU memory use<code>unloadFromVideoMemory()</code>method for<code>GAFTimeline</code>instance\r\n\t * from what<code>GAFMovieClip</code>was instantiated.\r\n\t * Call this method every time before delete no longer required instance! Otherwise GPU memory leak may occur!\r\n\t */\t\r\n\toverride public function destroy(?options:EitherType<Bool, DestroyOptions>):Void\r\n\t{\r\n\t\t//TODO destroy\r\n\t\t\r\n\t\tif(_disposed)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tstop();\r\n\r\n\t\tvar l:Int=_displayObjectsVector.length;\r\n\t\tfor(i in 0...l)\r\n\t\t{\r\n\t\t\t_displayObjectsVector[i].destroy();\r\n\t\t}\r\n\r\n\t\tfor(lMask in _stencilMasksDictionary)\r\n\t\t{\r\n\t\t\tlMask.destroy();\r\n\t\t}\r\n//\r\n\t\t//if(_boundsAndPivot)\r\n\t\t//{\r\n\t\t\t//_boundsAndPivot.dispose();\r\n\t\t\t//_boundsAndPivot=null;\r\n\t\t//}\r\n\r\n\t\t_displayObjectsDictionary=null;\r\n\t\t_stencilMasksDictionary=null;\r\n\t\t_displayObjectsVector=null;\r\n\t\t_imagesVector=null;\r\n\t\t_gafTimeline=null;\r\n\t\t_mcVector=null;\r\n\t\t_config=null;\r\n\r\n\t\tif(parent!=null)\r\n\t\t{\r\n\t\t\tparent.removeChild(this);\r\n\t\t}\r\n\t\tsuper.destroy(options);\r\n\r\n\t\t_disposed=true;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function changeCurrentFrame(isSkipping:Bool):Void\r\n\t{\r\n\t\t_nextFrame=_currentFrame +(_reverse ? -1:1);\r\n\t\t_startFrame=(_playingSequence!=null ? _playingSequence.startFrameNo:1)- 1;\r\n\t\t_finalFrame=(_playingSequence!=null ? _playingSequence.endFrameNo:_totalFrames)- 1;\r\n\r\n\t\tif(_nextFrame>=_startFrame && _nextFrame<=_finalFrame)\r\n\t\t{\r\n\t\t\t_currentFrame=_nextFrame;\r\n\t\t\t_lastFrameTime +=_frameDuration;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif(!_loop)\r\n\t\t\t{\r\n\t\t\t\tstop();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t_currentFrame=_reverse ? _finalFrame:_startFrame;\r\n\t\t\t\t_lastFrameTime +=_frameDuration;\r\n\t\t\t\tvar resetInvisibleChildren:Bool=true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trunActions();\r\n\r\n\t\t//actions may Interrupt playback and lead to content disposition\r\n\t\tif(_disposed)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if(_config.disposed)\r\n\t\t{\r\n\t\t\tdestroy();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(!isSkipping)\r\n\t\t{\r\n\t\t\t// Draw will trigger events if any\r\n\t\t\tdraw();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcheckPlaybackEvents();\r\n\t\t}\r\n\r\n\t\t//if(resetInvisibleChildren)\r\n\t\t//{\r\n\t\t\t////reset timelines that aren't visible\r\n\t\t\t//var i:Int=_mcVector.length;\r\n\t\t\t//while(i-->0)\r\n\t\t\t//{\r\n\t\t\t\t//if(_mcVector[i]._hidden)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//_mcVector[i].reset();\r\n\t\t\t\t//}\r\n\t\t\t//}\r\n\t\t//}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Specifies the number of the frame in which the playhead is located in the timeline of the GAFMovieClip instance. First frame is \"1\"\r\n\t */\r\n\tpublic var currentFrame(get_currentFrame, null):Int;\r\n \tprivate function get_currentFrame():Int\r\n\t{\r\n\t\treturn _currentFrame + 1;// Like in standart AS3 API for MovieClip first frame is \"1\" instead of \"0\"(but Internally used \"0\")\r\n\t}\r\n\r\n\t/**\r\n\t * The total number of frames in the GAFMovieClip instance.\r\n\t */\r\n\tpublic var totalFrames(get_totalFrames, null):Int;\r\n \tprivate function get_totalFrames():Int\r\n\t{\r\n\t\treturn _totalFrames;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether GAFMovieClip instance already in play\r\n\t */\r\n\tpublic var inPlay(get_inPlay, null):Bool;\r\n \tprivate function get_inPlay():Bool\r\n\t{\r\n\t\treturn _inPlay;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether GAFMovieClip instance continue playing from start frame after playback reached animation end\r\n\t */\r\n\tpublic var loop(get_loop, set_loop):Bool;\r\n \tprivate function get_loop():Bool\r\n\t{\r\n\t\treturn _loop;\r\n\t}\r\n\r\n\tprivate function set_loop(loop:Bool):Bool\r\n\t{\r\n\t\treturn _loop=loop;\r\n\t}\r\n\r\n\t/**\r\n\t * The smoothing filter that is used for the texture. Possible values are<code>TextureSmoothing.BILINEAR, TextureSmoothing.NONE, TextureSmoothing.TRILINEAR</code>\r\n\t */\r\n\tprivate function set_smoothing(value:String):String\r\n\t{\r\n\t\t//if(TextureSmoothing.isValid(value))\r\n\t\t//{\r\n\t\t\t//_smoothing=value;\r\n//\r\n\t\t\t//var i:Int=_imagesVector.length;\r\n\t\t\t//while(i-->0)\r\n\t\t\t//{\r\n\t\t\t\t//_imagesVector[i].textureSmoothing=_smoothing;\r\n\t\t\t//}\r\n\t\t//}\r\n\t\t\r\n\t\treturn null;// _smoothing;\r\n\t}\r\n\r\n\tpublic var smoothing(get_smoothing, set_smoothing):String;\r\n \tprivate function get_smoothing():String\r\n\t{\r\n\t\treturn null;// _smoothing;\r\n\t}\r\n\r\n\tpublic var useClipping(get_useClipping, set_useClipping):Bool;\r\n \tprivate function get_useClipping():Bool\r\n\t{\r\n\t\treturn _useClipping;\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * if set<code>true</code>-<code>GAFMivieclip</code>will be clipped with flash stage dimensions\r\n\t */\r\n\tprivate function set_useClipping(value:Bool):Bool\r\n\t{\r\n\t\t_useClipping=value;\r\n\r\n\t\tif(_useClipping && _config.stageConfig!=null)\r\n\t\t{\r\n\t\t\t//mask=new Quad(_config.stageConfig.width * _scale, _config.stageConfig.height * _scale);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tmask=null;\r\n\t\t}\r\n\t\t\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic var fps(get_fps, set_fps):Float;\r\n \tprivate function get_fps():Float\r\n\t{\r\n\t\tif(_frameDuration==Math.POSITIVE_INFINITY)\r\n\t\t{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn 1 / _frameDuration;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets an individual frame rate for<code>GAFMovieClip</code>. If this value is lower than stage fps -  the<code>GAFMovieClip</code>will skip frames.\r\n\t */\r\n\tprivate function set_fps(value:Float):Float\r\n\t{\r\n\t\tif(value<=0)\r\n\t\t{\r\n\t\t\t_frameDuration=Math.POSITIVE_INFINITY;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t_frameDuration=1 / value;\r\n\t\t}\r\n\r\n\t\tvar i:Int=_mcVector.length;\r\n\t\twhile(i-->0)\r\n\t\t{\r\n\t\t\t_mcVector[i].fps=value;\r\n\t\t}\r\n\t\t\r\n\t\treturn value;\r\n\t\t\r\n\t}\r\n\r\n\tpublic var reverse(get_reverse, set_reverse):Bool;\r\n \tprivate function get_reverse():Bool\r\n\t{\r\n\t\treturn _reverse;\r\n\t}\r\n\r\n\t/**\r\n\t * If<code>true</code>animation will be playing in reverse mode\r\n\t */\r\n\tprivate function set_reverse(value:Bool):Bool\r\n\t{\r\n\t\t_reverse=value;\r\n\r\n\t\tvar i:Int=_mcVector.length;\r\n\t\twhile(i-->0)\r\n\t\t{\r\n\t\t\t_mcVector[i]._reverse=value;\r\n\t\t}\r\n\t\t\r\n\t\treturn _reverse;\r\n\t}\r\n\r\n\tpublic var skipFrames(get_skipFrames, set_skipFrames):Bool;\r\n \tprivate function get_skipFrames():Bool\r\n\t{\r\n\t\treturn _skipFrames;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether GAFMovieClip instance should skip frames when application fps drops down or play every frame not depending on application fps.\r\n\t * Value false will force GAFMovieClip to play each frame not depending on application fps(the same behavior as in regular Flash Movie Clip).\r\n\t * Value true will force GAFMovieClip to play animation \"in time\". And when application fps drops down it will start skipping frames(default behavior).\r\n\t */\r\n\tprivate function set_skipFrames(value:Bool):Bool\r\n\t{\r\n\t\t_skipFrames=value;\r\n\r\n\t\tvar i:Int=_mcVector.length;\r\n\t\twhile(i-->0)\r\n\t\t{\r\n\t\t\t_mcVector[i]._skipFrames=value;\r\n\t\t}\r\n\t\t\r\n\t\treturn _skipFrames;\r\n\t}\r\n\r\n\r\n\t\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//[Inline]\r\n\tprivate static function getTransformMatrix(displayObject:IGAFDisplayObject, matrix:Matrix):Matrix\r\n\t{\r\n\t\tmatrix.copyFrom(displayObject.pivotMatrix);\r\n\t\treturn matrix;\r\n\t}\r\n\r\n\t\r\n}","package com.github.haxePixiGAF.display;\r\n\r\nimport com.github.haxePixiGAF.data.textures.TextureWrapper;\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\nusing com.github.haxePixiGAF.utils.MatrixUtility;\r\n\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass GAFScale9Texture implements IGAFTexture\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static inline var DIMENSIONS_ERROR:String=\"The width and height of the scale9Grid must be greater than zero.\";\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static var HELPER_RECTANGLE:Rectangle = new Rectangle(0, 0, 0, 0);\r\n\r\n\tprivate var _id:String;\r\n\tprivate var _texture:TextureWrapper;\r\n\tprivate var _pivotMatrix:Matrix;\r\n\tprivate var _scale9Grid:Rectangle;\r\n\r\n\t//private var _topLeft:Texture;\r\n\t//private var _topCenter:Texture;\r\n\t//private var _topRight:Texture;\r\n\t//private var _middleLeft:Texture;\r\n\t//private var _middleCenter:Texture;\r\n\t//private var _middleRight:Texture;\r\n\t//private var _bottomLeft:Texture;\r\n\t//private var _bottomCenter:Texture;\r\n\t//private var _bottomRight:Texture;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(id:String, texture:TextureWrapper, pivotMatrix:Matrix, scale9Grid:Rectangle)\r\n\t{\r\n\t\t_id=id;\r\n\t\t_pivotMatrix=pivotMatrix;\r\n\r\n\t\t//if(scale9Grid.width<=0 || scale9Grid.height<=0)\r\n\t\t//{\r\n\t\t\t//throw new ArgumentError(DIMENSIONS_ERROR);\r\n\t\t//}\r\n\t\t//_texture=texture;\r\n\t\t_scale9Grid=scale9Grid;\r\n\t\tinitialize();\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\tpublic function copyFrom(newTexture:IGAFTexture):Void\r\n\t{\r\n\t\tif(Std.is(newTexture, GAFScale9Texture))\r\n\t\t{\r\n\t\t\t_id=newTexture.id;\r\n\t\t\t_texture=newTexture.texture;\r\n\t\t\t_pivotMatrix.copyFrom(newTexture.pivotMatrix);\r\n\t\t\t//_scale9Grid.copyFrom(cast(newTexture,GAFScale9Texture).scale9Grid);\r\n\t\t\t//_topLeft=(newTexture as GAFScale9Texture).topLeft;\r\n\t\t\t//_topCenter=(newTexture as GAFScale9Texture).topCenter;\r\n\t\t\t//_topRight=(newTexture as GAFScale9Texture).topRight;\r\n\t\t\t//_middleLeft=(newTexture as GAFScale9Texture).middleLeft;\r\n\t\t\t//_middleCenter=(newTexture as GAFScale9Texture).middleCenter;\r\n\t\t\t//_middleRight=(newTexture as GAFScale9Texture).middleRight;\r\n\t\t\t//_bottomLeft=(newTexture as GAFScale9Texture).bottomLeft;\r\n\t\t\t//_bottomCenter=(newTexture as GAFScale9Texture).bottomCenter;\r\n\t\t\t//_bottomRight=(newTexture as GAFScale9Texture).bottomRight;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow \"Incompatiable types GAFScale9Texture and \"+Type.getClassName(Type.getClass(newTexture));\r\n\t\t}\r\n\t}\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function initialize():Void\r\n\t{\r\n\t\t//var textureFrame:Rectangle=_texture.frame;\r\n\t\t//if(!textureFrame)\r\n\t\t//{\r\n\t\t\t//textureFrame=HELPER_RECTANGLE;\r\n\t\t\t//textureFrame.setTo(0, 0, _texture.width, _texture.height);\r\n\t\t//}\r\n\t\t//var leftWidth:Float=_scale9Grid.left;\r\n\t\t//var centerWidth:Float=_scale9Grid.width;\r\n\t\t//var rightWidth:Float=textureFrame.width - _scale9Grid.width - _scale9Grid.x;\r\n\t\t//var topHeight:Float=_scale9Grid.y;\r\n\t\t//var middleHeight:Float=_scale9Grid.height;\r\n\t\t//var bottomHeight:Float=textureFrame.height - _scale9Grid.height - _scale9Grid.y;\r\n//\r\n\t\t//var regionLeftWidth:Float=leftWidth + textureFrame.x;\r\n\t\t//var regionTopHeight:Float=topHeight + textureFrame.y;\r\n\t\t//var regionRightWidth:Float=rightWidth -(textureFrame.width - _texture.width)- textureFrame.x;\r\n\t\t//var regionBottomHeight:Float=bottomHeight -(textureFrame.height - _texture.height)- textureFrame.y;\r\n//\r\n\t\t//var hasLeftFrame:Bool=regionLeftWidth !=leftWidth;\r\n\t\t//var hasTopFrame:Bool=regionTopHeight !=topHeight;\r\n\t\t//var hasRightFrame:Bool=regionRightWidth !=rightWidth;\r\n\t\t//var hasBottomFrame:Bool=regionBottomHeight !=bottomHeight;\r\n//\r\n\t\t//var topLeftRegion:Rectangle=new Rectangle(0, 0, regionLeftWidth, regionTopHeight);\r\n\t\t//var topLeftFrame:Rectangle=(hasLeftFrame || hasTopFrame)? new Rectangle(textureFrame.x, textureFrame.y, leftWidth, topHeight):null;\r\n\t\t//_topLeft=Texture.fromTexture(_texture, topLeftRegion, topLeftFrame);\r\n//\r\n\t\t//var topCenterRegion:Rectangle=new Rectangle(regionLeftWidth, 0, centerWidth, regionTopHeight);\r\n\t\t//var topCenterFrame:Rectangle=hasTopFrame ? new Rectangle(0, textureFrame.y, centerWidth, topHeight):null;\r\n\t\t//_topCenter=Texture.fromTexture(_texture, topCenterRegion, topCenterFrame);\r\n//\r\n\t\t//var topRightRegion:Rectangle=new Rectangle(regionLeftWidth + centerWidth, 0, regionRightWidth, regionTopHeight);\r\n\t\t//var topRightFrame:Rectangle=(hasTopFrame || hasRightFrame)? new Rectangle(0, textureFrame.y, rightWidth, topHeight):null;\r\n\t\t//_topRight=Texture.fromTexture(_texture, topRightRegion, topRightFrame);\r\n//\r\n\t\t//var middleLeftRegion:Rectangle=new Rectangle(0, regionTopHeight, regionLeftWidth, middleHeight);\r\n\t\t//var middleLeftFrame:Rectangle=hasLeftFrame ? new Rectangle(textureFrame.x, 0, leftWidth, middleHeight):null;\r\n\t\t//_middleLeft=Texture.fromTexture(_texture, middleLeftRegion, middleLeftFrame);\r\n//\r\n\t\t//var middleCenterRegion:Rectangle=new Rectangle(regionLeftWidth, regionTopHeight, centerWidth, middleHeight);\r\n\t\t//_middleCenter=Texture.fromTexture(_texture, middleCenterRegion);\r\n//\r\n\t\t//var middleRightRegion:Rectangle=new Rectangle(regionLeftWidth + centerWidth, regionTopHeight, regionRightWidth, middleHeight);\r\n\t\t//var middleRightFrame:Rectangle=hasRightFrame ? new Rectangle(0, 0, rightWidth, middleHeight):null;\r\n\t\t//_middleRight=Texture.fromTexture(_texture, middleRightRegion, middleRightFrame);\r\n//\r\n\t\t//var bottomLeftRegion:Rectangle=new Rectangle(0, regionTopHeight + middleHeight, regionLeftWidth, regionBottomHeight);\r\n\t\t//var bottomLeftFrame:Rectangle=(hasLeftFrame || hasBottomFrame)? new Rectangle(textureFrame.x, 0, leftWidth, bottomHeight):null;\r\n\t\t//_bottomLeft=Texture.fromTexture(_texture, bottomLeftRegion, bottomLeftFrame);\r\n//\r\n\t\t//var bottomCenterRegion:Rectangle=new Rectangle(regionLeftWidth, regionTopHeight + middleHeight, centerWidth, regionBottomHeight);\r\n\t\t//var bottomCenterFrame:Rectangle=hasBottomFrame ? new Rectangle(0, 0, centerWidth, bottomHeight):null;\r\n\t\t//_bottomCenter=Texture.fromTexture(_texture, bottomCenterRegion, bottomCenterFrame);\r\n//\r\n\t\t//var bottomRightRegion:Rectangle=new Rectangle(regionLeftWidth + centerWidth, regionTopHeight + middleHeight, regionRightWidth, regionBottomHeight);\r\n\t\t//var bottomRightFrame:Rectangle=(hasBottomFrame || hasRightFrame)? new Rectangle(0, 0, rightWidth, bottomHeight):null;\r\n\t\t//_bottomRight=Texture.fromTexture(_texture, bottomRightRegion, bottomRightFrame);\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\tpublic var pivotMatrix(get_pivotMatrix, null):Matrix;\r\n \tprivate function get_pivotMatrix():Matrix\r\n\t{\r\n\t\treturn _pivotMatrix;\r\n\t}\r\n\r\n\tpublic var texture(get_texture, null):TextureWrapper;\r\n \tprivate function get_texture():TextureWrapper\r\n\t{\r\n\t\treturn _texture;\r\n\t}\r\n\r\n\tpublic var scale9Grid(get_scale9Grid, null):Rectangle;\r\n \tprivate function get_scale9Grid():Rectangle\r\n\t{\r\n\t\treturn _scale9Grid;\r\n\t}\r\n\r\n\t//public var topLeft(get_topLeft, null):Texture;\r\n \t//private function get_topLeft():Texture\r\n\t//{\r\n\t\t//return _topLeft;\r\n\t//}\r\n//\r\n\t//public var topCenter(get_topCenter, null):Texture;\r\n \t//private function get_topCenter():Texture\r\n\t//{\r\n\t\t//return _topCenter;\r\n\t//}\r\n//\r\n\t//public var topRight(get_topRight, null):Texture;\r\n \t//private function get_topRight():Texture\r\n\t//{\r\n\t\t//return _topRight;\r\n\t//}\r\n//\r\n\t//public var middleLeft(get_middleLeft, null):Texture;\r\n \t//private function get_middleLeft():Texture\r\n\t//{\r\n\t\t//return _middleLeft;\r\n\t//}\r\n//\r\n\t//public var middleCenter(get_middleCenter, null):Texture;\r\n \t//private function get_middleCenter():Texture\r\n\t//{\r\n\t\t//return _middleCenter;\r\n\t//}\r\n//\r\n\t//public var middleRight(get_middleRight, null):Texture;\r\n \t//private function get_middleRight():Texture\r\n\t//{\r\n\t\t//return _middleRight;\r\n\t//}\r\n//\r\n\t//public var bottomLeft(get_bottomLeft, null):Texture;\r\n \t//private function get_bottomLeft():Texture\r\n\t//{\r\n\t\t//return _bottomLeft;\r\n\t//}\r\n//\r\n\t//public var bottomCenter(get_bottomCenter, null):Texture;\r\n \t//private function get_bottomCenter():Texture\r\n\t//{\r\n\t\t//return _bottomCenter;\r\n\t//}\r\n//\r\n\t//public var bottomRight(get_bottomRight, null):Texture;\r\n \t//private function get_bottomRight():Texture\r\n\t//{\r\n\t\t//return _bottomRight;\r\n\t//}\r\n\r\n\tpublic function clone():IGAFTexture\r\n\t{\r\n\t\treturn null;// new GAFScale9Texture(_id, _texture, _pivotMatrix.clone(), _scale9Grid);\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n}","package com.github.haxePixiGAF.display;\r\n\r\nimport com.github.haxePixiGAF.data.GAF;\r\nimport com.github.haxePixiGAF.data.config.CFilter;\r\nimport com.github.haxePixiGAF.data.config.CTextFieldObject;\r\nimport com.github.haxePixiGAF.text.TextFormatAlign;\r\nimport pixi.core.display.DisplayObject.DestroyOptions;\r\nimport pixi.core.graphics.Graphics;\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.text.Text;\r\nimport haxe.extern.EitherType;\r\nimport pixi.core.text.TextStyle;\r\n\r\nusing com.github.haxePixiGAF.utils.MatrixUtility;\r\n\r\n/**\r\n * GAFTextField is a text entry control that extends functionality of the<code>feathers.controls.TextInput</code>\r\n * for the GAF library needs.\r\n * All dynamic text fields(including input text fields)in GAF library are instances of the GAFTextField.\r\n */\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFTextField extends GAFContainer implements IGAFDebug\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate static var HELPER_POINT:Point=new Point();\r\n\t\r\n\tprivate var _scale:Float;\r\n\tprivate var _csf:Float;\r\n\r\n\tprivate var __debugOriginalAlpha:Float=null;\r\n\r\n\tprivate var _orientationChanged:Bool;\r\n\r\n\tprivate var _config:CTextFieldObject;\r\n\t\r\n\tprivate var textField:Text;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * @private\r\n\t * GAFTextField represents text field that is part of the<code>GAFMovieClip</code>\r\n\t * @param config\r\n\t * @param scale\r\n\t * @param csf\r\n\t */\r\n\tpublic function new(config:CTextFieldObject, scale:Float=1, csf:Float=1,?debug:Bool=false)\r\n\t{\r\n\t\t\r\n\t\tsuper();\r\n\r\n\t\tconfig.textFormat.wordWrap = true;\r\n\t\tconfig.textFormat.wordWrapWidth = config.width;\r\n\t\t\r\n\t\ttextField = new Text(config.text, config.textFormat);\r\n\t\t\r\n\t\tif(Math.isNaN(scale))scale=1;\r\n\t\tif(Math.isNaN(csf))csf=1;\r\n\t\t\t\t\r\n\t\t_scale=scale;\r\n\t\t_csf=csf;\r\n\t\t\r\n\t\tif (config.textFormat.align == TextFormatAlign.CENTER) {\r\n\t\t\ttextField.anchor.x = 0.5;\r\n\t\t\ttextField.x = config.width / 2;\r\n\t\t}\r\n\t\telse if (config.textFormat.align == TextFormatAlign.RIGHT) {\r\n\t\t\ttextField.anchor.x = 1;\r\n\t\t\ttextField.x = config.width;\r\n\t\t}\r\n\t\t\r\n\t\tif (debug) {\r\n\t\t\tvar lGraph:Graphics = new Graphics();\r\n\t\t\tlGraph.beginFill(0x00FFFF);\r\n\t\t\tlGraph.drawRect(0,0, config.width, config.height);\r\n\t\t\tlGraph.endFill();\r\n\t\t\tlGraph.alpha = 0.5;\r\n\t\t\taddChild(lGraph);\r\n\t\t}\r\n\t\t\r\n\t\t//TODO: Input text ?\r\n\t\t//restrict=config.restrict;\r\n\t\t//isEditable=config.editable;\r\n\t\t//isEnabled=isEditable || config.selectable;// editable text must be selectable anyway\r\n\t\t//displayAsPassword=config.displayAsPassword;\r\n\t\t//maxChars=config.maxChars;\r\n\t\t//verticalAlign=TextInput.VERTICAL_ALIGN_TOP;\r\n\r\n\t\t//textEditorProperties.textFormat=cloneTextFormat(config.textFormat);\r\n\t\t//textEditorProperties.embedFonts=GAF.useDeviceFonts ? false:config.embedFonts;\r\n\t\t//textEditorProperties.multiline=config.multiline;\r\n\t\t//textEditorProperties.wordWrap=config.wordWrap;\r\n\t\t//textEditorFactory=function():ITextEditor\r\n\t\t//{\r\n\t\t\t//return new GAFTextFieldTextEditor(_scale, _csf);\r\n\t\t//};\r\n\r\n\t\taddChild(textField);\r\n\t\t\r\n\t\tinvalidateSize();\r\n\r\n\t\t_config=config;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * Creates a new instance of GAFTextField.\r\n\t */\r\n\tpublic function copy():GAFTextField\r\n\t{\r\n\t\tvar clone:GAFTextField=new GAFTextField(_config, _scale, _csf);\r\n\t\tclone.alpha=alpha;\r\n\t\tclone.visible=visible;\r\n\t\tclone.transformationMatrix=transformationMatrix;\r\n\t\t//TODO\r\n\t\t//clone.textEditorFactory=textEditorFactory;\r\n\t\tclone.setFilterConfig(_filterConfig, _filterScale);\r\n\r\n\t\treturn clone;\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * We need to update the textField size after the textInput was transformed\r\n\t */\r\n\tpublic function invalidateSize():Void\r\n\t{\r\n\t\t//if(textEditor && textEditor is TextFieldTextEditor)\r\n\t\t//{\r\n\t\t\t//(textEditor as TextFieldTextEditor).invalidate(INVALIDATION_FLAG_SIZE);\r\n\t\t//}\r\n\t\t//invalidate(INVALIDATION_FLAG_SIZE);\r\n\t}\r\n\r\n\tpublic var debugColors(null, set_debugColors):Array<Int>;\r\n \tprivate function set_debugColors(value:Array<Int>):Array<Int>\r\n\t{\r\n\t\t//var t:Texture=Texture.fromColor(1, 1, DebugUtility.RENDERING_NEUTRAL_COLOR, 1, true);\r\n\t\t//var bgImage:Image=new Image(t);\r\n\t\t//var alpha0:Float;\r\n\t\t//var alpha1:Float;\r\n//\r\n\t\t//switch(value.length)\r\n\t\t//{\r\n\t\t\t//case 1:\r\n\t\t\t\t//bgImage.color=value[0];\r\n\t\t\t\t//bgImage.alpha=(value[0]>>>24)/ 255;\r\n\t\t\t\t//break;\r\n\t\t\t//case 2:\r\n\t\t\t\t//bgImage.setVertexColor(0, value[0]);\r\n\t\t\t\t//bgImage.setVertexColor(1, value[0]);\r\n\t\t\t\t//bgImage.setVertexColor(2, value[1]);\r\n\t\t\t\t//bgImage.setVertexColor(3, value[1]);\r\n//\r\n\t\t\t\t//alpha0=(value[0]>>>24)/ 255;\r\n\t\t\t\t//alpha1=(value[1]>>>24)/ 255;\r\n\t\t\t\t//bgImage.setVertexAlpha(0, alpha0);\r\n\t\t\t\t//bgImage.setVertexAlpha(1, alpha0);\r\n\t\t\t\t//bgImage.setVertexAlpha(2, alpha1);\r\n\t\t\t\t//bgImage.setVertexAlpha(3, alpha1);\r\n\t\t\t\t//break;\r\n\t\t\t//case 3:\r\n\t\t\t\t//bgImage.setVertexColor(0, value[0]);\r\n\t\t\t\t//bgImage.setVertexColor(1, value[0]);\r\n\t\t\t\t//bgImage.setVertexColor(2, value[1]);\r\n\t\t\t\t//bgImage.setVertexColor(3, value[2]);\r\n//\r\n\t\t\t\t//alpha0=(value[0]>>>24)/ 255;\r\n\t\t\t\t//bgImage.setVertexAlpha(0, alpha0);\r\n\t\t\t\t//bgImage.setVertexAlpha(1, alpha0);\r\n\t\t\t\t//bgImage.setVertexAlpha(2,(value[1]>>>24)/ 255);\r\n\t\t\t\t//bgImage.setVertexAlpha(3,(value[2]>>>24)/ 255);\r\n\t\t\t\t//break;\r\n\t\t\t//case 4:\r\n\t\t\t\t//bgImage.setVertexColor(0, value[0]);\r\n\t\t\t\t//bgImage.setVertexColor(1, value[1]);\r\n\t\t\t\t//bgImage.setVertexColor(2, value[2]);\r\n\t\t\t\t//bgImage.setVertexColor(3, value[3]);\r\n//\r\n\t\t\t\t//bgImage.setVertexAlpha(0,(value[0]>>>24)/ 255);\r\n\t\t\t\t//bgImage.setVertexAlpha(1,(value[1]>>>24)/ 255);\r\n\t\t\t\t//bgImage.setVertexAlpha(2,(value[2]>>>24)/ 255);\r\n\t\t\t\t//bgImage.setVertexAlpha(3,(value[3]>>>24)/ 255);\r\n\t\t\t\t//break;\r\n\t\t//}\r\n//\r\n\t\t//return backgroundSkin=bgImage;\r\n\t\treturn null;\r\n\t}\r\n\r\n\toverride public function setFilterConfig(value:CFilter, scale:Float=1):Void\r\n\t{\r\n\t\tif(_filterConfig !=value || _filterScale !=scale)\r\n\t\t{\r\n\t\t\tif(value!=null)\r\n\t\t\t{\r\n\t\t\t\t_filterConfig=value;\r\n\t\t\t\t_filterScale=scale;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t_filterConfig=null;\r\n\t\t\t\t_filterScale=null;\r\n\t\t\t}\r\n\r\n\t\t\tapplyFilter();\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate function applyFilter():Void\r\n\t{\r\n\t\t//if(textEditor)\r\n\t\t//{\r\n\t\t\t//if(textEditor is GAFTextFieldTextEditor)\r\n\t\t\t//{\r\n\t\t\t\t//(textEditor as GAFTextFieldTextEditor).setFilterConfig(_filterConfig, _filterScale);\r\n\t\t\t//}\r\n\t\t\t//else if(_filterConfig && !Math.isNaN(_filterScale))\r\n\t\t\t//{\r\n\t\t\t\t//if(_filterChain)\r\n\t\t\t\t//{\r\n\t\t\t\t\t//_filterChain.dispose();\r\n\t\t\t\t//}\r\n\t\t\t\t//else\r\n\t\t\t\t//{\r\n\t\t\t\t\t//_filterChain=new GAFFilterChain();\r\n\t\t\t\t//}\r\n//\r\n\t\t\t\t//_filterChain.setFilterData(_filterConfig);\r\n\t\t\t\t//filter=_filterChain;\r\n\t\t\t//}\r\n\t\t\t//else if(filter)\r\n\t\t\t//{\r\n\t\t\t\t//filter.dispose();\r\n\t\t\t\t//filter=null;\r\n//\r\n\t\t\t\t//_filterChain=null;\r\n\t\t\t//}\r\n\t\t//}\r\n\t}\r\n\r\n\tprivate function __debugHighlight():Void\r\n\t{\r\n\t\tif(Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\t__debugOriginalAlpha=alpha;\r\n\t\t}\r\n\t\talpha=1;\r\n\t}\r\n\r\n\tprivate function __debugLowlight():Void\r\n\t{\r\n\t\tif(Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\t__debugOriginalAlpha=alpha;\r\n\t\t}\r\n\t\talpha=.05;\r\n\t}\r\n\r\n\tprivate function __debugResetLight():Void\r\n\t{\r\n\t\tif(!Math.isNaN(__debugOriginalAlpha))\r\n\t\t{\r\n\t\t\talpha=__debugOriginalAlpha;\r\n\t\t\t__debugOriginalAlpha=null;\r\n\t\t}\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//override private function createTextEditor():Void\r\n\t//{\r\n\t\t//super.createTextEditor();\r\n//\r\n\t\t//applyFilter();\r\n\t//}\r\n\r\n\toverride public function destroy(?options:EitherType<Bool, DestroyOptions>):Void\r\n\t{\r\n\t\tsuper.destroy(options);\r\n\t\t_config=null;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/**\r\n\t * The width of the text in pixels.\r\n\t * @return {Number}\r\n\t */\r\n\tpublic var textWidth(get_textWidth, null):Float;\r\n \tprivate function get_textWidth():Float\r\n\t{\r\n\t\t//validate();\r\n\t\t//textEditor.measureText(HELPER_POINT);\r\n\r\n\t\treturn HELPER_POINT.x;\r\n\t}\r\n\r\n\t/**\r\n\t * The height of the text in pixels.\r\n\t * @return {Number}\r\n\t */\r\n\tpublic var textHeight(get_textHeight, null):Float;\r\n \tprivate function get_textHeight():Float\r\n\t{\r\n\t\t//validate();\r\n\t\t//textEditor.measureText(HELPER_POINT);\r\n\r\n\t\treturn HELPER_POINT.y;\r\n\t}\r\n\t\r\n\tpublic var text (get, set):String;\r\n\t\r\n\tprivate function get_text ():String {\r\n\t\treturn textField.text;\r\n\t}\r\n\t\r\n\tprivate function set_text (pText:String):String {\r\n\t\treturn textField.text = pText;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  STATIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t/** @private */\r\n\tprivate function cloneTextFormat(textFormat:TextStyle):TextStyle\r\n\t{\r\n\t\tif (textFormat==null) throw \"Argument \\\"textFormat\\\" must be not null.\";\r\n\r\n\t\tvar result:TextStyle = new TextStyle();\r\n\t\tresult.fontFamily=textFormat.fontFamily;\r\n\t\tresult.fontSize=textFormat.fontSize;\r\n\t\tresult.fill = textFormat.fill;\r\n\t\tresult.fontWeight=textFormat.fontWeight;\r\n\t\tresult.fontStyle=textFormat.fontStyle;\r\n\t\t//textFormat. = underline;\r\n\t\t//textFormat. = url;\r\n\t\t//textFormat. = target;\r\n\t\tresult.align=textFormat.align;\r\n\t\t//textFormat. = leftMargin;\r\n\t\t//textFormat. = rightMargin;\r\n\t\t//textFormat. = blockIndent;\r\n\t\t//textFormat. = leading;\r\n\r\n\t\treturn result;\r\n\t}\r\n}","package com.github.haxePixiGAF.display;\r\n\r\nimport com.github.haxePixiGAF.data.textures.TextureWrapper;\r\nimport pixi.core.math.Matrix;\r\n\r\nusing com.github.haxePixiGAF.utils.MatrixUtility;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass GAFTexture implements IGAFTexture\r\n{\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE VARIABLES\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tprivate var _id:String;\r\n\tprivate var _texture:TextureWrapper;\r\n\tprivate var _pivotMatrix:Matrix;\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  CONSTRUCTOR\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic function new(id:String, texture:TextureWrapper, pivotMatrix:Matrix)\r\n\t{\r\n\t\t_id=id;\r\n\t\t_texture=texture;\r\n\t\t_pivotMatrix = pivotMatrix;\r\n\t}\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PUBLIC METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\tpublic function copyFrom(newTexture:IGAFTexture):Void\r\n\t{\r\n\t\tif(Std.is(newTexture, GAFTexture))\r\n\t\t{\r\n\t\t\t_id=newTexture.id;\r\n\t\t\t_texture=newTexture.texture;\r\n\t\t\t_pivotMatrix.copyFrom(newTexture.pivotMatrix);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow \"Incompatiable types GAFexture and \"+Type.getClassName(Type.getClass(newTexture));\r\n\t\t}\r\n\t}\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  PRIVATE METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t// OVERRIDDEN METHODS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  EVENT HANDLERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\t//--------------------------------------------------------------------------\r\n\t//\r\n\t//  GETTERS AND SETTERS\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n\tpublic var texture(get_texture, null):TextureWrapper;\r\n \tprivate function get_texture():TextureWrapper\r\n\t{\r\n\t\treturn _texture;\r\n\t}\r\n\r\n\tpublic var pivotMatrix(get_pivotMatrix, null):Matrix;\r\n \tprivate function get_pivotMatrix():Matrix\r\n\t{\r\n\t\treturn _pivotMatrix;\r\n\t}\r\n\r\n\tpublic var id(get_id, null):String;\r\n \tprivate function get_id():String\r\n\t{\r\n\t\treturn _id;\r\n\t}\r\n\r\n\tpublic function clone():IGAFTexture\r\n\t{\r\n\t\treturn new GAFTexture(_id, _texture, _pivotMatrix.clone());\r\n\t}\r\n}","package com.github.haxePixiGAF.sound;\r\n\r\nimport com.github.haxePixiGAF.data.config.CSound;\r\nimport com.github.haxePixiGAF.utils.GAFBytesInput;\r\n\r\n\r\n/**\r\n * TODO\r\n * @author Mathieu Anthoine\r\n *\r\n * \r\n */\r\nclass GAFSoundData\r\n{\r\n\tprivate var onFail:Void->Void;\r\n\tprivate var onSuccess:Void->Void;\r\n\tprivate var _sounds:Dynamic;\r\n\tprivate var _soundQueue:Array<CSound>;\r\n\r\n\t//public function getSoundByLinkage(linkage:String):Sound\r\n\t//{\r\n\t\t//if(_sounds)\r\n\t\t//{\r\n\t\t\t//return _sounds[linkage];\r\n\t\t//}\r\n\t\t//return null;\r\n\t//}\r\n\r\n\t/*gaf_private*/ public function addSound(soundData:CSound, swfName:String, soundBytes:GAFBytesInput):Void\r\n\t{\r\n\t\t//var sound:Sound=new Sound();\r\n\t\t//if(soundBytes)\r\n\t\t//{\r\n\t\t\t//if(soundBytes.position>0)\r\n\t\t\t//{\r\n\t\t\t\t//soundData.sound=_sounds[soundData.linkageName];\r\n\t\t\t\t//return;\r\n\t\t\t//}\r\n\t\t\t//else\r\n\t\t\t//{\r\n\t\t\t\t//sound.loadCompressedDataFromByteArray(soundBytes, soundBytes.length);\r\n\t\t\t//}\r\n\t\t//}\r\n\t\t//else\r\n\t\t//{\r\n\t\t\t//_soundQueue ||=new Array<CSound>();\r\n\t\t\t//_soundQueue.push(soundData);\r\n\t\t//}\r\n//\r\n\t\t//soundData.sound=sound;\r\n//\r\n\t\t//_sounds ||={};\r\n\t\t//if(soundData.linkageName.length>0)\r\n\t\t//{\r\n\t\t\t//_sounds[soundData.linkageName]=sound;\r\n\t\t//}\r\n\t\t//else\r\n\t\t//{\r\n\t\t\t//_sounds[swfName] ||={};\r\n\t\t\t//_sounds[swfName][soundData.soundID]=sound;\r\n\t\t//}\r\n\t}\r\n//\r\n\t//gaf_private function getSound(soundID:Int, swfName:String):Sound\r\n\t//{\r\n\t\t//if(_sounds)\r\n\t\t//{\r\n\t\t\t//return _sounds[swfName][soundID];\r\n\t\t//}\r\n\t\t//return null;\r\n\t//}\r\n//\r\n\t//gaf_private function loadSounds(onSuccess:Function, onFail:Function):Void\r\n\t//{\r\n\t\t//onSuccess=onSuccess;\r\n\t\t//onFail=onFail;\r\n\t\t//loadSound();\r\n\t//}\r\n//\r\n\t//function dispose():Void\r\n\t//{\r\n\t\t//for(var sound:Sound in _sounds)\r\n\t\t//{\r\n\t\t\t//sound.close();\r\n\t\t//}\r\n\t//}\r\n//\r\n\t//private function loadSound():Void\r\n\t//{\r\n\t\t//var soundDataConfig:CSound=_soundQueue.pop();\r\n\t\t//with(soundDataConfig.sound)\r\n\t\t//{\r\n\t\t\t//addEventListener(Event.COMPLETE, onSoundLoaded);\r\n\t\t\t//addEventListener(IOErrorEvent.IO_ERROR, onError);\r\n\t\t\t//load(new URLRequest(soundDataConfig.source));\r\n\t\t//}\r\n\t//}\r\n//\r\n\t//private function onSoundLoaded(event:Event):Void\r\n\t//{\r\n\t\t//removeListeners(event);\r\n//\r\n\t\t//if(_soundQueue.length>0)\r\n\t\t//{\r\n\t\t\t//loadSound();\r\n\t\t//}\r\n\t\t//else\r\n\t\t//{\r\n\t\t\t//onSuccess();\r\n\t\t\t//onSuccess=null;\r\n\t\t\t//onFail=null;\r\n\t\t//}\r\n\t//}\r\n//\r\n\t//private function onError(event:IOErrorEvent):Void\r\n\t//{\r\n\t\t//removeListeners(event);\r\n\t\t//onFail(event);\r\n\t\t//onFail=null;\r\n\t\t//onSuccess=null;\r\n\t//}\r\n//\r\n\t//private function removeListeners(event:Event):Void\r\n\t//{\r\n\t\t//var sound:Sound=event.target as Sound;\r\n\t\t//sound.removeEventListener(Event.COMPLETE, onSoundLoaded);\r\n\t\t//sound.removeEventListener(IOErrorEvent.IO_ERROR, onError);\r\n\t//}\r\n//\r\n\t//gaf_private function get hasSoundsToLoad():Bool\r\n\t//{\r\n\t\t//return _soundQueue && _soundQueue.length>0;\r\n\t//}\r\n}","package com.github.haxePixiGAF.utils;\r\nimport com.github.haxePixiGAF.data.GAF;\r\nimport com.github.haxePixiGAF.data.config.CAnimationFrameInstance;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass DebugUtility\r\n{\r\n\tpublic static var RENDERING_DEBUG:Bool=false;\r\n\r\n\tpublic static inline var RENDERING_NEUTRAL_COLOR:Int=0xCCCCCCCC;\r\n\tpublic static inline var RENDERING_FILTER_COLOR:Int=0xFF00FFFF;\r\n\tpublic static inline var RENDERING_MASK_COLOR:Int=0xFFFF0000;\r\n\tpublic static inline var RENDERING_ALPHA_COLOR:Int=0xFFFFFF00;\r\n\r\n\tprivate static var cHR:Array<Int>=[255, 255, 0, 0, 0, 255, 255];\r\n\tprivate static var cHG:Array<Int>=[0, 255, 255, 255, 0, 0, 0];\r\n\tprivate static var cHB:Array<Int>=[0, 0, 0, 255, 255, 255, 0];\r\n\r\n\tprivate static var aryRGB:Array<Array<Int>>=[cHR, cHG, cHB];\r\n\r\n\tpublic static function getRenderingDifficultyColor(instance:CAnimationFrameInstance,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   alphaLess1:Bool=false, masked:Bool=false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   hasFilter:Bool=false):Array<Int>\r\n\t{\r\n\t\tvar colors:Array<Int>=[];\r\n\t\tif(instance.maskID!=null || masked)\r\n\t\t{\r\n\t\t\tcolors.push(RENDERING_MASK_COLOR);\r\n\t\t}\r\n\t\tif(instance.filter!=null || hasFilter)\r\n\t\t{\r\n\t\t\tcolors.push(RENDERING_FILTER_COLOR);\r\n\t\t}\r\n\t\tif(instance.alpha<GAF.maxAlpha || alphaLess1)\r\n\t\t{\r\n\t\t\tcolors.push(RENDERING_ALPHA_COLOR);\r\n\t\t}\r\n\t\tif(colors.length==0)\r\n\t\t{\r\n\t\t\tcolors.push(RENDERING_NEUTRAL_COLOR);\r\n\t\t}\r\n\r\n\t\treturn colors;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns color that objects would be painted\r\n\t * @param difficulty value from 0 to 255\r\n\t * @return color in ARGB format(from green to red)\r\n\t */\r\n\tprivate static function getColor(difficulty:Int):Int\r\n\t{\r\n\t\tif(difficulty>255)\r\n\t\t{\r\n\t\t\tdifficulty=255;\r\n\t\t}\r\n\r\n\t\tvar colorArr:Array<Int>=getRGB(Math.floor(120 - 120 /(255 / difficulty)));\r\n\r\n\t\tvar color:Int=(((difficulty>>1)+ 0x7F)<<24)| colorArr[0]<<16 | colorArr[1]<<8;\r\n\r\n\t\treturn color;\r\n\t}\r\n\r\n\t// return RGB color from hue circle rotation\r\n\t// [0]=R, [1]=G, [2]=B\r\n\tprivate static function getRGB(rot:Int):Array<Int>\r\n\t{\r\n\t\tvar retVal:Array<Int>=[];\r\n\t\tvar aryNum:Int=0;\r\n\t\t// 0 ~ 360\r\n\t\twhile(rot<0 || rot>360)\r\n\t\t{\r\n\t\t\trot +=(rot<0)? 360:-360;\r\n\t\t}\r\n\t\taryNum=Math.floor(rot / 60);\r\n\t\t// get color\r\n\t\tretVal=getH(rot, aryNum);\r\n\t\treturn retVal;\r\n\t}\r\n\r\n\t// rotation　=>hue\r\n\tprivate static function getH(rot:Int, aryNum:Int):Array<Int>\r\n\t{\r\n\t\tvar retVal:Array<Int>=[0, 0, 0];\r\n\t\tvar nextNum:Int=aryNum + 1;\r\n\t\tfor(i in 0...3)\r\n\t\t{\r\n\t\t\tretVal[i]=getHP(aryRGB[i], rot, aryNum, nextNum);\r\n\t\t}\r\n\t\treturn retVal;\r\n\t}\r\n\r\n\tprivate static function getHP(_P:Array<Int>, rot:Int, aryNum:Int, nextNum:Int):Int\r\n\t{\r\n\t\tvar retVal:Int=0;\r\n\t\tvar aryC:Int=0;\r\n\t\tvar nextC:Int=0;\r\n\t\tvar rH:Int=0;\r\n\t\tvar rotR:Float;\r\n\t\taryC=_P[aryNum];\r\n\t\tnextC=_P[nextNum];\r\n\t\trotR=(aryC + nextC)/ 60 *(rot - 60 * aryNum);\r\n\t\trH=Math.floor((_P[nextNum]==0)? aryC - rotR:aryC + rotR);\r\n\t\tretVal=Math.round(Math.min(255, Math.abs(rH)));\r\n\t\treturn retVal;\r\n\t}\r\n\r\n\tpublic static function getObjectMemoryHash(obj:Dynamic):String\r\n\t{\r\n\t\tvar memoryHash:String=null;\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\t//TODO FakeClass\r\n\t\t\ttrace (\"TODO: FakeClass\");\r\n\t\t\t//FakeClass(obj);\r\n\t\t}\r\n\t\tcatch(e:Dynamic)\r\n\t\t{\r\n\t\t\t//TODO memoryHash\r\n\t\t\ttrace (\"TODO: memoryHash\");\r\n\t\t\tmemoryHash = \"TODO: memoryHash\";// Std.string(e).replace(/.*([@|\\$].*?)to .*$/gi, '$1');\r\n\t\t}\r\n\r\n\t\treturn memoryHash;\r\n\t}\r\n}\r\n\r\n/*\r\nclass FakeClass\r\n{\r\n}\r\n*/\r\n","package com.github.haxePixiGAF.utils;\r\nimport pixi.interaction.EventEmitter;\r\n\r\n/**\r\n * Class that adds equivalents to AS3 methods\r\n * @author Mathieu Anthoine\r\n */\r\nclass EventEmitterUtility\r\n{\r\n\r\n\tpublic static function hasEventListener(pEmitter:EventEmitter,pEvent:String):Bool {\r\n\t\tif (pEmitter.listeners==null) return false;\r\n\t\treturn pEmitter.listeners(pEvent).length > 0;\r\n\t}\r\n\t\r\n}","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.io;\n\n/**\n\tAn Input is an abstract reader. See other classes in the `haxe.io` package\n\tfor several possible implementations.\n**/\nclass Input {\n\n\t/**\n\t\tEndianness (word byte order) used when reading numbers.\n\n\t\tIf `true`, big-endian is used, otherwise `little-endian` is used.\n\t**/\n\tpublic var bigEndian(default,set) : Bool;\n\n\t#if cs\n\tprivate var helper:BytesData;\n\t#elseif java\n\tprivate var helper:java.nio.ByteBuffer;\n\t#end\n\n\t/**\n\t\tRead and return one byte.\n\t**/\n\tpublic function readByte() : Int {\n\t#if cpp\n\t\tthrow \"Not implemented\";\n\t#else\n\t\treturn throw \"Not implemented\";\n\t#end\n\t}\n\n\t/**\n\t\tRead `len` bytes and write them into `s` to the position specified by `pos`.\n\n\t\tReturns the actual length of read data that can be smaller than `len`.\n\n\t\tSee `readFullBytes` that tries to read the exact amount of specified bytes.\n\t**/\n\tpublic function readBytes( s : Bytes, pos : Int, len : Int ) : Int {\n\t\tvar k = len;\n\t\tvar b = #if (js || hl) @:privateAccess s.b #else s.getData() #end;\n\t\tif( pos < 0 || len < 0 || pos + len > s.length )\n\t\t\tthrow Error.OutsideBounds;\n\t\ttry {\n\t\t\twhile( k > 0 ) {\n\t\t\t    #if neko\n\t\t\t\t    untyped __dollar__sset(b,pos,readByte());\n\t\t\t    #elseif php\n\t\t\t\t    b.set(pos, readByte());\n\t\t\t    #elseif cpp\n\t\t\t\t    b[pos] = untyped readByte();\n\t\t\t    #else\n\t\t\t\t    b[pos] = cast readByte();\n\t\t\t    #end\n\t\t\t    pos++;\n\t\t\t    k--;\n\t\t\t}\n\t\t} catch (eof: haxe.io.Eof){}\n\t\treturn len-k;\n\t}\n\n\t/**\n\t\tClose the input source.\n\n\t\tBehaviour while reading after calling this method is unspecified.\n\t**/\n\tpublic function close() : Void {\n\t}\n\n\tfunction set_bigEndian( b : Bool ) : Bool {\n\t\tbigEndian = b;\n\t\treturn b;\n\t}\n\n\t/* ------------------ API ------------------ */\n\n\t/**\n\t\tRead and return all available data.\n\n\t\tThe `bufsize` optional argument specifies the size of chunks by\n\t\twhich data is read. Its default value is target-specific.\n\t**/\n\tpublic function readAll( ?bufsize : Int ) : Bytes {\n\t\tif( bufsize == null )\n\t\t#if php\n\t\t\tbufsize = 8192; // default value for PHP and max under certain circumstances\n\t\t#else\n\t\t\tbufsize = (1 << 14); // 16 Ko\n\t\t#end\n\n\t\tvar buf = Bytes.alloc(bufsize);\n\t\tvar total = new haxe.io.BytesBuffer();\n\t\ttry {\n\t\t\twhile( true ) {\n\t\t\t\tvar len = readBytes(buf,0,bufsize);\n\t\t\t\tif( len == 0 )\n\t\t\t\t\tthrow Error.Blocked;\n\t\t\t\ttotal.addBytes(buf,0,len);\n\t\t\t}\n\t\t} catch( e : Eof ) { }\n\t\treturn total.getBytes();\n\t}\n\n\t/**\n\t\tRead `len` bytes and write them into `s` to the position specified by `pos`.\n\n\t\tUnlike `readBytes`, this method tries to read the exact `len` amount of bytes.\n\t**/\n\tpublic function readFullBytes( s : Bytes, pos : Int, len : Int ) : Void {\n\t\twhile( len > 0 ) {\n\t\t\tvar k = readBytes(s,pos,len);\n\t\t\tif (k == 0)\n\t\t\t\tthrow Error.Blocked;\n\t\t\tpos += k;\n\t\t\tlen -= k;\n\t\t}\n\t}\n\n\t/**\n\t\tRead and return `nbytes` bytes.\n\t**/\n\tpublic function read( nbytes : Int ) : Bytes {\n\t\tvar s = Bytes.alloc(nbytes);\n\t\tvar p = 0;\n\t\twhile( nbytes > 0 ) {\n\t\t\tvar k = readBytes(s,p,nbytes);\n\t\t\tif( k == 0 ) throw Error.Blocked;\n\t\t\tp += k;\n\t\t\tnbytes -= k;\n\t\t}\n\t\treturn s;\n\t}\n\n\t/**\n\t\tRead a string until a character code specified by `end` is occurred.\n\n\t\tThe final character is not included in the resulting string.\n\t**/\n\tpublic function readUntil( end : Int ) : String {\n\t\tvar buf = new StringBuf();\n\t\tvar last : Int;\n\t\twhile( (last = readByte()) != end )\n\t\t\tbuf.addChar( last );\n\t\treturn buf.toString();\n\t}\n\n\t/**\n\t\tRead a line of text separated by CR and/or LF bytes.\n\n\t\tThe CR/LF characters are not included in the resulting string.\n\t**/\n\tpublic function readLine() : String {\n\t\tvar buf = new StringBuf();\n\t\tvar last : Int;\n\t\tvar s;\n\t\ttry {\n\t\t\twhile( (last = readByte()) != 10 )\n\t\t\t\tbuf.addChar( last );\n\t\t\ts = buf.toString();\n\t\t\tif( s.charCodeAt(s.length-1) == 13 ) s = s.substr(0,-1);\n\t\t} catch( e : Eof ) {\n\t\t\ts = buf.toString();\n\t\t\tif( s.length == 0 )\n\t\t\t\t#if neko neko.Lib.rethrow #else throw #end (e);\n\t\t}\n\t\treturn s;\n\t}\n\n\t/**\n\t\tRead a 32-bit floating point number.\n\n\t\tEndianness is specified by the `bigEndian` property.\n\t**/\n\tpublic #if !(flash || python) inline #end function readFloat() : Float {\n\t\treturn FPHelper.i32ToFloat(readInt32());\n\t}\n\n\t/**\n\t\tRead a 64-bit double-precision floating point number.\n\n\t\tEndianness is specified by the `bigEndian` property.\n\t**/\n\tpublic function readDouble() : Float {\n\t\tvar i1 = readInt32();\n\t\tvar i2 = readInt32();\n\t\treturn bigEndian ? FPHelper.i64ToDouble(i2,i1) : FPHelper.i64ToDouble(i1,i2);\n\t}\n\n\t/**\n\t\tRead a 8-bit signed integer.\n\t**/\n\tpublic function readInt8() : Int {\n\t\tvar n = readByte();\n\t\tif( n >= 128 )\n\t\t\treturn n - 256;\n\t\treturn n;\n\t}\n\n\t/**\n\t\tRead a 16-bit signed integer.\n\n\t\tEndianness is specified by the `bigEndian` property.\n\t**/\n\tpublic function readInt16() : Int {\n\t\tvar ch1 = readByte();\n\t\tvar ch2 = readByte();\n\t\tvar n = bigEndian ? ch2 | (ch1 << 8) : ch1 | (ch2 << 8);\n\t\tif( n & 0x8000 != 0 )\n\t\t\treturn n - 0x10000;\n\t\treturn n;\n\t}\n\n\t/**\n\t\tRead a 16-bit unsigned integer.\n\n\t\tEndianness is specified by the `bigEndian` property.\n\t**/\n\tpublic function readUInt16() : Int {\n\t\tvar ch1 = readByte();\n\t\tvar ch2 = readByte();\n\t\treturn bigEndian ? ch2 | (ch1 << 8) : ch1 | (ch2 << 8);\n\t}\n\n\t/**\n\t\tRead a 24-bit signed integer.\n\n\t\tEndianness is specified by the `bigEndian` property.\n\t**/\n\tpublic function readInt24() : Int {\n\t\tvar ch1 = readByte();\n\t\tvar ch2 = readByte();\n\t\tvar ch3 = readByte();\n\t\tvar n = bigEndian ? ch3 | (ch2 << 8) | (ch1 << 16) : ch1 | (ch2 << 8) | (ch3 << 16);\n\t\tif( n & 0x800000 != 0 )\n\t\t\treturn n - 0x1000000;\n\t\treturn n;\n\t}\n\n\t/**\n\t\tRead a 24-bit unsigned integer.\n\n\t\tEndianness is specified by the `bigEndian` property.\n\t**/\n\tpublic function readUInt24() : Int {\n\t\tvar ch1 = readByte();\n\t\tvar ch2 = readByte();\n\t\tvar ch3 = readByte();\n\t\treturn bigEndian ? ch3 | (ch2 << 8) | (ch1 << 16) : ch1 | (ch2 << 8) | (ch3 << 16);\n\t}\n\n\t/**\n\t\tRead a 32-bit signed integer.\n\n\t\tEndianness is specified by the `bigEndian` property.\n\t**/\n\tpublic function readInt32() : Int {\n\t\tvar ch1 = readByte();\n\t\tvar ch2 = readByte();\n\t\tvar ch3 = readByte();\n\t\tvar ch4 = readByte();\n#if (php || python)\n\t\t// php will overflow integers.  Convert them back to signed 32-bit ints.\n\t\tvar n = bigEndian ? ch4 | (ch3 << 8) | (ch2 << 16) | (ch1 << 24) : ch1 | (ch2 << 8) | (ch3 << 16) | (ch4 << 24);\n\t\tif (n & 0x80000000 != 0)\n\t\t    return ( n | 0x80000000);\n\t\telse return n;\n#elseif lua\n\t\tvar n = bigEndian ? ch4 | (ch3 << 8) | (ch2 << 16) | (ch1 << 24) : ch1 | (ch2 << 8) | (ch3 << 16) | (ch4 << 24);\n\t\t// lua can't do 32 bit ints, the adjustment for 64 bits must be numeric\n\t\tif (n > 2147483647) n -=  untyped 4294967296.;\n\t\treturn n ;\n#else\n\t\treturn bigEndian ? ch4 | (ch3 << 8) | (ch2 << 16) | (ch1 << 24) : ch1 | (ch2 << 8) | (ch3 << 16) | (ch4 << 24);\n#end\n\t}\n\n\t/**\n\t\tRead and `len` bytes as a string.\n\t**/\n\tpublic function readString( len : Int ) : String {\n\t\tvar b = Bytes.alloc(len);\n\t\treadFullBytes(b,0,len);\n\t\t#if neko\n\t\treturn neko.Lib.stringReference(b);\n\t\t#else\n\t\treturn b.toString();\n\t\t#end\n\t}\n\n#if neko\n\tstatic var _float_of_bytes = neko.Lib.load(\"std\",\"float_of_bytes\",2);\n\tstatic var _double_of_bytes = neko.Lib.load(\"std\",\"double_of_bytes\",2);\n\tstatic function __init__() untyped {\n\t\tInput.prototype.bigEndian = false;\n\t}\n#end\n\n#if (flash || js || python)\n\tfunction getDoubleSig(bytes:Array<Int>)\n    {\n        return (((bytes[1]&0xF) << 16) | (bytes[2] << 8) | bytes[3] ) * 4294967296. +\n            (bytes[4] >> 7) * 2147483648 +\n            (((bytes[4]&0x7F) << 24) | (bytes[5] << 16) | (bytes[6] << 8) | bytes[7]);\n    }\n#end\n\n}\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.io;\n\nclass BytesInput extends Input {\n\tvar b : #if js js.html.Uint8Array #elseif hl hl.types.Bytes #else BytesData #end;\n\t#if !flash\n\tvar pos : Int;\n\tvar len : Int;\n\tvar totlen : Int;\n\t#end\n\n\t/** The current position in the stream in bytes. */\n\tpublic var position(get,set) : Int;\n\n\t/** The length of the stream in bytes. */\n\tpublic var length(get,never) : Int;\n\n\tpublic function new( b : Bytes, ?pos : Int, ?len : Int ) {\n\t\tif( pos == null ) pos = 0;\n\t\tif( len == null ) len = b.length - pos;\n\t\tif( pos < 0 || len < 0 || pos + len > b.length ) throw Error.OutsideBounds;\n\t\t#if flash\n\t\tvar ba = b.getData();\n\t\tba.position = pos;\n\t\tif( len != ba.bytesAvailable ) {\n\t\t\t// truncate\n\t\t\tthis.b = new flash.utils.ByteArray();\n\t\t\tba.readBytes(this.b,0,len);\n\t\t} else\n\t\t\tthis.b = ba;\n\t\tthis.b.endian = flash.utils.Endian.LITTLE_ENDIAN;\n\t\t#else\n\t\tthis.b = #if (js || hl) @:privateAccess b.b #else b.getData() #end;\n\t\tthis.pos = pos;\n\t\tthis.len = len;\n\t\tthis.totlen = len;\n\t\t#end\n\t\t#if python\n\t\tbigEndian = false;\n\t\t#end\n\t}\n\n\tinline function get_position() : Int {\n\t\t#if flash\n\t\treturn b.position;\n\t\t#else\n\t\treturn pos;\n\t\t#end\n\t}\n\n\tinline function get_length() : Int {\n\t\t#if flash\n\t\treturn b.length;\n\t\t#else\n\t\treturn totlen;\n\t\t#end\n\t}\n\n\tfunction set_position( p : Int ) : Int {\n\t\tif( p < 0 ) p = 0;\n\t\telse if( p > length ) p = length;\n\t\t#if flash\n\t\treturn b.position = p;\n\t\t#else\n\t\tlen = totlen - p;\n\t\treturn pos = p;\n\t\t#end\n\t}\n\n\tpublic override function readByte() : Int {\n\t\t#if flash\n\t\t\treturn try b.readUnsignedByte() catch( e : Dynamic ) throw new Eof();\n\t\t#else\n\t\t\tif( this.len == 0 )\n\t\t\t\tthrow new Eof();\n\t\t\tlen--;\n\t\t\t#if neko\n\t\t\treturn untyped __dollar__sget(b,pos++);\n\t\t\t#elseif php\n\t\t\treturn b.get(pos++);\n\t\t\t#elseif cpp\n\t\t\treturn untyped b[pos++];\n\t\t\t#elseif java\n\t\t\treturn untyped b[pos++] & 0xFF;\n\t\t\t#else\n\t\t\treturn b[pos++];\n\t\t\t#end\n\t\t#end\n\t}\n\n\tpublic override function readBytes( buf : Bytes, pos, len ) : Int {\n\t\t#if !neko\n\t\t\tif( pos < 0 || len < 0 || pos + len > buf.length )\n\t\t\t\tthrow Error.OutsideBounds;\n\t\t#end\n\t\t#if flash\n\t\t\tvar avail : Int = b.bytesAvailable;\n\t\t\tif( len > avail && avail > 0 ) len = avail;\n\t\t\ttry b.readBytes(buf.getData(),pos,len) catch( e : Dynamic ) throw new Eof();\n\t\t#elseif java\n\t\t\tvar avail : Int = this.len;\n\t\t\tif ( len > avail ) len = avail;\n\t\t\tif (len == 0)\n\t\t\t\tthrow new Eof();\n\t\t\tjava.lang.System.arraycopy(this.b, this.pos, buf.getData(), pos, len);\n\t\t\tthis.pos += len;\n\t\t\tthis.len -= len;\n\t\t#elseif cs\n\t\t\tvar avail : Int = this.len;\n\t\t\tif ( len > avail ) len = avail;\n\t\t\tif (len == 0)\n\t\t\t\tthrow new Eof();\n\t\t\tcs.system.Array.Copy(this.b,this.pos, buf.getData(), pos, len);\n\t\t\tthis.pos += len;\n\t\t\tthis.len -= len;\n\t\t#else\n\t\t\tif( this.len == 0 && len > 0 )\n\t\t\t\tthrow new Eof();\n\t\t\tif( this.len < len )\n\t\t\t\tlen = this.len;\n\t\t\t#if neko\n\t\t\ttry untyped __dollar__sblit(buf.getData(),pos,b,this.pos,len) catch( e : Dynamic ) throw Error.OutsideBounds;\n\t\t\t#elseif php\n\t\t\tbuf.getData().blit(pos, b, this.pos, len);\n\t\t\t#elseif hl\n\t\t\t@:privateAccess buf.b.blit(pos, b, this.pos, len);\n\t\t\t#else\n\t\t\tvar b1 = b;\n\t\t\tvar b2 = #if js @:privateAccess buf.b #else buf.getData() #end;\n\t\t\tfor( i in 0...len )\n\t\t\t\tb2[pos+i] = b1[this.pos+i];\n\t\t\t#end\n\t\t\tthis.pos += len;\n\t\t\tthis.len -= len;\n\t\t#end\n\t\treturn len;\n\t}\n\n\t#if flash\n\t@:dox(hide)\n\toverride function set_bigEndian(e) {\n\t\tbigEndian = e;\n\t\tb.endian = e ? flash.utils.Endian.BIG_ENDIAN : flash.utils.Endian.LITTLE_ENDIAN;\n\t\treturn e;\n\t}\n\n\t@:dox(hide)\n\toverride function readFloat() {\n\t\treturn try b.readFloat() catch( e : Dynamic ) throw new Eof();\n\t}\n\n\t@:dox(hide)\n\toverride function readDouble() {\n\t\treturn try b.readDouble() catch( e : Dynamic ) throw new Eof();\n\t}\n\n\t@:dox(hide)\n\toverride function readInt8() {\n\t\treturn try b.readByte() catch( e : Dynamic ) throw new Eof();\n\t}\n\n\t@:dox(hide)\n\toverride function readInt16() {\n\t\treturn try b.readShort() catch( e : Dynamic ) throw new Eof();\n\t}\n\n\t@:dox(hide)\n\toverride function readUInt16() : Int {\n\t\treturn try b.readUnsignedShort() catch( e : Dynamic ) throw new Eof();\n\t}\n\n\t@:dox(hide)\n\toverride function readInt32() : Int {\n\t\treturn try b.readInt() catch( e : Dynamic ) throw new Eof();\n\t}\n\n\t@:dox(hide)\n\toverride function readString( len : Int ) {\n\t\treturn try b.readUTFBytes(len) catch( e : Dynamic ) throw new Eof();\n\t}\n\n\t#end\n\n}\n","package com.github.haxePixiGAF.utils;\r\n\r\nimport haxe.io.Bytes;\r\nimport haxe.io.BytesInput;\r\n\r\n/**\r\n * AS3 ByteArray \"Wrapper\"\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFBytesInput extends BytesInput {\r\n\r\n\tpublic function new(b:Bytes, ?pos:Int, ?len:Int) \r\n\t{\r\n\t\tsuper(b, pos, len);\t\r\n\t}\t\r\n\t\r\n\t// AS3 readByte\r\n\tpublic function readSByte():Int {\r\n\t\tvar lByte:Int = readByte();\r\n\t\treturn lByte > 128 ? lByte-256 : lByte;\r\n\t}\r\n\t\r\n\tpublic function readUnsignedByte ():UInt {\r\n\t\treturn readByte();\r\n\t}\r\n\t\r\n\tpublic function readShort():Int {\r\n\t\tvar lByte:Int = readUInt16();\r\n\t\treturn lByte > 128 ? lByte-256 : lByte;\r\n\t}\t\r\n\t\r\n\tpublic function readUnsignedShort ():UInt {\r\n\t\treturn readUInt16();\r\n\t}\r\n\t\r\n\tpublic function readInt ():Int {\r\n\t\treturn readUInt32();\r\n\t\t//var lInt:Float = readUInt32();\r\n\t\t//lInt = lInt > 2147483648 ? lInt - 4294967296 : lInt;\r\n\t\t//return cast(lInt, Int);\r\n\t}\r\n\t\r\n\tpublic function readUnsignedInt():UInt {\r\n\t\treturn untyped readUInt32();\r\n\t}\r\n\r\n\t/**\r\n\t * may return an Unsigned Int32 but UInt32 are converted to Int32 if they are above 2147483648\r\n\t * @return signed Int32\r\n\t */\r\n\tprivate function readUInt32 ():UInt {\r\n\t\tvar lA:UInt = readUInt16();\r\n\t\tvar lB:UInt = readUInt16();\r\n\t\treturn (lB << 16) + lA;\r\n\t}\r\n\t\r\n\tpublic function readBoolean ():Bool {\r\n\t\treturn readSByte() != 0;\r\n\t}\r\n\t\r\n\tpublic function readUTF ():String {\r\n\t\treturn readString(readUnsignedShort());\r\n\t}\r\n\t\r\n\t\r\n}","package com.github.haxePixiGAF.utils;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass MathUtility\r\n{\r\n\tpublic static inline var epsilon:Float=0.00001;\r\n\r\n\tpublic static var PI_Q:Float=Math.PI / 4.0;\r\n\r\n\tpublic static inline function equals(a:Float, b:Float):Bool\r\n\t{\r\n\t\tif(Math.isNaN(a)|| Math.isNaN(b))\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn Math.abs(a - b)<epsilon;\r\n\t}\r\n\r\n\tpublic static function getItemIndex(source:Array<Float>, target:Float):Int\r\n\t{\r\n\t\tfor(i in 0...source.length)\r\n\t\t{\r\n\t\t\tif(equals(source[i], target))\r\n\t\t\t{\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n}","package com.github.haxePixiGAF.utils;\r\nimport pixi.core.math.Matrix;\r\n\r\n/**\r\n * Class that adds equivalents to AS3 methods\r\n * @author Mathieu Anthoine\r\n */\r\nclass MatrixUtility\r\n{\r\n\t\r\n\tpublic static function concat (pA:Matrix,pB:Matrix):Void {\r\n\t\tvar lMatrix:Matrix = new Matrix();\r\n\t\t\r\n\t\tlMatrix.a = pB.a * pA.a + pB.c * pA.b;\r\n\t\tlMatrix.b = (pB.b*pA.a+pB.d*pA.b);\r\n\t\tlMatrix.c = (pB.a*pA.c+pB.c*pA.d);\r\n\t\tlMatrix.d = pB.b * pA.c + pB.d * pA.d;\r\n\t\tlMatrix.tx = pB.a*pA.tx+pB.c*pA.ty+pB.tx;\r\n\t\tlMatrix.ty = pB.b*pA.tx+pB.d*pA.ty+pB.ty;\r\n\t\t\r\n\t\tlMatrix.copy(pA);\r\n\r\n\t}\r\n\t\r\n\tpublic static function copyFrom(pA:Matrix, pB:Matrix):Void {\r\n\t\tpB.copy(pA);\r\n\t}\r\n\t\r\n}","package com.github.haxePixiGAF.utils;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\n/**\r\n * Class that adds equivalents to AS3 methods\r\n * @author Mathieu Anthoine\r\n */\r\nclass RectangleUtility\r\n{\r\n\tpublic static function copyFrom(pA:Rectangle, pB:Rectangle):Void {\r\n\t\tpA.x = pB.x;\r\n\t\tpA.y = pB.y;\r\n\t\tpA.width = pB.width;\r\n\t\tpA.height = pB.height;\r\n\t}\r\n\t\r\n\tpublic static function union(pA:Rectangle, pB:Rectangle):Rectangle {\r\n\t\tvar lX:Float = Math.min(pA.x, pB.x);\r\n\t\tvar lY:Float = Math.min(pA.y, pB.y);\r\n\t\tvar lRight:Float = Math.max(pA.x + pA.width, pB.x + pB.width);\r\n\t\tvar lBottom:Float = Math.max(pA.y + pA.height, pB.y + pB.height);\r\n\r\n\t\treturn new Rectangle(lX, lY, lRight - lX, lBottom - lY);\r\n\r\n\t}\r\n}","package com.github.mathieuanthoine.gaf;\r\n\r\nimport com.github.haxePixiGAF.core.GAFLoader;\r\nimport com.github.haxePixiGAF.core.ZipToGAFAssetConverter;\r\nimport com.github.haxePixiGAF.data.GAFBundle;\r\nimport com.github.haxePixiGAF.data.GAFGFXData;\r\nimport com.github.haxePixiGAF.data.GAFTimeline;\r\nimport com.github.haxePixiGAF.display.GAFImage;\r\nimport com.github.haxePixiGAF.display.GAFMovieClip;\r\nimport com.github.haxePixiGAF.display.GAFTextField;\r\nimport com.github.haxePixiGAF.display.GAFTexture;\r\nimport com.github.haxePixiGAF.display.IGAFTexture;\r\nimport com.github.haxePixiGAF.events.GAFEvent;\r\nimport haxe.Timer;\r\nimport haxe.ds.ObjectMap;\r\nimport js.Browser;\r\nimport js.Lib;\r\nimport js.html.CanvasElement;\r\nimport js.html.MouseEvent;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.math.Matrix;\r\nimport pixi.core.renderers.Detector;\r\nimport pixi.core.renderers.webgl.WebGLRenderer;\r\nimport pixi.core.sprites.Sprite;\r\nimport pixi.core.textures.Texture;\r\nimport pixi.interaction.InteractionEvent;\r\nimport pixi.loaders.LoaderOptions;\r\n\r\n/**\r\n * @author Mathieu Anthoine\r\n */\r\n\r\nclass Main\r\n{\r\n\r\n\tprivate var renderer:WebGLRenderer;\r\n\tprivate var stage:Container;\r\n\t\r\n\tprivate var _gafMovieClip: GAFMovieClip;\r\n\t\r\n\tprivate static function main ():Void\r\n\t{\r\n\t\tnew Main();\r\n\t}\r\n\r\n\t/**\r\n\t * création du jeu\r\n\t*/\r\n\tprivate function new ()\r\n\t{\r\n\t\trenderer = Detector.autoDetectRenderer(800, 600, {backgroundColor : 0x999999});\r\n\t\tBrowser.document.body.appendChild(renderer.view);\r\n\r\n\t\tstage = new Container();\r\n\t\t\r\n\t\tnew Perf(\"TL\");\r\n\t\t\r\n\t\tvar converter: ZipToGAFAssetConverter = new ZipToGAFAssetConverter();\r\n\t\tconverter.on(GAFEvent.COMPLETE, onConverted);\t\t\r\n\t\tconverter.convert(\"RedRobot/RedRobot.gaf\");\r\n\t\t\r\n\t}\r\n\t\r\n\tprivate function onConverted (pEvent:Dynamic):Void {\r\n\r\n\t\tvar gafBundle:GAFBundle = cast(pEvent.target, ZipToGAFAssetConverter).gafBundle;\r\n\t\tvar gafTimeline: GAFTimeline = gafBundle.getGAFTimeline(\"RedRobot\");\r\n\t\t\r\n\t\t_gafMovieClip = new GAFMovieClip(gafTimeline);\r\n\t\tsetSequence(\"stand\");\r\n\t\t\r\n\t\tstage.addChild(_gafMovieClip);\r\n\t\t\r\n\t\t_gafMovieClip.interactive = true;\r\n\t\t\r\n\t\t_gafMovieClip.on(\"click\", onClick);\r\n\t\tBrowser.window.requestAnimationFrame(gameLoop);\r\n\t\t\r\n\t}\r\n\t\r\n\tprivate function setSequence(sequence: String): Void\r\n\t{\r\n\t\t_gafMovieClip.setSequence(sequence);\r\n\t\tcast(_gafMovieClip.getField(\"sequence\"),GAFTextField).text = sequence;\r\n\t}\r\n\t\r\n\tprivate function onClick(pEvent: MouseEvent): Void\r\n\t{\t\r\n\t\tif (_gafMovieClip.currentSequence == \"walk\")\r\n\t\t{\r\n\t\t\tsetSequence(\"stand\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tsetSequence(\"walk\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function gameLoop(pIdentifier:Float)\r\n\t{\r\n\t\tBrowser.window.requestAnimationFrame(gameLoop);\r\n\t\trenderer.render(stage);\r\n\t}\r\n\r\n}","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe;\n\n/**\n\tLog primarily provides the `trace()` method, which is invoked upon a call to\n\t`trace()` in Haxe code.\n**/\nclass Log {\n\n\t/**\n\t\tOutputs `v` in a platform-dependent way.\n\n\t\tThe second parameter `infos` is injected by the compiler and contains\n\t\tinformation about the position where the `trace()` call was made.\n\n\t\tThis method can be rebound to a custom function:\n\t\t\tvar oldTrace = haxe.Log.trace; // store old function\n\t\t\thaxe.Log.trace = function(v,infos) { // handle trace }\n\t\t\t...\n\t\t\thaxe.Log.trace = oldTrace;\n\n\t\tIf it is bound to null, subsequent calls to `trace()` will cause an\n\t\texception.\n\t**/\n\tpublic static dynamic function trace( v : Dynamic, ?infos : PosInfos ) : Void {\n\t\t#if flash\n\t\t\t#if (fdb || native_trace)\n\t\t\t\tvar pstr = infos == null ? \"(null)\" : infos.fileName + \":\" + infos.lineNumber;\n\t\t\t\tvar str = flash.Boot.__string_rec(v, \"\");\n\t\t\t\tif( infos != null && infos.customParams != null ) for( v in infos.customParams ) str += \",\" + flash.Boot.__string_rec(v, \"\");\n\t\t\t\tuntyped __global__[\"trace\"](pstr+\": \"+str);\n\t\t\t#else\n\t\t\t\tuntyped flash.Boot.__trace(v,infos);\n\t\t\t#end\n\t\t#elseif neko\n\t\t\tuntyped {\n\t\t\t\t$print(infos.fileName + \":\" + infos.lineNumber + \": \", v);\n\t\t\t\tif( infos.customParams != null ) for( v in infos.customParams ) $print(\",\", v);\n\t\t\t\t$print(\"\\n\");\n\t\t\t}\n\t\t#elseif js\n\t\t\tuntyped js.Boot.__trace(v,infos);\n\t\t#elseif php\n\t\t\tif (infos!=null && infos.customParams!=null) {\n\t\t\t\tvar extra:String = \"\";\n\t\t\t\tfor( v in infos.customParams )\n\t\t\t\t\textra += \",\" + v;\n\t\t\t\tuntyped __call__('_hx_trace', v + extra, infos);\n\t\t\t}\n\t\t\telse\n\t\t\t\tuntyped __call__('_hx_trace', v, infos);\n\t\t#elseif cpp\n\t\t\tif (infos!=null && infos.customParams!=null) {\n\t\t\t\tvar extra:String = \"\";\n\t\t\t\tfor( v in infos.customParams )\n\t\t\t\t\textra += \",\" + v;\n\t\t\t\tuntyped __trace(v + extra,infos);\n\t\t\t}\n\t\t\telse\n\t\t\t\tuntyped __trace(v,infos);\n\t\t#elseif (cs || java || lua)\n\t\t\tvar str:String = null;\n\t\t\tif (infos != null) {\n\t\t\t\tstr = infos.fileName + \":\" + infos.lineNumber + \": \" + v;\n\t\t\t\tif (infos.customParams != null)\n\t\t\t\t{\n\t\t\t\t\tstr += \",\" + infos.customParams.join(\",\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstr = v;\n\t\t\t}\n\t\t\t#if cs\n\t\t\tcs.system.Console.WriteLine(str);\n\t\t\t#elseif java\n\t\t\tuntyped __java__(\"java.lang.System.out.println(str)\");\n\t\t\t#elseif lua\n\t\t\tuntyped __lua__(\"_hx_print({0})\", lua.Boot.__string_rec(str));\n\t\t\t#end\n\t\t#elseif (python)\n\t\t\tvar str:String = null;\n\t\t\tif (infos != null) {\n\t\t\t\tstr = infos.fileName + \":\" + Std.string(infos.lineNumber) + \": \" + v;\n\t\t\t\tif (infos.customParams != null) {\n\t\t\t\t\tstr += \",\" + infos.customParams.join(\",\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstr = v;\n\t\t\t}\n\t\t\tpython.Lib.println(str);\n\t\t#elseif hl\n\t\t\tvar pstr = infos == null ? \"(null)\" : infos.fileName + \":\" + infos.lineNumber;\n\t\t\tvar str = Std.string(v);\n\t\t\tif( infos != null && infos.customParams != null ) for( v in infos.customParams ) str += \",\" + Std.string(v);\n\t\t\tSys.println(pstr+\": \"+str);\n\t\t#end\n\t}\n\n\t#if (flash || js)\n\t/**\n\t\tClears the trace output.\n\t**/\n\tpublic static dynamic function clear() : Void {\n\t\t#if flash\n\t\tuntyped flash.Boot.__clear_trace();\n\t\t#elseif js\n\t\tuntyped js.Boot.__clear_trace();\n\t\t#end\n\t}\n\t#end\n\n\t#if flash\n\t/**\n\t\tSets the color of the trace output to `rgb`.\n\t**/\n\tpublic static dynamic function setColor( rgb : Int ) {\n\t\tuntyped flash.Boot.__set_trace_color(rgb);\n\t}\n\t#end\n\n}\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of h software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and h permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage haxe.ds;\n\n@:coreApi\nclass ObjectMap<K:{ }, V> implements haxe.Constraints.IMap<K,V> {\n\n\tstatic var count = 0;\n\n\tstatic inline function assignId(obj: { } ):Int {\n\t\treturn untyped obj.__id__ = ++count;\n\t}\n\n\tstatic inline function getId(obj: { } ):Int {\n\t\treturn untyped obj.__id__;\n\t}\n\n\tvar h : { };\n\n\tpublic function new() : Void {\n\t\th = { __keys__: {} };\n\t}\n\n\tpublic function set(key:K, value:V):Void untyped {\n\t\tvar id : Int = getId(key) || assignId(key);\n\t\th[id] = value;\n\t\th.__keys__[id] = key;\n\t}\n\n\tpublic inline function get(key:K):Null<V> {\n\t\treturn untyped h[getId(key)];\n\t}\n\n\tpublic inline function exists(key:K):Bool {\n\t\treturn untyped h.__keys__[getId(key)] != null;\n\t}\n\n\tpublic function remove( key : K ) : Bool {\n\t\tvar id = getId(key);\n\t\tif ( untyped h.__keys__[id] == null ) return false;\n\t\tuntyped  __js__(\"delete\")(h[id]);\n\t\tuntyped  __js__(\"delete\")(h.__keys__[id]);\n\t\treturn true;\n\t}\n\n\tpublic function keys() : Iterator<K> {\n\t\tvar a = [];\n\t\tuntyped {\n\t\t\t__js__(\"for( var key in this.h.__keys__ ) {\");\n\t\t\t\tif( h.hasOwnProperty(key) )\n\t\t\t\t\ta.push(h.__keys__[key]);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn a.iterator();\n\t}\n\n\tpublic function iterator() : Iterator<V> {\n\t\treturn untyped {\n\t\t\tref : h,\n\t\t\tit : keys(),\n\t\t\thasNext : function() { return __this__.it.hasNext(); },\n\t\t\tnext : function() { var i = __this__.it.next(); return __this__.ref[getId(i)]; }\n\t\t};\n\t}\n\n\tpublic function toString() : String {\n\t\tvar s = new StringBuf();\n\t\ts.add(\"{\");\n\t\tvar it = keys();\n\t\tfor( i in it ) {\n\t\t\ts.add(Std.string(i));\n\t\t\ts.add(\" => \");\n\t\t\ts.add(Std.string(get(i)));\n\t\t\tif( it.hasNext() )\n\t\t\t\ts.add(\", \");\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n}","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.ds;\n\nprivate class StringMapIterator<T> {\n\tvar map : StringMap<T>;\n\tvar keys : Array<String>;\n\tvar index : Int;\n\tvar count : Int;\n\tpublic inline function new(map:StringMap<T>, keys:Array<String>) {\n\t\tthis.map = map;\n\t\tthis.keys = keys;\n\t\tthis.index = 0;\n\t\tthis.count = keys.length;\n\t}\n\tpublic inline function hasNext() {\n\t\treturn index < count;\n\t}\n\tpublic inline function next() {\n\t\treturn map.get(keys[index++]);\n\t}\n}\n\n@:coreApi class StringMap<T> implements haxe.Constraints.IMap<String,T> {\n\n\tprivate var h : Dynamic;\n\tprivate var rh : Dynamic;\n\n\tpublic inline function new() : Void {\n\t\th = {};\n\t}\n\n\tinline function isReserved(key:String) : Bool {\n\t\treturn untyped __js__(\"__map_reserved\")[key] != null;\n\t}\n\n\tpublic inline function set( key : String, value : T ) : Void {\n\t\tif( isReserved(key) )\n\t\t\tsetReserved(key, value);\n\t\telse\n\t\t\th[cast key] = value;\n\t}\n\n\tpublic inline function get( key : String ) : Null<T> {\n\t\tif( isReserved(key) )\n\t\t\treturn getReserved(key);\n\t\treturn h[cast key];\n\t}\n\n\tpublic inline function exists( key : String ) : Bool {\n\t\tif( isReserved(key) )\n\t\t\treturn existsReserved(key);\n\t\treturn h.hasOwnProperty(key);\n\t}\n\n\tfunction setReserved( key : String, value : T ) : Void {\n\t\tif( rh == null ) rh = {};\n\t\trh[cast \"$\"+key] = value;\n\t}\n\n\tfunction getReserved( key : String ) : Null<T> {\n\t\treturn rh == null ? null : rh[cast \"$\"+key];\n\t}\n\n\tfunction existsReserved( key : String ) : Bool {\n\t\tif( rh == null ) return false;\n\t\treturn untyped rh.hasOwnProperty(\"$\"+key);\n\t}\n\n\tpublic function remove( key : String ) : Bool {\n\t\tif( isReserved(key) ) {\n\t\t\tkey = \"$\" + key;\n\t\t\tif( rh == null || !rh.hasOwnProperty(key) ) return false;\n\t\t\tuntyped __js__(\"delete\")(rh[key]);\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif( !h.hasOwnProperty(key) )\n\t\t\t\treturn false;\n\t\t\tuntyped __js__(\"delete\")(h[key]);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic function keys() : Iterator<String> {\n\t\treturn arrayKeys().iterator();\n\t}\n\t\n\tfunction arrayKeys() : Array<String> {\n\t\tvar out = [];\n\t\tuntyped {\n\t\t\t__js__(\"for( var key in this.h ) {\");\n\t\t\t\tif( h.hasOwnProperty(key) )\n\t\t\t\t\tout.push(key);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\tif( rh != null ) untyped {\n\t\t\t__js__(\"for( var key in this.rh ) {\");\n\t\t\t\tif( key.charCodeAt(0) == \"$\".code )\n\t\t\t\t\tout.push(key.substr(1));\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn out;\n\t}\n\n\tpublic inline function iterator() : Iterator<T> {\n\t\treturn new StringMapIterator(this, arrayKeys());\n\t}\n\n\tpublic function toString() : String {\n\t\tvar s = new StringBuf();\n\t\ts.add(\"{\");\n\t\tvar keys = arrayKeys();\n\t\tfor( i in 0...keys.length ) {\n\t\t\tvar k = keys[i];\n\t\t\ts.add(k);\n\t\t\ts.add(\" => \");\n\t\t\ts.add(Std.string(get(k)));\n\t\t\tif( i < keys.length-1 )\n\t\t\t\ts.add(\", \");\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n\n\tstatic function __init__() : Void {\n\t\tuntyped __js__(\"var __map_reserved = {}\");\n\t}\n\n}\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.io;\n\n#if !nodejs\nimport js.html.compat.Uint8Array;\nimport js.html.compat.DataView;\n#end\n\n@:coreApi\nclass Bytes {\n\n\tpublic var length(default,null) : Int;\n\tvar b : js.html.Uint8Array;\n\tvar data : js.html.DataView;\n\n\tfunction new(data:BytesData) {\n\t\tthis.length = data.byteLength;\n\t\tthis.b = new js.html.Uint8Array(data);\n\t\tuntyped {\n\t\t\tb.bufferValue = data; // some impl does not return the same instance in .buffer\n\t\t\tdata.hxBytes = this;\n\t\t\tdata.bytes = this.b;\n\t\t}\n\t}\n\n\tpublic inline function get( pos : Int ) : Int {\n\t\treturn b[pos];\n\t}\n\n\tpublic inline function set( pos : Int, v : Int ) : Void {\n\t\tb[pos] = v & 0xFF; // the &0xFF is necessary for js.html.compat support\n\t}\n\n\tpublic function blit( pos : Int, src : Bytes, srcpos : Int, len : Int ) : Void {\n\t\tif( pos < 0 || srcpos < 0 || len < 0 || pos + len > length || srcpos + len > src.length ) throw Error.OutsideBounds;\n\t\tif( srcpos == 0 && len == src.length )\n\t\t\tb.set(src.b,pos);\n\t\telse\n\t\t\tb.set(src.b.subarray(srcpos,srcpos+len),pos);\n\t}\n\n\tpublic function fill( pos : Int, len : Int, value : Int ) : Void {\n\t\tfor( i in 0...len )\n\t\t\tset(pos++, value);\n\t}\n\n\tpublic function sub( pos : Int, len : Int ) : Bytes {\n\t\tif( pos < 0 || len < 0 || pos + len > length ) throw Error.OutsideBounds;\n\t\treturn new Bytes(b.buffer.slice(pos+b.byteOffset,pos+b.byteOffset+len));\n\t}\n\n\tpublic function compare( other : Bytes ) : Int {\n\t\tvar b1 = b;\n\t\tvar b2 = other.b;\n\t\tvar len = (length < other.length) ? length : other.length;\n\t\tfor( i in 0...len )\n\t\t\tif( b1[i] != b2[i] )\n\t\t\t\treturn b1[i] - b2[i];\n\t\treturn length - other.length;\n\t}\n\n\tinline function initData() : Void {\n\t\tif( data == null ) data = new js.html.DataView(b.buffer, b.byteOffset, b.byteLength);\n\t}\n\n\tpublic function getDouble( pos : Int ) : Float {\n\t\tinitData();\n\t\treturn data.getFloat64(pos, true);\n\t}\n\n\tpublic function getFloat( pos : Int ) : Float {\n\t\tinitData();\n\t\treturn data.getFloat32(pos, true);\n\t}\n\n\tpublic function setDouble( pos : Int, v : Float ) : Void {\n\t\tinitData();\n\t\tdata.setFloat64(pos, v, true);\n\t}\n\n\tpublic function setFloat( pos : Int, v : Float ) : Void {\n\t\tinitData();\n\t\tdata.setFloat32(pos, v, true);\n\t}\n\n\tpublic function getUInt16( pos : Int ) : Int {\n\t\tinitData();\n\t\treturn data.getUint16(pos, true);\n\t}\n\n\tpublic function setUInt16( pos : Int, v : Int ) : Void {\n\t\tinitData();\n\t\tdata.setUint16(pos, v, true);\n\t}\n\n\tpublic function getInt32( pos : Int ) : Int {\n\t\tinitData();\n\t\treturn data.getInt32(pos, true);\n\t}\n\n\tpublic function setInt32( pos : Int, v : Int ) : Void {\n\t\tinitData();\n\t\tdata.setInt32(pos, v, true);\n\t}\n\n\tpublic function getInt64( pos : Int ) : haxe.Int64 {\n\t\treturn Int64.make(getInt32(pos + 4),getInt32(pos));\n\t}\n\n\tpublic function setInt64( pos : Int, v : haxe.Int64 ) : Void {\n\t\tsetInt32(pos, v.low);\n\t\tsetInt32(pos + 4, v.high);\n\t}\n\n\tpublic function getString( pos : Int, len : Int ) : String {\n\t\tif( pos < 0 || len < 0 || pos + len > length ) throw Error.OutsideBounds;\n\t\tvar s = \"\";\n\t\tvar b = b;\n\t\tvar fcc = String.fromCharCode;\n\t\tvar i = pos;\n\t\tvar max = pos+len;\n\t\t// utf8-decode and utf16-encode\n\t\twhile( i < max ) {\n\t\t\tvar c = b[i++];\n\t\t\tif( c < 0x80 ) {\n\t\t\t\tif( c == 0 ) break;\n\t\t\t\ts += fcc(c);\n\t\t\t} else if( c < 0xE0 )\n\t\t\t\ts += fcc( ((c & 0x3F) << 6) | (b[i++] & 0x7F) );\n\t\t\telse if( c < 0xF0 ) {\n\t\t\t\tvar c2 = b[i++];\n\t\t\t\ts += fcc( ((c & 0x1F) << 12) | ((c2 & 0x7F) << 6) | (b[i++] & 0x7F) );\n\t\t\t} else {\n\t\t\t\tvar c2 = b[i++];\n\t\t\t\tvar c3 = b[i++];\n\t\t\t\tvar u = ((c & 0x0F) << 18) | ((c2 & 0x7F) << 12) | ((c3 & 0x7F) << 6) | (b[i++] & 0x7F);\n\t\t\t\t// surrogate pair\n\t\t\t\ts += fcc( (u >> 10) + 0xD7C0 );\n\t\t\t\ts += fcc( (u & 0x3FF) | 0xDC00 );\n\t\t\t}\n\t\t}\n\t\treturn s;\n\t}\n\n\t@:deprecated(\"readString is deprecated, use getString instead\")\n\t@:noCompletion\n\tpublic inline function readString(pos:Int, len:Int):String {\n\t\treturn getString(pos, len);\n\t}\n\n\tpublic function toString() : String {\n\t\treturn getString(0,length);\n\t}\n\n\tpublic function toHex() : String {\n\t\tvar s = new StringBuf();\n\t\tvar chars = [];\n\t\tvar str = \"0123456789abcdef\";\n\t\tfor( i in 0...str.length )\n\t\t\tchars.push(str.charCodeAt(i));\n\t\tfor( i in 0...length ) {\n\t\t\tvar c = get(i);\n\t\t\ts.addChar(chars[c >> 4]);\n\t\t\ts.addChar(chars[c & 15]);\n\t\t}\n\t\treturn s.toString();\n\t}\n\n\tpublic inline function getData() : BytesData {\n\t\treturn untyped b.bufferValue;\n\t}\n\n\tpublic static inline function alloc( length : Int ) : Bytes {\n\t\treturn new Bytes(new BytesData(length));\n\t}\n\n\tpublic static function ofString( s : String ) : Bytes {\n\t\tvar a = new Array();\n\t\t// utf16-decode and utf8-encode\n\t\tvar i = 0;\n\t\twhile( i < s.length ) {\n\t\t\tvar c : Int = StringTools.fastCodeAt(s,i++);\n\t\t\t// surrogate pair\n\t\t\tif( 0xD800 <= c && c <= 0xDBFF )\n\t\t\t    c = (c - 0xD7C0 << 10) | (StringTools.fastCodeAt(s,i++) & 0x3FF);\n\t\t\tif( c <= 0x7F )\n\t\t\t\ta.push(c);\n\t\t\telse if( c <= 0x7FF ) {\n\t\t\t\ta.push( 0xC0 | (c >> 6) );\n\t\t\t\ta.push( 0x80 | (c & 63) );\n\t\t\t} else if( c <= 0xFFFF ) {\n\t\t\t\ta.push( 0xE0 | (c >> 12) );\n\t\t\t\ta.push( 0x80 | ((c >> 6) & 63) );\n\t\t\t\ta.push( 0x80 | (c & 63) );\n\t\t\t} else {\n\t\t\t\ta.push( 0xF0 | (c >> 18) );\n\t\t\t\ta.push( 0x80 | ((c >> 12) & 63) );\n\t\t\t\ta.push( 0x80 | ((c >> 6) & 63) );\n\t\t\t\ta.push( 0x80 | (c & 63) );\n\t\t\t}\n\t\t}\n\t\treturn new Bytes(new js.html.Uint8Array(a).buffer);\n\t}\n\n\tpublic static function ofData( b : BytesData ) : Bytes {\n\t\tvar hb = untyped b.hxBytes;\n\t\tif( hb != null ) return hb;\n\t\treturn new Bytes(b);\n\t}\n\n\tpublic inline static function fastGet( b : BytesData, pos : Int ) : Int {\n\t\t// this requires that we have wrapped it with haxe.io.Bytes beforehand\n\t\treturn untyped b.bytes[pos];\n\t}\n\n}\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.io;\n\n/**\n\tThis exception is raised when reading while data is no longer available in the `haxe.io.Input`.\n**/\nclass Eof {\n\tpublic function new() {\n\t}\n\t@:keep function toString() {\n\t\treturn \"Eof\";\n\t}\n}\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.io;\n\n/**\n\tHelper that converts between floating point and binary representation.\n\tAlways works in low-endian encoding.\n**/\nclass FPHelper {\n\n\t#if neko_v21\n\t// stored in helper\n\t#elseif neko\n\tstatic var i64tmp = new neko.vm.Tls<Int64>();\n\t#elseif !(java || cs)\n\tstatic var i64tmp = Int64.ofInt(0);\n\t#end\n\n\t#if neko\n\t\t#if neko_v21\n\t\tstatic var helpers = new neko.vm.Tls<neko.NativeArray<Dynamic>>();\n\t\t#else\n\t\tstatic var helperf = new neko.vm.Tls<neko.NativeString>();\n\t\tstatic var helperd = new neko.vm.Tls<neko.NativeString>();\n\t\tstatic var _float_of_bytes = neko.Lib.load(\"std\",\"float_of_bytes\",2);\n\t\tstatic var _double_of_bytes = neko.Lib.load(\"std\",\"double_of_bytes\",2);\n\t\tstatic var _float_bytes = neko.Lib.load(\"std\",\"float_bytes\",2);\n\t\tstatic var _double_bytes = neko.Lib.load(\"std\",\"double_bytes\",2);\n\t\t#end\n\t#elseif flash\n\t\tstatic var helper = {\n\t\t\tvar b = new flash.utils.ByteArray();\n\t\t\tb.endian = flash.utils.Endian.LITTLE_ENDIAN;\n\t\t\tb;\n\t\t}\n\t#elseif php\n\t\tstatic var isLittleEndian : Bool = untyped __call__('unpack','S','\\x01\\x00')[1] == 1;\n\t#else\n\t\tstatic inline var LN2 = 0.6931471805599453; // Math.log(2)\n\t#end\n\n\t#if neko_v21 inline #end\n\tpublic static function i32ToFloat( i : Int ) : Float {\n\t\t#if neko\n\t\t\t#if neko_v21\n\t\t\treturn untyped $itof(i,false);\n\t\t\t#else\n\t\t\tvar helper = helperf.value;\n\t\t\tif( helper == null )\n\t\t\t\thelperf.value = helper = neko.NativeString.alloc(4);\n\t\t\tuntyped $sset(helper,0,i&0xFF);\n\t\t\tuntyped $sset(helper,1,(i>>8)&0xFF);\n\t\t\tuntyped $sset(helper,2,(i>>16)&0xFF);\n\t\t\tuntyped $sset(helper,3,i>>>24);\n\t\t\treturn _float_of_bytes(helper,false);\n\t\t\t#end\n\t\t#elseif cpp\n\t\t\treturn untyped __global__.__hxcpp_reinterpret_le_int32_as_float32(i);\n\t\t#elseif cs\n\t\t\tvar helper = new SingleHelper(0);\n\t\t\tif( cs.system.BitConverter.IsLittleEndian )\n\t\t\t{\n\t\t\t\thelper.i = i;\n\t\t\t} else {\n\t\t\t\thelper.i = ((i >>> 24) & 0xFF) | (((i >> 16) & 0xFF) << 8) | (((i >> 8) & 0xFF) << 16) | ((i & 0xFF) << 24);\n\t\t\t}\n\n\t\t\treturn helper.f;\n\t\t#elseif java\n\t\t\treturn java.lang.Float.FloatClass.intBitsToFloat(i);\n\t\t#elseif php\n\t\t\treturn untyped  __call__('unpack', 'f', __call__('pack', 'l', i))[1];\n\t\t#elseif flash\n\t\t\tvar helper = helper;\n\t\t\thelper.position = 0;\n\t\t\thelper.writeUnsignedInt(i);\n\t\t\thelper.position = 0;\n\t\t\treturn helper.readFloat();\n\t\t#else\n\t\t\tvar sign = 1 - ((i >>> 31) << 1);\n\t\t\tvar exp = (i >>> 23) & 0xFF;\n\t\t\tvar sig = i & 0x7FFFFF;\n\t\t\tif( sig == 0 && exp == 0 )\n\t\t\t\treturn 0.0;\n\t\t\treturn sign*(1 + Math.pow(2, -23)*sig) * Math.pow(2, exp-127);\n\t\t#end\n\t}\n\n\t#if neko_v21 inline #end\n\tpublic static function floatToI32( f : Float ) : Int {\n\t\t#if neko\n\t\t\t#if neko_v21\n\t\t\treturn untyped $ftoi(f,false);\n\t\t\t#else\n\t\t\tvar r = _float_bytes(f,false);\n\t\t\treturn untyped $sget(r,0) | ($sget(r,1)<<8) | ($sget(r,2)<<16) | ($sget(r,3)<<24);\n\t\t\t#end\n\t\t#elseif cpp\n\t\t\treturn untyped __global__.__hxcpp_reinterpret_float32_as_le_int32(f);\n\t\t#elseif cs\n\t\t\tvar helper = new SingleHelper(f);\n\t\t\tif( cs.system.BitConverter.IsLittleEndian )\n\t\t\t{\n\t\t\t\treturn helper.i;\n\t\t\t} else {\n\t\t\t\tvar i = helper.i;\n\t\t\t\treturn ((i >>> 24) & 0xFF) | (((i >> 16) & 0xFF) << 8) | (((i >> 8) & 0xFF) << 16) | ((i & 0xFF) << 24);\n\t\t\t}\n\t\t#elseif java\n\t\t\treturn java.lang.Float.FloatClass.floatToRawIntBits(f);\n\t\t#elseif flash\n\t\t\tvar helper = helper;\n\t\t\thelper.position = 0;\n\t\t\thelper.writeFloat(f);\n\t\t\thelper.position = 0;\n\t\t\treturn helper.readUnsignedInt();\n\t\t#elseif php\n\t\t\treturn untyped __call__('unpack','l',__call__('pack', 'f', f))[1];\n\t\t#else\n\t\t\tif( f == 0 ) return 0;\n\t\t\tvar af = f < 0 ? -f : f;\n\t\t\tvar exp = Math.floor(Math.log(af) / LN2);\n\t\t\tif( exp < -127 ) exp = -127 else if( exp > 128 ) exp = 128;\n\t\t\tvar sig = Math.round((af / Math.pow(2, exp) - 1) * 0x800000) & 0x7FFFFF;\n\t\t\treturn (f < 0 ? 0x80000000 : 0) | ((exp + 127) << 23) | sig;\n\t\t#end\n\t}\n\n\t#if neko_v21 inline #end\n\tpublic static function i64ToDouble( low : Int, high : Int ) : Float {\n\t\t#if neko\n\t\t\t#if neko_v21\n\t\t\treturn untyped $itod(low,high,false);\n\t\t\t#else\n\t\t\tvar helper = helperd.value;\n\t\t\tif( helper == null )\n\t\t\t\thelperd.value = helper = neko.NativeString.alloc(8);\n\t\t\tuntyped $sset(helper,0,low&0xFF);\n\t\t\tuntyped $sset(helper,1,(low>>8)&0xFF);\n\t\t\tuntyped $sset(helper,2,(low>>16)&0xFF);\n\t\t\tuntyped $sset(helper,3,low>>>24);\n\t\t\tuntyped $sset(helper,4,high&0xFF);\n\t\t\tuntyped $sset(helper,5,(high>>8)&0xFF);\n\t\t\tuntyped $sset(helper,6,(high>>16)&0xFF);\n\t\t\tuntyped $sset(helper,7,high>>>24);\n\t\t\treturn _double_of_bytes(helper,false);\n\t\t\t#end\n\t\t#elseif cpp\n\t\t\treturn untyped __global__.__hxcpp_reinterpret_le_int32s_as_float64(low,high);\n\t\t#elseif cs\n\t\t\tvar helper = new FloatHelper(0);\n\t\t\tif( cs.system.BitConverter.IsLittleEndian )\n\t\t\t{\n\t\t\t\thelper.i = haxe.Int64.make(high,low);\n\t\t\t} else {\n\t\t\t\tvar i1 = high,\n\t\t\t\t    i2 = low;\n\t\t\t\tvar j2 = ((i1 >>> 24) & 0xFF) | (((i1 >> 16) & 0xFF) << 8) | (((i1 >> 8) & 0xFF) << 16) | ((i1 & 0xFF) << 24);\n\t\t\t\tvar j1 = ((i2 >>> 24) & 0xFF) | (((i2 >> 16) & 0xFF) << 8) | (((i2 >> 8) & 0xFF) << 16) | ((i2 & 0xFF) << 24);\n\t\t\t\thelper.i = haxe.Int64.make(j1,j2);\n\t\t\t}\n\t\t\treturn helper.f;\n\t\t#elseif java\n\t\t\treturn java.lang.Double.DoubleClass.longBitsToDouble( Int64.make(high,low) );\n\t\t#elseif flash\n\t\t\tvar helper = helper;\n\t\t\thelper.position = 0;\n\t\t\thelper.writeUnsignedInt(low);\n\t\t\thelper.writeUnsignedInt(high);\n\t\t\thelper.position = 0;\n\t\t\treturn helper.readDouble();\n\t\t#elseif php\n\t\t\treturn untyped  __call__('unpack', 'd', __call__('pack', 'ii', isLittleEndian ? low : high, isLittleEndian ? high : low))[1];\n\t\t#else\n\t\t\tvar sign = 1 - ((high >>> 31) << 1);\n\t\t\tvar exp = ((high >> 20) & 0x7FF) - 1023;\n\t\t\tvar sig = (high&0xFFFFF) * 4294967296. + (low>>>31) * 2147483648. + (low&0x7FFFFFFF);\n\t\t\tif( sig == 0 && exp == -1023 )\n\t\t\t\treturn 0.0;\n\t\t\treturn sign*(1.0 + Math.pow(2, -52)*sig) * Math.pow(2, exp);\n\t\t#end\n\t}\n\n\t/**\n\t\tReturns an Int64 representing the bytes representation of the double precision IEEE float value.\n\t\tWARNING : for performance reason, the same Int64 value might be reused every time. Copy its low/high values before calling again.\n\t\tWe still ensure that this is safe to use in a multithread environment\n\t**/\n\tpublic static function doubleToI64( v : Float ) : Int64 {\n\t\t#if neko\n\t\t\t#if neko_v21\n\t\t\tvar helper = helpers.value;\n\t\t\tif( helper == null ) {\n\t\t\t\thelpers.value = helper = neko.NativeArray.alloc(2);\n\t\t\t\thelper[0] = neko.NativeArray.alloc(2);\n\t\t\t\thelper[1] = haxe.Int64.ofInt(0);\n\t\t\t}\n\t\t\tvar i64 : haxe.Int64 = helper[1], int2 = helper[0];\n\t\t\tuntyped $dtoi(v,int2,false);\n\t\t\t@:privateAccess {\n\t\t\t\ti64.set_low(int2[0]);\n\t\t\t\ti64.set_high(int2[1]);\n\t\t\t}\n\t\t\treturn i64;\n\t\t\t#else\n\t\t\tvar r = _double_bytes(v,false), i64 = i64tmp.value;\n\t\t\tif( i64 == null )\n\t\t\t\ti64 = i64tmp.value = haxe.Int64.ofInt(0);\n\t\t\t@:privateAccess {\n\t\t\t\ti64.set_low(untyped $sget(r,0) | ($sget(r,1)<<8) | ($sget(r,2)<<16) | ($sget(r,3)<<24));\n\t\t\t\ti64.set_high(untyped $sget(r,4) | ($sget(r,5)<<8) | ($sget(r,6)<<16) | ($sget(r,7)<<24));\n\t\t\t}\n\t\t\treturn i64;\n\t\t\t#end\n\t\t#elseif cpp\n\t\t\treturn Int64.make(untyped __global__.__hxcpp_reinterpret_float64_as_le_int32_high(v),\n\t\t\t\t               untyped __global__.__hxcpp_reinterpret_float64_as_le_int32_low(v) );\n\t\t#elseif java\n\t\t\treturn java.lang.Double.DoubleClass.doubleToRawLongBits(v);\n\t\t#elseif cs\n\t\t\tvar helper = new FloatHelper(v);\n\t\t\tif( cs.system.BitConverter.IsLittleEndian )\n\t\t\t{\n\t\t\t\treturn helper.i;\n\t\t\t} else {\n\t\t\t\tvar i = helper.i;\n\t\t\t\tvar i1 = haxe.Int64.getHigh(i),\n\t\t\t\t    i2 = haxe.Int64.getLow(i);\n\t\t\t\tvar j2 = ((i1 >>> 24) & 0xFF) | (((i1 >> 16) & 0xFF) << 8) | (((i1 >> 8) & 0xFF) << 16) | ((i1 & 0xFF) << 24);\n\t\t\t\tvar j1 = ((i2 >>> 24) & 0xFF) | (((i2 >> 16) & 0xFF) << 8) | (((i2 >> 8) & 0xFF) << 16) | ((i2 & 0xFF) << 24);\n\n\t\t\t\treturn haxe.Int64.make(j1,j2);\n\t\t\t}\n\t\t#elseif flash\n\t\t\tvar helper = helper;\n\t\t\thelper.position = 0;\n\t\t\thelper.writeDouble(v);\n\t\t\thelper.position = 0;\n\t\t\tvar i64 = i64tmp;\n\t\t\t@:privateAccess {\n\t\t\t\ti64.set_low(cast helper.readUnsignedInt());\n\t\t\t\ti64.set_high(cast helper.readUnsignedInt());\n\t\t\t}\n\t\t\treturn i64;\n\t\t#elseif php\n\t\t\tvar a = untyped __call__('unpack',isLittleEndian ? 'V2' : 'N2',__call__('pack', 'd', v));\n\t\t\tvar i64 = i64tmp;\n\t\t\t@:privateAccess {\n\t\t\t\ti64.set_low(a[isLittleEndian ? 1 : 2]);\n\t\t\t\ti64.set_high(a[isLittleEndian ? 2 : 1]);\n\t\t\t}\n\t\t\treturn i64;\n\t\t#else\n\t\t\tvar i64 = i64tmp;\n\t\t\tif( v == 0 ) {\n\t\t\t\t@:privateAccess {\n\t\t\t\t\ti64.set_low(0);\n\t\t\t\t\ti64.set_high(0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar av = v < 0 ? -v : v;\n\t\t\t\tvar exp = Math.floor(Math.log(av) / LN2);\n\t\t\t\tvar sig = Math.fround(((av / Math.pow(2, exp)) - 1) * 4503599627370496.); // 2^52\n\t\t\t\tvar sig_l = Std.int(sig);\n\t\t\t\tvar sig_h = Std.int(sig / 4294967296.0);\n\t\t\t\t@:privateAccess {\n\t\t\t\t\ti64.set_low(sig_l);\n\t\t\t\t\ti64.set_high((v < 0 ? 0x80000000 : 0) | ((exp + 1023) << 20) | sig_h);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn i64;\n\t\t#end\n\t}\n\n}\n\n#if cs\n@:meta(System.Runtime.InteropServices.StructLayout(System.Runtime.InteropServices.LayoutKind.Explicit))\n@:nativeGen @:struct private class SingleHelper\n{\n\t@:meta(System.Runtime.InteropServices.FieldOffset(0))\n\tpublic var i:Int;\n\t@:meta(System.Runtime.InteropServices.FieldOffset(0))\n\tpublic var f:Single;\n\n\tpublic function new(f:Single)\n\t{\n\t\tthis.i = 0;\n\t\tthis.f = f;\n\t}\n}\n\n@:meta(System.Runtime.InteropServices.StructLayout(System.Runtime.InteropServices.LayoutKind.Explicit))\n@:nativeGen @:struct private class FloatHelper\n{\n\t@:meta(System.Runtime.InteropServices.FieldOffset(0))\n\tpublic var i:haxe.Int64;\n\t@:meta(System.Runtime.InteropServices.FieldOffset(0))\n\tpublic var f:Float;\n\n\tpublic function new(f:Float)\n\t{\n\t\tthis.i = haxe.Int64.ofInt(0);\n\t\tthis.f = f;\n\t}\n}\n\n#end\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage js;\n\nprivate class HaxeError extends js.Error {\n\n\tvar val:Dynamic;\n\n\tpublic function new(val:Dynamic) untyped {\n\t\tsuper();\n\t\tthis.val = __define_feature__(\"js.Boot.HaxeError\", val);\n\t\tthis.message = String(val);\n\t\tif (js.Error.captureStackTrace) js.Error.captureStackTrace(this, HaxeError);\n\t}\n\n\tpublic static function wrap(val:Dynamic):Dynamic untyped {\n\t\treturn if (__instanceof__(val, js.Error)) val else new HaxeError(val);\n\t}\n}\n\n@:dox(hide)\nclass Boot {\n\n\tprivate static function __unhtml(s : String) {\n\t\treturn s.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\n\t}\n\n\tprivate static function __trace(v,i : haxe.PosInfos) {\n\t\tuntyped {\n\t\t\tvar msg = if( i != null ) i.fileName+\":\"+i.lineNumber+\": \" else \"\";\n\t\t\t#if jsfl\n\t\t\tmsg += __string_rec(v,\"\");\n\t\t\tfl.trace(msg);\n\t\t\t#else\n\t\t\tmsg += __string_rec(v, \"\");\n\t\t\tif( i != null && i.customParams != null )\n\t\t\t\tfor( v in i.customParams )\n\t\t\t\t\tmsg += \",\" + __string_rec(v, \"\");\n\t\t\tvar d;\n\t\t\tif( __js__(\"typeof\")(document) != \"undefined\" && (d = document.getElementById(\"haxe:trace\")) != null )\n\t\t\t\td.innerHTML += __unhtml(msg)+\"<br/>\";\n\t\t\telse if( __js__(\"typeof console\") != \"undefined\" && __js__(\"console\").log != null )\n\t\t\t\t__js__(\"console\").log(msg);\n\t\t\t#end\n\t\t}\n\t}\n\n\tprivate static function __clear_trace() {\n\t\tuntyped {\n\t\t\t#if jsfl\n\t\t\tfl.outputPanel.clear();\n\t\t\t#else\n\t\t\tvar d = document.getElementById(\"haxe:trace\");\n\t\t\tif( d != null )\n\t\t\t\td.innerHTML = \"\";\n\t\t\t#end\n\t\t}\n\t}\n\n\tstatic inline function isClass(o:Dynamic) : Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isClass\", o.__name__);\n\t}\n\n\tstatic inline function isEnum(e:Dynamic) : Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isEnum\", e.__ename__);\n\t}\n\n\tstatic function getClass(o:Dynamic) : Dynamic {\n\t\tif (Std.is(o, Array))\n\t\t\treturn Array;\n\t\telse {\n\t\t\tvar cl = untyped __define_feature__(\"js.Boot.getClass\", o.__class__);\n\t\t\tif (cl != null)\n\t\t\t\treturn cl;\n\t\t\tvar name = __nativeClassName(o);\n\t\t\tif (name != null)\n\t\t\t\treturn __resolveNativeClass(name);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t@:ifFeature(\"has_enum\")\n\tprivate static function __string_rec(o,s:String) {\n\t\tuntyped {\n\t\t\tif( o == null )\n\t\t\t    return \"null\";\n\t\t\tif( s.length >= 5 )\n\t\t\t\treturn \"<...>\"; // too much deep recursion\n\t\t\tvar t = __js__(\"typeof(o)\");\n\t\t\tif( t == \"function\" && (isClass(o) || isEnum(o)) )\n\t\t\t\tt = \"object\";\n\t\t\tswitch( t ) {\n\t\t\tcase \"object\":\n\t\t\t\tif( __js__(\"o instanceof Array\") ) {\n\t\t\t\t\tif( o.__enum__ ) {\n\t\t\t\t\t\tif( o.length == 2 )\n\t\t\t\t\t\t\treturn o[0];\n\t\t\t\t\t\tvar str = o[0]+\"(\";\n\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\tfor( i in 2...o.length ) {\n\t\t\t\t\t\t\tif( i != 2 )\n\t\t\t\t\t\t\t\tstr += \",\" + __string_rec(o[i],s);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tstr += __string_rec(o[i],s);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str + \")\";\n\t\t\t\t\t}\n\t\t\t\t\tvar l = o.length;\n\t\t\t\t\tvar i;\n\t\t\t\t\tvar str = \"[\";\n\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\tfor( i in 0...l )\n\t\t\t\t\t\tstr += (if (i > 0) \",\" else \"\")+__string_rec(o[i],s);\n\t\t\t\t\tstr += \"]\";\n\t\t\t\t\treturn str;\n\t\t\t\t}\n\t\t\t\tvar tostr;\n\t\t\t\ttry {\n\t\t\t\t\ttostr = untyped o.toString;\n\t\t\t\t} catch( e : Dynamic ) {\n\t\t\t\t\t// strange error on IE\n\t\t\t\t\treturn \"???\";\n\t\t\t\t}\n\t\t\t\tif( tostr != null && tostr != __js__(\"Object.toString\") && __typeof__(tostr) == \"function\" ) {\n\t\t\t\t\tvar s2 = o.toString();\n\t\t\t\t\tif( s2 != \"[object Object]\")\n\t\t\t\t\t\treturn s2;\n\t\t\t\t}\n\t\t\t\tvar k : String = null;\n\t\t\t\tvar str = \"{\\n\";\n\t\t\t\ts += \"\\t\";\n\t\t\t\tvar hasp = (o.hasOwnProperty != null);\n\t\t\t\t__js__(\"for( var k in o ) {\");\n\t\t\t\t\tif( hasp && !o.hasOwnProperty(k) )\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif( k == \"prototype\" || k == \"__class__\" || k == \"__super__\" || k == \"__interfaces__\" || k == \"__properties__\" )\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif( str.length != 2 )\n\t\t\t\t\t\tstr += \", \\n\";\n\t\t\t\t\tstr += s + k + \" : \"+__string_rec(o[k],s);\n\t\t\t\t__js__(\"}\");\n\t\t\t\ts = s.substring(1);\n\t\t\t\tstr += \"\\n\" + s + \"}\";\n\t\t\t\treturn str;\n\t\t\tcase \"function\":\n\t\t\t\treturn \"<function>\";\n\t\t\tcase \"string\":\n\t\t\t\treturn o;\n\t\t\tdefault:\n\t\t\t\treturn String(o);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static function __interfLoop(cc : Dynamic,cl : Dynamic) {\n\t\tif( cc == null )\n\t\t\treturn false;\n\t\tif( cc == cl )\n\t\t\treturn true;\n\t\tvar intf : Dynamic = cc.__interfaces__;\n\t\tif( intf != null )\n\t\t\tfor( i in 0...intf.length ) {\n\t\t\t\tvar i : Dynamic = intf[i];\n\t\t\t\tif( i == cl || __interfLoop(i,cl) )\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\treturn __interfLoop(cc.__super__,cl);\n\t}\n\n\t@:ifFeature(\"typed_catch\") private static function __instanceof(o : Dynamic,cl : Dynamic) {\n\t\tif( cl == null )\n\t\t\treturn false;\n\t\tswitch( cl ) {\n\t\tcase Int:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"number\" && untyped __js__(\"(o|0) === o\");\n\t\tcase Float:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"number\";\n\t\tcase Bool:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"boolean\";\n\t\tcase String:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"string\";\n\t\tcase Array:\n\t\t\treturn (untyped __js__(\"(o instanceof Array)\")) && o.__enum__ == null;\n\t\tcase Dynamic:\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tif( o != null ) {\n\t\t\t\t// Check if o is an instance of a Haxe class or a native JS object\n\t\t\t\tif( (untyped __js__(\"typeof\"))(cl) == \"function\" ) {\n\t\t\t\t\tif( untyped __js__(\"o instanceof cl\") )\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tif( __interfLoop(getClass(o),cl) )\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if ( (untyped __js__(\"typeof\"))(cl) == \"object\" && __isNativeObj(cl) ) {\n\t\t\t\t\tif( untyped __js__(\"o instanceof cl\") )\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// do not use isClass/isEnum here\n\t\t\tuntyped __feature__(\"Class.*\",if( cl == Class && o.__name__ != null ) return true);\n\t\t\tuntyped __feature__(\"Enum.*\",if( cl == Enum && o.__ename__ != null ) return true);\n\t\t\treturn o.__enum__ == cl;\n\t\t}\n\t}\n\n\t@:ifFeature(\"typed_cast\") private static function __cast(o : Dynamic, t : Dynamic) {\n\t\tif (__instanceof(o, t)) return o;\n\t\telse throw \"Cannot cast \" +Std.string(o) + \" to \" +Std.string(t);\n\t}\n\n\tstatic var __toStr = untyped ({}).toString;\n\t// get native JS [[Class]]\n\tstatic function __nativeClassName(o:Dynamic):String {\n\t\tvar name = untyped __toStr.call(o).slice(8, -1);\n\t\t// exclude general Object and Function\n\t\t// also exclude Math and JSON, because instanceof cannot be called on them\n\t\tif (name == \"Object\" || name == \"Function\" || name == \"Math\" || name == \"JSON\")\n\t\t\treturn null;\n\t\treturn name;\n\t}\n\n\t// check for usable native JS object\n\tstatic function __isNativeObj(o:Dynamic):Bool {\n\t\treturn __nativeClassName(o) != null;\n\t}\n\n\t// resolve native JS class in the global scope:\n\tstatic function __resolveNativeClass(name:String) {\n\t\treturn untyped js.Lib.global[name];\n\t}\n\n}\n","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage js.html.compat;\n\n#if !nodejs\n@:ifFeature(\"js.html.ArrayBuffer.*\")\nclass ArrayBuffer {\n\n\tpublic var byteLength : Int;\n\tvar a : Array<Int>;\n\n\tpublic function new( ?a : Dynamic ) {\n\t\tif( Std.is(a,Array) ) {\n\t\t\tthis.a = a;\n\t\t\tbyteLength = a.length;\n\t\t} else {\n\t\t\tvar len : Int = a;\n\t\t\tthis.a = [];\n\t\t\tfor( i in 0...len )\n\t\t\t\tthis.a[i] = 0;\n\t\t\tbyteLength = len;\n\t\t}\n\t}\n\n\tpublic function slice(begin,?end) {\n\t\treturn new ArrayBuffer(a.slice(begin,end));\n\t}\n\n\tstatic function sliceImpl(begin,?end) {\n\t\tvar u = new js.html.Uint8Array(js.Lib.nativeThis, begin, end == null ? null : end - begin);\n\t\tvar result = new js.html.ArrayBuffer(u.byteLength);\n\t\tvar resultArray = new js.html.Uint8Array(result);\n\t\tresultArray.set(u);\n\t\treturn result;\n\t}\n\n\tstatic function __init__() untyped {\n\t\tvar ArrayBuffer = js.Lib.global.ArrayBuffer || js.html.compat.ArrayBuffer;\n\t\tif( ArrayBuffer.prototype.slice == null ) ArrayBuffer.prototype.slice = sliceImpl; // IE10\n\t}\n}\n#end","/*\n * Copyright (C)2005-2016 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage js.html.compat;\n\n#if !nodejs\nimport js.Lib.nativeThis;\n\n@:ifFeature(\"js.html.Uint8Array.*\")\nclass Uint8Array {\n\n\tstatic var BYTES_PER_ELEMENT = 1;\n\n\tstatic function _new( ?arg1 : Dynamic, ?offset : Int, ?length : Int ) : Dynamic {\n\t\tvar arr;\n\t\tif( untyped __typeof__(arg1) == 'number' ) {\n\t\t\tarr = new Array();\n\t\t\tfor( i in 0...arg1 )\n\t\t\t\tarr[i] = 0;\n\t\t\tuntyped {\n\t\t\t\tarr.byteLength = arr.length;\n\t\t\t\tarr.byteOffset = 0;\n\t\t\t\tarr.buffer = new ArrayBuffer(arr);\n\t\t\t}\n\t\t} else if( Std.is(arg1,ArrayBuffer) ) {\n\t\t\tvar buffer : ArrayBuffer = arg1;\n\t\t\tif( offset == null ) offset = 0;\n\t\t\tif( length == null ) length = buffer.byteLength - offset;\n\t\t\tif( offset == 0 )\n\t\t\t\tarr = cast @:privateAccess buffer.a;\n\t\t\telse\n\t\t\t\t// here we are losing the fact that we should reference the same data,\n\t\t\t\t// but I don't see another way to have this behaviour while keeping [] access\n\t\t\t\tarr = cast @:privateAccess buffer.a.slice(offset, offset+length);\n\t\t\tuntyped {\n\t\t\t\tarr.byteLength = arr.length;\n\t\t\t\tarr.byteOffset = offset;\n\t\t\t\tarr.buffer = buffer;\n\t\t\t}\n\t\t} else if( Std.is(arg1, Array) ) {\n\t\t\tarr = (arg1 : Array<Int>).copy();\n\t\t\tuntyped {\n\t\t\t\tarr.byteLength = arr.length;\n\t\t\t\tarr.byteOffset = 0;\n\t\t\t\tarr.buffer = new ArrayBuffer(arr);\n\t\t\t}\n\t\t} else\n\t\t\tthrow \"TODO \"+arg1;\n\t\tuntyped {\n\t\t\tarr.subarray = _subarray;\n\t\t\tarr.set = _set;\n\t\t}\n\t\treturn arr;\n\t}\n\n\tstatic function _set( ?arg : Dynamic, ?offset : Int ) {\n\t\tif( Std.is(arg.buffer,ArrayBuffer) ) {\n\t\t\tvar a : Array<Int> = arg;\n\t\t\tif( arg.byteLength + offset > nativeThis.byteLength )\n\t\t\t\tthrow \"set() outside of range\";\n\t\t\tfor( i in 0...arg.byteLength )\n\t\t\t\tnativeThis[i + offset] = a[i];\n\t\t} else if( Std.is(arg,Array) ) {\n\t\t\tvar a : Array<Int> = arg;\n\t\t\tif( a.length + offset > nativeThis.byteLength )\n\t\t\t\tthrow \"set() outside of range\";\n\t\t\tfor( i in 0...a.length )\n\t\t\t\tnativeThis[i + offset] = a[i];\n\t\t} else\n\t\t\tthrow \"TODO\";\n\t}\n\n\tstatic function _subarray( start : Int, ?end : Int ) {\n\t\tvar a = _new(nativeThis.slice(start,end));\n\t\ta.byteOffset = start;\n\t\treturn a;\n\t}\n\n\tstatic function __init__() {\n\t\tvar Uint8Array = untyped js.Lib.global.Uint8Array || _new;\n\t}\n\n}\n#end","package com.github.haxePixiGAF.data.converters;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass ErrorConstants\r\n{\r\n\tpublic static inline var SCALE_NOT_FOUND:String=\" scale was not found in GAF config\";\r\n\tpublic static inline var ATLAS_NOT_FOUND:String=\"There is no texture atlas file '\";\r\n\tpublic static inline var FILE_NOT_FOUND:String=\"File or directory not found:'\";\r\n\tpublic static inline var GAF_NOT_FOUND:String=\"No GAF animation files found\";\r\n\tpublic static inline var CSF_NOT_FOUND:String=\" CSF was not found in GAF config\";\r\n\tpublic static inline var TIMELINES_NOT_FOUND:String=\"No animations found.\";\r\n\tpublic static inline var EMPTY_ZIP:String=\"zero file count in zip\";\r\n\tpublic static inline var ERROR_LOADING:String=\"Error occured while loading \";\r\n\tpublic static inline var ERROR_PARSING:String=\"GAF parse error\";\r\n\tpublic static inline var UNSUPPORTED_JSON:String=\"JSON format is no longer supported\";\r\n\tpublic static inline var UNKNOWN_FORMAT:String=\"Unknown data format.\";\r\n}","package com.github.haxePixiGAF.data.converters;\r\n\r\n/**\r\n * AS3 Conversion\r\n * @author Mathieu Anthoine\r\n * \r\n */\r\nclass WarningConstants\r\n{\r\n\tpublic static inline var UNSUPPORTED_FILTERS:String=\"Unsupported filter in animation\";\r\n\tpublic static inline var UNSUPPORTED_FILE:String=\"You are using an old version of GAF library\";\r\n\tpublic static inline var UNSUPPORTED_TAG:String=\"Unsupported tag found, check for playback library updates\";\r\n\tpublic static inline var FILTERS_UNDER_MASK:String=\"Warning! Animation contains objects with filters under mask! Online preview is not able to display filters applied under masks(flash player technical limitation). All other runtimes will display this correctly.\";\r\n\tpublic static inline var REGION_NOT_FOUND:String=\"In the texture atlas element is missing. This is conversion bug. Please report issue<font color='#0000ff'><u><a href='http://gafmedia.com/contact'>here</a></u></font>and we will fix it(use the Request type - Report Issue).\";\r\n}","package com.github.haxePixiGAF.events;\r\n\r\n/**\r\n * Equivalent to AS3 Event class constants\r\n * @author Mathieu Anthoine\r\n */\r\nclass GAFEvent\r\n{\r\n\tpublic static inline var COMPLETE:String = \"complete\";\r\n\tpublic static inline var ERROR:String = \"error\";\r\n\t\r\n}","package com.github.haxePixiGAF.text;\r\n\r\n/**\r\n * Equivalent to flash.text.TextFormatAlign class\r\n * @author Mathieu Anthoine\r\n */\r\nclass TextFormatAlign\r\n{\r\n\tpublic static inline var CENTER:String = \"center\";\r\n\tpublic static inline var END:String = \"end\";\r\n\tpublic static inline var JUSTIFY:String = \"justify\";\r\n\tpublic static inline var LEFT:String = \"left\";\r\n\tpublic static inline var RIGHT:String = \"right\";\r\n\tpublic static inline var START:String = \"start\";\r\n\t\r\n}"],
"names":[],
"mappings":"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"
}